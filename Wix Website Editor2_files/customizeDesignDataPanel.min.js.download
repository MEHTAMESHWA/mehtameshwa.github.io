define("customizeDesignDataPanel/ui/designDataPanelComponent.rt",["react","lodash","baseUI","baseUILib"],function(a,b,c,d){"use strict";function e(c,d,e){var f=this.getValueLink(c.key);return a.createElement(e,b.assign({},{value:f.value,valueLink:f,disabled:this.isCategoryDisabled()},this.getRequiredProps(c)))}function f(b,f){var g=c[b.controlType];return a.createElement("div",{key:b.key},e.apply(this,[b,f,g]),!this.isLastControlInCategory(f)?a.createElement(d.Divider,{long:false,key:"divider"}):null)}function g(a,b,c){return f.apply(this,[a,b])}return function(){return a.createElement("div",{className:"design-data-panel flex-column",style:{height:this.getHeight()}},a.createElement("div",{className:"design-data-panel-body flex-column flex-child"},a.createElement("div",{className:"content-container flex-child",key:"paramEditBox"},a.createElement(c.verticalTabs,{valueLink:this.linkSelectedCategory(),tabClicked:this.categoryChanged,options:this.getCategoriesRadioValues(),closed:this.state.controlsClosed}),!this.state.controlsClosed?a.createElement("div",{className:"content "+this.getCategoryClassName(),key:"content"},a.createElement(d.CustomScroll,{heightRelativeToParent:"100%"},a.createElement("div",{className:"scrolled-content"},a.createElement("span",{className:"tab-text"},this.getSelectedCategoryTranslatedText()),a.createElement.apply(this,["div",{className:"section"},this.isCategoryTogglable()?a.createElement("div",{key:"categoryToggle"},a.createElement(c.toggle,{label:this.getCategoryToggleLable(),value:this.isCategoryEnabled(),onChange:this.toggleCategory}),a.createElement(d.Divider,{long:false,key:"divider"})):null,b.map(this.getSelectedCategoryControls(),g.bind(this))])))):null)))}});define("customizeDesignDataPanel/lib/controls",["lodash"],function(a){"use strict";var b;var c=["top","right","bottom","left"];var d=["topLeft","topRight","bottomRight","bottomLeft"];var e=Object.freeze({cssBoxShadow:[{controlType:"angle",key:"angle",props:{helpText:null,label:"CustomDesign_Shadow_Angle",shouldTranslate:true,step:1}},{controlType:"slider",key:"distance",props:{helpText:null,label:"CustomDesign_Shadow_Distance",shouldTranslate:true,min:0,max:50}},{controlType:"slider",key:"size",props:{helpText:null,label:"CustomDesign_Shadow_Size",shouldTranslate:true,min:0,max:50}},{controlType:"slider",key:"blur",props:{helpText:null,label:"CustomDesign_Shadow_Blur",shouldTranslate:true,min:0,max:50}},{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Shadow_Color&Opacity",shouldTranslate:true,min:0,max:50}}],cssBorderRadius:[{controlType:"cornerRadiusInput",key:"radius",props:{helpText:null,label:"CustomDesign_Corners_CornerRadius"}}],cssBorder:[{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Borders_Color&Opacity"}},{controlType:"slider",key:"width",props:{helpText:null,label:"CustomDesign_Borders_Width",max:15,min:0}}]});var f=Object.freeze({cssBoxShadow:{angle:{getLinkableValue:p,linkedValueToData:q},distance:{getLinkableValue:n,linkedValueToData:o},size:{getLinkableValue:l,linkedValueToData:m},blur:{getLinkableValue:j,linkedValueToData:k},color:{getLinkableValue:h,linkedValueToData:i}},cssBorderRadius:{radius:{getLinkableValue:r,linkedValueToData:s}},cssBorder:{color:{getLinkableValue:t,linkedValueToData:u},width:{getLinkableValue:v,linkedValueToData:w}}});function g(b,c,d){var e=f[c][d];return a.reduce(e,function(a,e,f){a[f]=e(b,[c,d]);return a},{})}function h(b,c){var d=a.get(b.cssStyle,c[0])[0][c[1]];return function a(){return{color:F(d),alpha:d.alpha.toFixed(4)}}}function i(b,c){return function d(e){var f=a.cloneDeep(b);var g=a.clone(c);g.splice(1,0,"0");var h=a.bind(I,{},f.themeMappings);J(h,f.cssStyle,e,g);return f}}function j(b,c){var d=a.get(b.cssStyle,c[0])[0];return function a(){return d.blurRadius.value}}function k(b){return function c(d){var e=a.cloneDeep(b);e.cssStyle.cssBoxShadow[0].blurRadius=K(d);return e}}function l(b,c){var d=a.get(b.cssStyle,c[0])[0];return function a(){return d.spreadRadius.value}}function m(b){return function c(d){var e=a.cloneDeep(b);e.cssStyle.cssBoxShadow[0].spreadRadius=K(d);return e}}function n(b,c){var d=a.get(b.cssStyle,c[0])[0];return function a(){return B(d.offsetX.value,d.offsetY.value)}}function o(b){return function c(d){var e=b.cssStyle.cssBoxShadow[0];var f=a.cloneDeep(b);var g=C(b);var h=D(e.offsetX.value,e.offsetY.value,g);a.assign(f.cssStyle.cssBoxShadow[0],E(h,d));a.assign(f.panelExtensions.cssBoxShadow[0],{angle:h});return f}}function p(b,c){var d=a.get(b.cssStyle,c[0])[0];return function a(){var c=C(b);return D(d.offsetX.value,d.offsetY.value,c)}}function q(b){return function c(d){var e=b.cssStyle.cssBoxShadow[0];var f=B(e.offsetX.value,e.offsetY.value);var g=a.cloneDeep(b);a.assign(g.cssStyle.cssBoxShadow[0],E(d,f));a.assign(g.panelExtensions.cssBoxShadow[0],{angle:d});return g}}function r(b,c){var e=a.get(b.cssStyle,c[0]);return function b(){return a.reduce(d,function(a,b,c){return a+e[b].value+(c!==d.length-1?" ":"")},"")}}function s(b,c){return function e(f){var g=a.cloneDeep(b);var h=f.split(" ");if(h.length===1){var i=h[0];h=[i,i,i,i]}var j=g.cssStyle[c[0]]={};a.forEach(d,function(a,b){j[a]=K(parseInt(h[b],10))});return g}}function t(b,c){var d=a.get(b.cssStyle,c);return function a(){return{color:F(d.top),alpha:d.top.alpha.toFixed(4)}}}function u(b,d){return function e(f){var g=a.cloneDeep(b);var h=a.bind(I,{},g.themeMappings);a.forEach(c,function(a){J(h,g.cssStyle,f,d.concat(a))});return g}}function v(b,c){var d=a.get(b.cssStyle,c);return function a(){return d.top.value}}function w(b,d){return function e(f){var g=a.cloneDeep(b);a.forEach(c,function(b){a.set(g.cssStyle,d.concat(b),K(f))});return g}}function x(a){b=a}function y(a){return Math.round(100*a)/100}function z(a){return a*Math.PI/180}function A(a){return a*180/Math.PI}function B(a,b){if(a===0||b===0){return a+b}var c=Math.atan2(a,b);return y(a/Math.sin(c))}function C(a){return a.panelExtensions.cssBoxShadow[0].angle}function D(a,b,c){if(a===0&&b===0){return c}return(270+A(Math.atan2(b,a)))%360}function E(a,b){var c=z(360-a);return{offsetX:K(y(Math.sin(c)*b)),offsetY:K(y(Math.cos(c)*b))}}function F(a){return"#"+G(a.red)+G(a.green)+G(a.blue)}function G(a){var b=a.toString(16).toUpperCase();if(b.length<2){b="0"+b}return b}function H(a){return{red:parseInt(a.substr(1,2),16),green:parseInt(a.substr(3,2),16),blue:parseInt(a.substr(5,2),16)}}function I(a,c,d){var e=/color_/;if(e.test(c)){var f=b.colors.get(c);a[d.join(".")]=c;return f}delete a[d.join(".")];return c}function J(b,c,d,e){var f=d.alpha;var g=b(d.color,e);var h=H(g);h.alpha=parseFloat(f);a.set(c,e,h)}function K(a){return{unit:"px",value:a}}return{setThemeAPI:x,categoryControlsMap:e,getDataManipulators:g}});define("customizeDesignDataPanel/lib/consts",[],function(){"use strict";return{editableTypes:["cssBoxShadow","cssBorderRadius","cssBorder","themeMappings"],togglableCategories:["cssBoxShadow"],categoryToggleLabels:{cssBoxShadow:"CustomDesign_Shadow_EnableToggle"},categoryDefaults:Object.freeze({cssBoxShadow:[{inset:false,offsetX:{unit:"px",value:0},offsetY:{unit:"px",value:1},blurRadius:{unit:"px",value:4},spreadRadius:{unit:"px",value:0},color:{red:0,green:0,blue:0,alpha:1}}],cssBorderRadius:{topLeft:{unit:"px",value:0},topRight:{unit:"px",value:0},bottomRight:{unit:"px",value:0},bottomLeft:{unit:"px",value:0}},cssBorder:{width:{top:{unit:"px",value:0},right:{unit:"px",value:0},bottom:{unit:"px",value:0},left:{unit:"px",value:0}},style:{top:"solid",left:"solid",right:"solid",bottom:"solid"},color:{top:{red:0,green:0,blue:0,alpha:1},right:{red:0,green:0,blue:0,alpha:1},bottom:{red:0,green:0,blue:0,alpha:1},left:{red:0,green:0,blue:0,alpha:1}}}}),designDataExtensionDefualts:Object.freeze({cssBoxShadow:[{angle:0}]}),HEIGHT_SMALL:"380px",HEIGHT_BIG:"453px",MIN_VIEW_PORT_HEIGHT:500}});define("customizeDesignDataPanel/ui/designDataPanelComponent",["reactDOM","lodash","jquery","react","customizeDesignDataPanel/ui/designDataPanelComponent.rt","core","panelUtils","customizeDesignDataPanel/lib/controls","customizeDesignDataPanel/lib/consts","util"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=[{value:"cssBorder",symbolName:"borderDesign",text:j.translate("CustomDesign_TabLabel_Borders")},{value:"cssBorderRadius",symbolName:"cornersDesign",text:j.translate("CustomDesign_TabLabel_Corners")},{value:"cssBoxShadow",symbolName:"shadowDesign",text:j.translate("CustomDesign_TabLabel_Shadow")}];var l=i.designDataExtensionDefualts;return d.createClass({displayName:"customize-design-data-panel",mixins:[f.mixins.editorAPIMixin,g.linkColorPickerMixin],getInitialState:function(){h.setThemeAPI(this.getEditorAPI().theme);var a=this.getEditableData();return{editableDesignData:a,selectedCategory:null,controlsClosed:true}},componentWillMount:function(){var a=this.getEditorAPI().theme.events.onChange.addListener(function(){this.updateEditableDataState()}.bind(this));this.setState({themeChangeListenerId:a});this.initCategoriesTogglableState()},componentWillReceiveProps:function(){this.updateDesignOnModeChange()},updateDesignOnModeChange:function(){var a=this.props.selectedComponent[0];var c=this.getEditorAPI().components.modes.getComponentActiveModeIds(a);if(!b.isEqual(this.state.compModes,c)){this.setState({compModes:c});this.initCategoriesTogglableState();this.updateEditableDataState()}},updateEditableDataState:function(){this.setState({editableDesignData:this.getEditableData()})},initCategoriesTogglableState:function(){var a=this.getDesignData();var c={disabledCategoriesData:{cssStyle:{},panelExtensions:l},categoryEnableStates:{}};b.forEach(i.togglableCategories,function(d){var e=!b.isNil(a.cssStyle[d]);c.categoryEnableStates[d]=e;if(!e){c.disabledCategoriesData.cssStyle[d]=b.cloneDeep(i.categoryDefaults[d])}});this.setState(c)},componentWillUnmount:function(){this.getEditorAPI().theme.events.onChange.removeListener(this.state.themeChangeListenerId)},getEditableData:function(){var a=this.getDesignData();var b={};b.cssStyle=this.getComponentCssStyle();b.themeMappings=a.themeMappings;b.panelExtensions=this.getDesignDataExtensions();return b},getComponentCssStyle:function(){var a=this.getDesignData();var c={};var d=this.isCategoryTogglable;b.forEach(i.editableTypes,function(b){var e=a.cssStyle[b];if(d(b)||e){c[b]=e}else{c[b]=i.categoryDefaults[b]}});return c},getDesignDataExtensions:function(){if(this.state&&this.state.designDataExtensions){return this.state.designDataExtensions}return l},getDataManipulators:function(a){var b=this.state.selectedCategory;var c;if(this.isCategoryDisabled()){c=this.state.disabledCategoriesData}else{c=this.state.editableDesignData}return h.getDataManipulators(c,b,a)},updateComponentDesignData:function(a){this.getEditorAPI().components.design.update(this.props.selectedComponent,a)},updateDesignDataExtension:function(a){this.setState({designDataExtensions:a})},getValueLink:function(a){var b=this.getDataManipulators(a);return{value:b.getLinkableValue(),requestChange:function(a){var c=b.linkedValueToData(a);this.setState({editableDesignData:c});this.updateComponentDesignData(c);this.updateDesignDataExtension(c.panelExtensions)}.bind(this)}},getRequiredProps:function(a){var c=b.clone(a.props);if(a.controlType==="colorPickerInputWithOpacity"){b.assign(c,{openColorPicker:this.openColorPicker,colorResolver:this.resolveColor,isSmallStepper:true})}return c},linkSelectedCategory:function(){return{value:this.state.selectedCategory,requestChange:function(a){if(this.state.selectedCategory!==a){this.setState({selectedCategory:a,controlsClosed:false})}}.bind(this)}},getCategoriesRadioValues:function(){var a=b.keys(this.state.editableDesignData.cssStyle);return b.reduce(k,function(c,d){if(b.includes(a,d.value)){c.push(d)}return c},[])},getHeight:function(){var a=f.utils.stageUtils.getViewPort().height;if(a<i.MIN_VIEW_PORT_HEIGHT){return i.HEIGHT_SMALL}return i.HEIGHT_BIG},getDesignData:function(){return this.getEditorAPI().components.design.get(this.props.selectedComponent)},categoryChanged:function(){this.scrollContainerToTop()},scrollContainerToTop:function(){var b=a.findDOMNode(this);c(b).find(".inner-container").scrollTop(0)},getCategoryClassName:function(){return"category-"+this.state.selectedCategory},getSelectedCategoryTranslatedText:function(){var a=this.state.selectedCategory;return a?b.find(k,{value:a}).text:""},getSelectedCategoryControls:function(){return h.categoryControlsMap[this.state.selectedCategory]},isLastControlInCategory:function(a){return a===this.getSelectedCategoryControls().length-1},isCategoryDisabled:function(){return this.isCategoryTogglable()&&!this.isCategoryEnabled()},isCategoryTogglable:function(a){a=a||this.state.selectedCategory;return b.includes(i.togglableCategories,a)},getCategoryToggleLable:function(){return i.categoryToggleLabels[this.state.selectedCategory]},isCategoryEnabled:function(){return this.state.categoryEnableStates[this.state.selectedCategory]},toggleCategory:function(){var a={};var c=this.state.selectedCategory;var d=!this.isCategoryEnabled();var e=b.cloneDeep(this.state.editableDesignData);a.categoryEnableStates=b.cloneDeep(this.state.categoryEnableStates);if(d){var f=this.state.disabledCategoriesData.cssStyle[c];e.cssStyle[c]=f}else{a.disabledCategoriesData=b.cloneDeep(this.state.disabledCategoriesData);a.disabledCategoriesData.cssStyle[c]=e.cssStyle[c];e.cssStyle[c]=null}a.editableDesignData=e;this.updateComponentDesignData(e);a.categoryEnableStates[this.state.selectedCategory]=d;this.setState(a)},render:e,onLoaded:b.noop})});define("customizeDesignDataPanel/ui/designDataPanelStandalone.rt",["react","lodash","compPanels","customizeDesignDataPanel/ui/designDataPanelComponent"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement(c.compPanelFrame,e({className:"design-data-panel-frame",id:"customizeDesignPanel",title:"title",helpId:true},this.getPanelFrameProps()),a.createElement(d,this.props))}});define("customizeDesignDataPanel/ui/designDataPanelStandalone",["core","react","lodash","designPanelUtils","compPanels","helpIds","customizeDesignDataPanel/ui/designDataPanelStandalone.rt"],function(a,b,c,d,e,f,g){"use strict";return b.createClass({displayName:"designDataPanelStandalone",render:g,mixins:[a.mixins.editorAPIMixin,e.compPanelFrameMixin,d.mixins.panelPositionMixin],getPanelFrameProps:function(){return c.merge(this.getFrameProps(),{title:"hover_box_design_header_label",helpId:f.UTILS.getCustomizeDesignHelpId(this.props.compType)})}})});define("customizeDesignDataPanel",["customizeDesignDataPanel/ui/designDataPanelComponent","customizeDesignDataPanel/ui/designDataPanelStandalone"],function(a,b){"use strict";return{panel:a,standalone:b}});