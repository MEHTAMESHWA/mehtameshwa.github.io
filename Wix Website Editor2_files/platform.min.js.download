define("platform/common/constants",[],function(){"use strict";return{EDITOR_API_NS:"editorAPI",PLATFORM_PANEL:"PLATFORM_PANEL",PLATFORM_ON_EVENT:"PLATFORM_ON_EVENT",PLATFORM_SDK_ALIVE:"PLATFORM_SDK_ALIVE",PLATFORM_SDK_READY:"PLATFORM_SDK_READY",CONTROLLER_COMPONENT_TYPE:"platform.components.AppController",TPA_WIDGET_TYPE_TEMPLATE:{qname:{prefix:"$w",shortName:"IFrame"},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",tagName:"",members:null,events:null,baseTypes:{},inheritanceChain:null},ACTION_CONNECT:"connect",connectableComponents:{WRICHTEXT:"WRichText",IMAGE:"Image",MATRIXGALLERY:"MatrixGallery",PAGINATEDGRIDGALLERY:"PaginatedGridGallery",SLIDERGALLERY:"SliderGallery",SLIDESHOWGALLERY:"SlideShowGallery",SITEBUTTON:"SiteButton",TEXTINPUT:"TextInput",TEXTAREAINPUT:"TextAreaInput",CHECKBOX:"Checkbox",RADIOBUTTON:"RadioButton",RADIOGROUP:"RadioGroup",OPTIONSLISTINPUT:"OptionsListInput",WPHOTO:"WPhoto",IMAGEBUTTON:"ImageButton",COMBOBOXINPUT:"ComboBoxInput",GRID:"Grid",DATE_PICKER:"DatePicker"},EVENTS:{controllerSettingsButtonClicked:"controllerSettingsButtonClicked",componentConnectButtonClicked:"componentConnectButtonClicked"},panelTypes:{COMPONENT_PANEL:"componentPanel",FULL_STAGE:"fullStagePanel",MODAL:"modalPanel",TOOL:"toolPanel",TOOL_BAR:"toolBarPanel"},pages:{page_settings:{layout:"Pages_Layouts_Tab_Title",permissions:"Pages_Permissions_Tab_Title"},page_actions:{rename:{title:"Pages_Actions_Page_Rename",icon:"quickActionsRename"}}},controller:{DEFAULT_STATE:"default"}}});define("platform/bi/events.json",[],function(){return{CONTROLLER_GFPP_CLICK:{evid:26,src:79,endpoint:"platform",fields:{app_name:"string",action_name:"string",controller_type:"string",component_id:"string",pageId:"string"}}}});define("platform/appController/controllerSettingsGfpp",["lodash","platform/common/constants","platform/bi/events.json"],function(a,b,c){"use strict";var d={mainActions:[{label:"Manage Dataset",shouldTranslate:false,onClick:f.bind(null,"Manage Dataset")}],presetActions:{help:{helpId:"d0d3839d-af7b-4257-be6f-a44c455149cf"}}};function e(a,b){d.enabledActions=[b.HELP];a("AppController",d)}function f(d,e,f){var g=a.head(f);var h=e.components.data.get(g);var i=b.EVENTS.controllerSettingsButtonClicked;var j=e.platform.controllers.settings.get(g);var k=e.platform.controllers.getName(g);var l={controllerRef:g,controllerConfig:j,controllerType:h.controllerType,controllerDisplayName:k};e.bi.event(c.CONTROLLER_GFPP_CLICK,{action_name:d,app_name:h.applicationId,controller_type:h.controllerType,component_id:g.id,pageId:e.pages.getCurrentPageId()});var m=e.platform.getAppDataByAppDefId(h.applicationId);e.platform.notifyApplication(m.applicationId,{eventType:i,eventPayload:l})}return{init:e}});define("platform/appController/appController",["lodash","platform/appController/controllerSettingsGfpp","editorEventRegistry"],function(a,b,c){"use strict";function d(b,c){return a(c).reduce(function(a,c){return b.components.is.container(c)?a.concat(c,b.components.get.byAncestor(c)):a.concat(c)},[]).some(function(a){return b.components.getType(a)==="platform.components.AppController"})}function e(b,c){var d=a.reduce(c,function(a,c){return b.components.is.container(c)?a.concat(c,b.components.get.byAncestor(c)):a.concat(c)},[]);var e;function f(c){e=e||a.keyBy(d,"id");return a(c).map("controllerRef").some(function(a){var c=a.id;return!e[c]&&b.components.getPage(a).id!==b.pages.getMasterPageId()})}return a.some(d,function(c){var d=b.platform.controllers.connections.get(c);return!a.isEmpty(d)&&f(d)})}function f(b,c,f){c=a.isArray(c)?c:[c];var g=b.components.isShowOnAllPages(c);var h=b.components.isShowOnAllPages(f);function i(c){b.panelManager.openPanel("platform.panels.warnForDisconnectedComponentsPanel",a.assign({undo:b.history.undo},c))}if(g&&!h&&d(b,c)){i({controllerComp:true})}if(!g&&h&&e(b,c)){i({connectedComps:true})}}c.register(c.constants.events.SET_CONTAINER,f);function g(a,c){b.init(a,c);return this}return{init:g}});define("platform/common/utils",["lodash","util"],function(a,b){"use strict";function c(a){return"platformPanels."+a}function d(c,d,e,f){var g=a.chain(window.location.search.substr(1)).thru(b.url.parseUrlParams).get("editorPlatformAppSources","").split(",").invokeMap("split",":").fromPairs().value();if(a.startsWith(d,"http")){return b.url.setUrlParam(d,"applicationId",f)}var h=i(g[e]);function i(d){var g=a.get(c.platform.getAppDataByAppDefId(e),"editorArtifact");if(g){var h=d?b.url.joinURL(b.serviceTopology.scriptsDomainUrl,"services",g,d):b.serviceTopology.scriptsLocationMap[g];return b.url.setUrlParam(h+"/","applicationId",f)}}var j=new URL(d,h).href;return b.url.setUrlParam(j,"applicationId",f)}return{getPanelName:c,getFullApplicationUrl:d}});define("platform/connection/connectableComponents",["lodash","platform/common/constants"],function(a,b){"use strict";var c={enabledActions:[b.ACTION_CONNECT]};var d=a.values(b.connectableComponents);function e(a){d.forEach(function(b){a(b,c)})}return{registerGfpp:e}});define("platform/connection/connection",["lodash","platform/common/constants","platform/common/utils","platform/connection/connectableComponents"],function(a,b,c,d){"use strict";function e(b,c){var d=b.platform.controllers.connections.get(a.head(c));var e=false;a.forEach(d,function(a){if(a.type==="ConnectionItem"){e=true}});return e}var f={connect:{isSelected:function(d){var e=c.getPanelName(b.panelTypes.COMPONENT_PANEL);return a.some(d.panelManager.getOpenPanels(),{name:e})},isApplied:e,tooltip:"gfpp_component_connect",tooltip_active:"gfpp_component_connected_to_controllers",icon:"connect",rightClickMenuLabel:"PLATFORM_RightClick_Menu_Connect",className:function(a,b){return e(a,b)?"connected":""},onClick:h}};function g(a,b){a(f);d.registerGfpp(b);return this}function h(c,d){var e=c.platform.getInstalledAppsData();var f=e.length===1?a.head(e):"multiple application ids provided - TODO";var g=a.head(d);var h=b.EVENTS.componentConnectButtonClicked;var i={componentRef:g,componentType:c.components.getType(g)};c.platform.notifyApplication(f.applicationId,{eventType:h,eventPayload:i})}return{init:g,notifyConnectButtonClicked:h}});define("platform/api/controllers/controllers",["lodash","bluebird"],function(a,b){"use strict";var c="platform.components.AppController";function d(a,b){var d=b?b.id:null;return a.documentServices.components.getAllComponents(d,function(b){return a.components.getType(b)===c})}function e(){}function f(b,c,e,f){var g=a.get(f,"pageRef")||b.pages.getFocusedPage();var h=d(b,g);return a.map(h,function(a){return{controllerRef:a}})}function g(b){var c=d(b);return a.map(c,function(a){return{controllerRef:a}})}function h(b,c,e,f){var g=b.components.getPage(f.componentRef);var h=d(b,g);return a.map(h,function(a){return{controllerRef:a}})}function i(b,c,d,e){var f=b.platform.controllers.connections.get(e.componentRef);return a.reject(f,{type:"WixCodeConnectionItem"})}function j(a,b,c,d){a.platform.controllers.connections.connect(d.connectToRef,d.controllerRef,d.role,d.connectionConfig)}function k(a,b,c,d){a.platform.controllers.connections.disconnect(d.connectToRef,d.controllerRef,d.role)}function l(b,c,d,e){var f=b.platform.controllers.settings.get(e.controllerRef);var g=a.get(b.components.data.get(e.controllerRef),"controllerType");var h=b.platform.controllers.getName(e.controllerRef);return{type:g,config:f,displayName:h}}function m(a,c,d,e){a.platform.controllers.settings.set(e.controllerRef,e.config);return new b(a.waitForChangesApplied)}function n(a,c,d,e){a.platform.controllers.setName(e.controllerRef,e.name);return new b(a.waitForChangesApplied)}function o(a,c,d,e){a.platform.controllers.setState(e.state);return new b(a.waitForChangesApplied)}return{getAllCollections:e,listControllers:f,listAllControllers:g,listConnectableControllers:h,listConnections:i,connect:j,disconnect:k,getData:l,saveConfiguration:m,setDisplayName:n,setState:o}});define("platform/services/tokenService",["lodash"],function(a){"use strict";function b(b){return a.uniqueId("platform_"+b+"_")}function c(b){return a.uniqueId("platform_"+b)}return{generatePanelToken:b,generateStaticGlobalPanelToken:c}});define("platform/api/editor/utils/utils",["util"],function(a){"use strict";function b(b,c,d,e){return a.link.getLinkValueAsString(b,e.link)}return{getLinkAsString:b}});define("platform/api/editor/editor",["lodash","bluebird","pmrpc","constants","platform/common/constants","platform/common/utils","platform/services/tokenService","platform/api/editor/utils/utils"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c,g){var h=p(a,b,g);a.selection.selectComponentByCompRef(g.componentRef);a.panelManager.openPlatformPanel({panelName:f.getPanelName(e.panelTypes.COMPONENT_PANEL),panelProps:h,panelMetaData:{frameType:d.PANEL_TYPES.COMP,closeAllOtherPanels:true}})}function j(a,b,c,d){var g=p(a,b,d);a.panelManager.openPlatformPanel({panelName:f.getPanelName(e.panelTypes.MODAL),panelProps:g})}function k(b,c,d,e){var f=b.pages.getPagesData(),g=e.pageRef.id,h=b.pages.dynamicPages.getMenuItems(),i=a.flatMap(h,"items"),j=b.mainMenu.getMenuItemsFlattened(f);var k=a.find(j,["pageData.id",g])||a.find(i,{id:g});var l=b.pages.dynamicPages.getDynamicPageOptions(g,"pageSettings")||[];var m={menuItemToShowSettingsFor:k,selectedSettingsTab:!a.isEmpty(l)?l[0].title:null};b.navigateAndOpenPagesPanel(g,m)}function l(a,c,d,g){var h=p(a,c,g);var i=f.getPanelName(e.panelTypes.TOOL);return new b(function(b){a.panelManager.openPlatformPanel({panelName:i,panelProps:h,panelMetaData:{resolve:b}})})}function m(c,d,e,f){return new b(function(b){var d={link:a.get(f,"value",null),callback:b,onCancelCallback:b};c.openLinkPanel(d)})}function n(c,d,e,f){f=a.defaults(f||{},{callOnCancel:true,isMultiSelect:true,mediaType:"IMAGE"});return new b(function(b){var d=function(c){var d;if(!a.isEmpty(c)){if(!a.isArray(c)){c=[c]}d=c.map(function(a){return{uri:a.uri,title:a.title,width:a.width,height:a.height}})}else if(f.callOnCancel){d=null}b(d)};c.mediaServices.mediaManager.open(f.mediaType,{multiSelect:f.isMultiSelect,callback:d})})}function o(a,b,c,d){var e={origin:"platform"};var f={component:a.selection.getSelectedComponentType(),learn_more:false};a.panelManager.openHelpCenter(d.helpId,e,f)}function p(b,c,d){var e=b.platform.getAppDataByApplicationId(c.applicationId);var h=a.assign({token:g.generatePanelToken(e.appDefinitionId)},d);if(d.url){a.assign(h,{url:f.getFullApplicationUrl(b,d.url,e.appDefinitionId,e.applicationId)})}return h}function q(a,b,c,g){var h=p(a,b,g);a.panelManager.openPlatformPanel({panelName:f.getPanelName(e.panelTypes.FULL_STAGE),panelProps:h,panelMetaData:{frameType:d.PANEL_TYPES.FULL_STAGE,closeAllOtherPanels:true}})}function r(b,c){var d=a.find(b.panelManager.getOpenPanels(),{token:c});return d}function s(a,b,c,d){var e=r(a,c);if(!e){return}var f=p(a,b,d);f.token=c;a.panelManager.updatePanelProps(e.name,f)}function t(a,b,c,d){a.panelManager.closePlatformPanel(c,d)}function u(a,b){c.api2.request(b.applicationId,{target:a.platform.getAppsContainer()}).then(function(a){c.api2.set(b.applicationId,a)})}return{openComponentPanel:i,openModalPanel:j,openToolPanel:l,openPagePanel:k,openFullStagePanel:q,openLinkPanel:m,openMediaPanel:n,openHelpPanel:o,updatePanelOptions:s,closePanel:t,setAppAPI:u,utils:h}});define("platform/api/preview/preview",["bluebird"],function(a){"use strict";function b(b,c,d,e){return new a(function(a){b.platform.pages.navigateTo(e.pageUrl,function(){if(!b.preview.isInPreviewMode()){b.preview.togglePreview(a)}else{a()}})})}return{navigateTo:b}});define("platform/api/vfs/vfs",["lodash","bluebird"],function(a,b){"use strict";function c(a,b,c,d){var e=a.wixCode.fileSystem;var f=e.getVirtualDescriptor(d.path,false);return e.readFile(f)}function d(b,c,d,f){var g=b.wixCode.fileSystem;var h=g.getVirtualDescriptor(f.path,true);return g.getChildren(h).then(function(b){return a.map(b,e)})}function e(a){return{name:a.name,fullPath:a.location,isDirectory:a.directory}}function f(b,c){var d=c.lastIndexOf("/");var e=c.substring(0,d);var f=c.substring(d+1);var g=b.getVirtualDescriptor(e,true);return b.getChildren(g).then(function(c){if(!a.some(c,{name:f})){return b.createFile(f,g)}})}function g(a,b,c,d){var e=a.wixCode.fileSystem;return f(e,d.path).then(function(){return e.updateFileContent(d.path,d.content)}).then(e.flush)}function h(a){return a&&a.path&&a.extension}function i(b,c,d){var f=b.getVirtualDescriptor(c,true);return b.findByExtension(f,d).then(function(b){return a.map(b,e)})}function j(a,c,d,e){if(h(e)){return i(a.wixCode.fileSystem,e.path,e.extension)}return b.reject(new Error("Unsupported find options provided."))}return{listChildren:d,readFile:c,writeFile:g,find:j}});define("platform/api/pages/pages",["lodash","util","bluebird"],function(a,b,c){"use strict";function d(b,d,e,f){var g=a.get(f.pageRef,"id");if(g){return new c(function(a){b.pages.navigateTo(g,function(){a()})})}}function e(a){return a.pages.getReference(a.pages.getFocusedPageId())}function f(a,c,d,e){var f=e.pageRef.id;var g=b.validate.pageNameValidator(e.title);if(!g){a.pages.data.update(f,{title:e.title})}return g}return{navigateTo:d,getCurrent:e,rename:f}});define("platform/api/components/components",["bluebird","lodash"],function(a,b){"use strict";function c(c,d,e,f){return new a(function(a,d){if(b.isEmpty(f.componentDefinition.componentType)){d(new Error("componentDefinition must contain componentType"))}var e=c.components.buildDefaultComponentStructure(f.componentDefinition.componentType);b.merge(e,f.componentDefinition);var g=c.components.add(f.pageRef,e);c.waitForChangesApplied(function(){if(c.components.is.exist(g)){a(g)}else{d(new Error("Could not add component"))}})})}function d(a,b,c,d){return a.documentServices.components.remove(d.componentRef)}function e(a,b,c,d){return a.components.properties.get(d.componentRef)}function f(a,b,c,d){a.components.properties.update(d.componentRef,d.props)}function g(a,b,c,d){return a.components.getPage(d.componentRef)}return{add:c,remove:d,getPage:g,properties:{get:e,update:f}}});define("platform/api/routers/routers",["lodash","util","bluebird"],function(a,b,c){"use strict";function d(b,d,e,f){return new c(function(c,e){var g={appDefinitionId:a.get(b.platform.getAppDataByApplicationId(d.applicationId),"appDefinitionId"),prefix:a.get(f,"prefix"),config:a.get(f,"config")};var h=b.routers.add(g);b.waitForChangesApplied(function(){if(b.routers.get.byRef(h)){c(h)}else{e(new Error("Could not add router"))}})})}function e(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.routerRef);if(!g||g.appDefinitionId!==f){return}return b.routers.remove(e.routerRef)}function f(b,c,d,e){var f=b.routers.get.byRef(e.routerRef);var g=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");if(!f||g!==f.appDefinitionId){return}return{prefix:f.prefix,config:f.config,pages:a(f.pages).invertBy().map(function(a,c){return{pageRef:b.pages.getReference(c),pageRoles:a}}).value()}}function g(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.routerRef);if(!g||g.appDefinitionId!==f){return}b.routers.update(e.routerRef,e)}function h(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.routerRef);if(!g||g.appDefinitionId!==f){return}return b.routers.pages.add(e.routerRef,e.pageTitle,e.pageRoles)}function i(b,d,e,f){return new c(function(c,e){var g=a.get(b.platform.getAppDataByApplicationId(d.applicationId),"appDefinitionId");var h=b.routers.get.byRef(f.routerRef);if(!h||h.appDefinitionId!==g){e();return}b.pages.remove(f.pageRef.id,function(){c()},function(){e()},false)})}function j(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.routerRef);if(!g||g.appDefinitionId!==f){return}return b.routers.pages.connect(e.routerRef,e.pageRef,e.pageRoles)}function k(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.routerRef);if(!g||g.appDefinitionId!==f){return}return b.routers.pages.disconnect(e.routerRef,e.pageRef)}function l(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.get.byRef(e.fromRouterRef);var h=b.routers.get.byRef(e.toRouterRef);if(!g||!h||h.appDefinitionId!==f||g.appDefinitionId!==f){return}return b.routers.pages.move(e.pageRef,e.fromRouterRef,e.toRouterRef)}function m(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.getRouterRef.byPage(e.pageRef);if(!g){return g}var h=b.routers.get.byRef(g);if(!h||h.appDefinitionId!==f){return}return g}function n(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");var g=b.routers.getRouterRef.byPrefix(e.prefix);if(!g){return g}var h=b.routers.get.byRef(g);if(!h||h.appDefinitionId!==f){return}return g}function o(c,d,e,f){var g=a.get(d,"applicationId");var h=c.routers.isValidPrefix(g,f.prefix);if(!h.valid){var i="";switch(h.message){case 1:i="DYNAMIC_PAGES_VALIDATION_PREFIX_CAN_NOT_BE_EMPTY";break;case 2:i="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_TOO_LONG";break;case 3:i="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_DUPLICATE_OF_URISEO";break;case 4:i="DYNAMIC_PAGES_VALIDATION_PREFIX_CONTAINS_INVALID_CHARCTERS";break;case 5:i="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_FORBIDDEN_WORD";break;case 6:i="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION";break}h.message=b.translate(i)}return h}function p(a){return a.routers.pages.listConnectablePages()}return{add:d,remove:e,get:f,update:g,getByPage:m,getByPrefix:n,isValidPrefix:o,pages:{add:h,delete:i,connect:j,disconnect:k,move:l,listConnectablePages:p}}});define("platform/api/history/history",["bluebird"],function(a){"use strict";function b(b,c,d,e){return new a(function(a){b.waitForChangesApplied(function(){b.history.add(e.label);a()})})}return{add:b}});define("platform/api/ide/ide",[],function(){"use strict";function a(a,b,c,d){var e=a.wixCode.fileTree;e.navigateToBackEndFile(a,d.path,d.functionName,d.caretOffset)}return{openFile:a}});define("platform/api/info/info",["lodash","bluebird","util"],function(a,b,c){"use strict";function d(c,d){return new b(function(b,e){var f=j(c);var i=a.get(c.platform.getAppDataByApplicationId(d.applicationId),"appDefinitionId");if(f){if(i===c.platform.editorApps.DATA_BINDING.appDefId){b(h(c,i))}else{b(g(c,i))}return}if(i===c.platform.editorApps.DATA_BINDING.appDefId){c.saveManager.saveInBackground(c,b(h(c,i)),e)}else{c.saveManager.saveInBackground(c,b(g(c,i)),e)}})}function e(a){return a.generalInfo.getMetaSiteId()}function f(){return c.editorSessionUtil.editorSessionId}function g(a,b){var c=i();return["//",c,"/my-account/sites/",a.generalInfo.getMetaSiteId(),"/app/",b,"?referralInfo=editor"].join("")}function h(a){var b=i();return["//",b,"/my-account/sites/",a.generalInfo.getMetaSiteId(),"/simple-app","?app=wixcode","&referralInfo=editor_platform"].join("")}function i(){var a=window.location.hostname.match(/editor\.(.*)/);return a?"www."+a[1]:"www.wix.com"}function j(a){return!a.generalInfo.isFirstSave()}return{getDashboardUrl:d,getMetaSiteId:e,getEditorSessionId:f}});define("platform/api/environment/environment",["util"],function(a){"use strict";function b(){return a.editorModel.languageCode}return{getLocale:b}});define("platform/api/userPreferences/userPreferences",["lodash"],function(a){"use strict";function b(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");if(!f){throw new Error("Illegal appData - application is not registered in clientSpecMap")}a.forEach(e,function(a,c){b.userPreferences.site.set(c,a,null,null,f)})}function c(b,c,d,e){var f=a.get(b.platform.getAppDataByApplicationId(c.applicationId),"appDefinitionId");if(!f){throw new Error("Illegal appData - application is not registered in clientSpecMap")}var g=a.isArray(e)?a(e).keyBy().mapValues(a.noop).value():e;var h=a.mapValues(g,function(a,c){return b.userPreferences.site.get(c,f)});return a.defaults(h,g)}return{site:{set:b,get:c}}});define("platform/api/internalAPIs",["lodash"],function(a){"use strict";function b(b,c,d){b.wixCode.provision(a.noop,a.noop);b.platform.initApp({appDefinitionId:a.get(d,"appDefinitionId"),editorUrl:a.get(d,"editorUrl"),viewerUrl:a.get(d,"viewerUrl")})}return{addApp:b}});define("platform/api/api",["lodash","platform/api/controllers/controllers","platform/api/editor/editor","platform/api/preview/preview","platform/api/vfs/vfs","platform/api/pages/pages","platform/api/components/components","platform/api/routers/routers","platform/api/history/history","platform/api/ide/ide","platform/api/info/info","platform/api/environment/environment","platform/api/userPreferences/userPreferences","platform/api/internalAPIs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";return{editor:c,preview:d,controllers:b,vfs:e,components:g,routers:h,history:i,ide:j,pages:f,info:k,environment:l,userPreferences:m,__internal__:n}});define("platform/services/platformPostMessageService",["lodash","pmrpc","platform/common/constants"],function(a,b,c){"use strict";var d;function e(a,e){return function(f){if(f.data.intent===c.PLATFORM_PANEL&&f.data.sourcePanel===e){switch(f.data.type){case c.PLATFORM_SDK_ALIVE:b.api.set(c.EDITOR_API_NS,d);b.api.sendToWindow(c.EDITOR_API_NS,f.source);break;case c.PLATFORM_SDK_READY:g(f.source,{intent:c.PLATFORM_ON_EVENT,event:{eventType:"startConfiguration",eventPayload:a}});break;default:return}}}}var f=function(a,e){d=e;b.api2.set(c.EDITOR_API_NS,e,{onApiCall:a.platform.reportAPICallBI})};var g=function(b,c,d){if(a.isUndefined(b)){return}if(!b.postMessage){b=b.contentWindow}b.postMessage(c,d||"*")};return{init:f,createPostMessageListener:e}});define("platform/panels/appControllerDeleteConfirmationPanel.rt",["react","lodash","panels","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.confirmationPanelFrame,{type:"important",panelName:"platform.panels.appControllerDeleteConfirmationPanel",onConfirm:this.props.onConfirm,confirmLabel:"PLATFORM_messages_delete",cancelLabel:"PLATFORM_messages_cancel_delete",panelTitle:this.getTitle()},a.createElement("div",{className:"icon"},a.createElement(d.symbol,{name:"deleteBlogConfirmationIcon"})),a.createElement("div",{className:"content"},a.createElement("p",{},this.getContentText())))}});define("platform/panels/appControllerDeleteConfirmationPanel",["react","core","util","platform/panels/appControllerDeleteConfirmationPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"appControllerDeleteConfirmationPanel",mixins:[c.translationMixin,b.mixins.editorAPIMixin],propTypes:{controllerDisplayName:a.PropTypes.string,isSingleController:a.PropTypes.bool,onConfirm:a.PropTypes.func},getContentText:function(){var a=this.props.isSingleController?"PLATFORM_messages_delete_dataset_text":"PLATFORM_messages_multidelete_dataset_text";return this.translateTemplate(a,{appName:"Wix Database"},this.getEditorAPI())},getTitle:function(){var a=this.props.isSingleController?"PLATFORM_messages_delete_dataset_title":"PLATFORM_messages_multidelete_dataset_title";return this.translateTemplate(a,{appControllerName:this.props.controllerDisplayName},this.getEditorAPI())},render:d})});define("platform/panels/warnForDisconnectedComponentsPanel.rt",["react","lodash","panels","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.confirmationPanelFrame,{type:"important",panelName:"platform.panels.warnForDisconnectedComponentsPanel",onCancel:this.props.undo,confirmLabel:"PLATFORM_messages_continue",cancelLabel:"PLATFORM_messages_cancel",shouldCloseByDefaultOnConfirm:true,panelTitle:this.getTitle()},a.createElement("div",{className:"icon"},a.createElement(d.symbol,{name:"platformWarning"})),a.createElement("div",{className:"content"},a.createElement("p",{},this.getContent())))}});define("platform/panels/warnForDisconnectedComponentsPanel",["react","lodash","util","platform/panels/warnForDisconnectedComponentsPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"warnForDisconnectedComponentsPanel",mixins:[c.translationMixin],propTypes:{undo:a.PropTypes.func.isRequired,connectedComps:a.PropTypes.bool.isRequired},getTitle:function(){var a=this.props.connectedComps?"PLATFORM_messages_move_connected_element_title":"PLATFORM_messages_move_connected_dataset_title";return this.translateIfNeeded(a)},getContent:function(){var a=this.props.connectedComps?"PLATFORM_messages_move_connected_element_text":"PLATFORM_messages_move_connected_dataset_text";return this.translateIfNeeded(a)},render:d})});define("platform",["lodash","platform/appController/appController","platform/connection/connection","platform/api/api","platform/services/platformPostMessageService","platform/services/tokenService","platform/common/constants","platform/common/utils","platform/panels/appControllerDeleteConfirmationPanel","platform/panels/warnForDisconnectedComponentsPanel"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,f,g,h,i){var j=l(d,a);var k=a.platform.getAPIForSDK(j);b.init(g,i);c.init(f,h);e.init(a,k);a.platform.init(j)}function l(b,c){if(a.isFunction(b)){return a.partial(b,c)}if(a.isObject(b)){return a.mapValues(b,function(a){return l(a,c)})}return b}return{api:d,init:k,platformPostMessageService:e,tokenService:f,constants:g,utils:h,panels:{appControllerDeleteConfirmationPanel:i,warnForDisconnectedComponentsPanel:j}}});