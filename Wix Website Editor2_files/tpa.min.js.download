define("tpa/superApps/superAppsConstants",[],function(){"use strict";var a="61f33d50-3002-4882-ae86-d319c1a249ab";var b="1380b703-ce81-ff05-f115-39571d94dfcd";var c="13bb5d67-1add-e770-a71f-001277e17c57";var d="135aad86-9125-6074-7346-29dc6a3c9bcf";var e="1375baa8-8eca-5659-ce9d-455b2009250d";var f="13d21c63-b5ec-5912-8397-c3a5ddb27a97";var g="13ff8629-c1fc-e289-e81f-bc8c8968e9d6";var h="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e";var i="14271d6f-ba62-d045-549b-ab972ae1f70e";var j="14517e1a-3ff0-af98-408e-2bd6953c36a2";var k="14409595-f076-4753-8303-9a86f9f71469";var l={};l[a]="blog_button";l[b]="ecom_button";var m=function(a){return l[a]};return{getMarketOpenOriginForBi:m,ECOM:{APP_DEF_ID:b,PRODUCT_PAGE:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GRID_GALLERY:"13afb094-84f9-739f-44fd-78d036adb028",SLIDER_GALLERY:"139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",PRODUCT_GALLERY_PAGE:b,SHOPPING_CART:"1380bbab-4da3-36b0-efb4-2e0599971d14",TANK_YOU_PAGE:"1380bbb4-8df0-fd38-a235-88821cf3f8a4",SHOPPING_CART_WIDGET:"1380bbc4-1485-9d44-4616-92e36b1ead6b",PRODUCT_WIDGET:"13ec3e79-e668-cc0c-2d48-e99d53a213dd"},WIXMUSIC:{APP_DEF_ID:c,WIDGET:"13bb5dc2-a098-5a74-502b-6bac84e80b23"},WIX_VIDEO:{APP_DEF_ID:k,WIDGET:"144097ea-fea0-498e-ade7-e6de40127106"},BLOG_APP_DEF_ID:a,ECOM_APP_DEF_ID:b,WIXMUSIC_APP_DEF_ID:c,HOTELS:{APP_DEF_ID:d,SEARCH_BAR:"135aae78-42c9-63b5-d09a-77233cebc1c4"},GET_SUBSCRIBERS_APP_DEF_ID:e,WIX_BOOKINGS_APP_DEF_ID:f,WIX_PHOTOALBUMS_APP_DEF_ID:g,SHOUTOUT_APP_DEF_ID:h,PRO_GALLERY_APP_DEF_ID:i,WIX_CHAT:{APP_DEF_ID:j,WIDGET:"14517f3f-ffc5-eced-f592-980aaa0bbb5c"}}});define("tpa/bi/events.json",[],function(){return{APP_INTENT:{evid:12,src:75,endpoint:"app-sdk",fields:{type:"string",instance_id:"guid",initiator:"string",app_id:"guid"}},APP_ENGAGEMENT:{evid:13,src:75,endpoint:"app-sdk",fields:{instance_id:"guid",app_id:"guid",premium_intent:"string"}},TPA_ADDED:{evid:165,src:38,endpoint:"editor",fields:{is_permissions_app:"number",is_first:"boolean",app_id:"string",app_site_id:"string",instance_id:"string",category:"string",origin:"string",section:"string",search_term:"string",search_result_position:"number",referral_info_category:"string",referral_info:"string",adding_method:"string",template_guid:"string",modal_tab_name:"string",page_id:"string",widget_id:"string"}},TPA_ADD_CLICK:{evid:167,src:38,endpoint:"editor",fields:{adding_method:"string",section:"string",category:"string",origin:"string",app_id:"string",is_first:"boolean",is_permissions_app:"boolean"}},COMPONENT_ADDED_FROM_MARKET:{evid:168,src:38,endpoint:"editor",fields:{referral_info_category:"string",referral_info:"string",app_id:"guid",app_site_id:"guid",instance_id:"guid",search_result_position:"number",search_term:"string",modal_tab_name:"string",adding_method:"string",category:"string",origin:"string",component_id:"string",is_first:"boolean",component_type:"string"}},CLOSE_MARKET_CLICK:{evid:171,src:38,endpoint:"editor",fields:{open_origin:"string",closing_method:"string"}},MARKET_CLOSED:{evid:172,src:38,endpoint:"editor",fields:{open_origin:"string",seconds_opened:"number"}},OPEN_MODAL_CLICK:{evid:173,src:38,endpoint:"editor",fields:{app_id:"string",origin:"string",category:"string",section:"string",component_type:"string"}},MARKET_HELP_CLICK:{evid:174,src:38,endpoint:"editor"},TPA_HELP_CLICK:{evid:175,src:38,endpoint:"editor",fields:{widget_id:"string",help_status:"string",app_id:"string",origin:"string"}},EXTENSION_ADDED:{evid:177,src:38,endpoint:"editor",fields:{page_id:"string",app_site_id:"string",instance_id:"string",widget_id:"string",app_id:"string",preset_id:"string"}},EXTENSION_REMOVED:{evid:178,src:38,endpoint:"editor",fields:{page_id:"string",widget_id:"string",comp_id:"string",instance_id:"string",app_id:"string"}},TPA_OPEN_SETTINGS:{evid:179,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string"}},CUT_COMPONENT_OR_TPA:{evid:180,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},COPY_COMPONENT_OR_TPA:{evid:181,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},PASTE_COMPONENT_OR_TPA:{evid:182,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},DUPLICATE_COMPONENT_OR_TPA:{evid:183,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},CLICK_UPGRADE_APP:{evid:184,src:38,endpoint:"editor",fields:{pp_origin:"string",app_site_id:"string",app_id:"string"}},PP_OPENED:{evid:185,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",pp_origin:"string",pp_type:"string"}},CLICK_UPGRADE_IN_PP:{evid:186,src:38,endpoint:"editor",fields:{pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},CLICK_CYCLE:{evid:187,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},EXPAND_OFFERING:{evid:188,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},PERMISSION_MODAL_CLOSED:{evid:189,src:38,endpoint:"editor",fields:{closing_method:"string",app_id:"string"}},TPA_ERROR:{evid:190,src:38,endpoint:"editor",fields:{error_desc:"string",error_type:"string",app_id:"string"}},TPA_CLOSE_SETTINGS:{evid:191,src:38,endpoint:"editor",fields:{seconds_opened:"number",app_id:"string",app_site_id:"string",instance_id:"string"}},TPA_MESSAGE_LOADED:{evid:277,src:38,endpoint:"editor",fields:{app_id:"string",description:"string",type:"string"}},OPEN_DASHBOARD_APP_CLICK:{evid:278,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string",origin:"string"}}}});define("tpa/bi/errors.json",[],function(){return{ECOM_MISSING_PAGES:{errorName:"ECOM_MISSING_PAGES",errorCode:300,severity:"fatal"},APP_IS_NOT_RESPONSIVE:{errorName:"APP_IS_NOT_RESPONSIVE",errorCode:302,desc:"monitoring apps that are down",severity:"error",params:{p1:"endpoint",p2:"app_id"}}}});define("tpa/bi/bi",["tpa/bi/events.json","tpa/bi/errors.json"],function(a,b){"use strict";var c=function(b){b.bi.register("tpa","event",a)};return{events:a,errors:b,registerEvents:c}});define("tpa/utils/tpaUtils",["lodash","util","panels","tpa/superApps/superAppsConstants","tpa/bi/bi"],function(a,b,c,d,e){"use strict";var f=[e.events.APP_INTENT];function g(){var a=window.location.hostname.match(/editor\.(.*)/);return a?"www."+a[1]:"www.wix.com"}function h(b,c){var d=b.tpa.app.getDataByAppDefId(c)||{};return!d.notProvisioned&&d.instanceId&&!d.demoMode&&a.get(d,"permissions.revoked")!==true}function i(a,b,c,d){var e=a.tpa.app.getDataByAppDefId(b)||{};return{app_id:b,instance_id:e.instanceId,initiator:c,type:d}}function j(){return!a.isEmpty(b.url.getParameterByName("appDefinitionId"))}function k(a,b){var c=g();return["//",c,"/my-account/sites/",a,"/app/",b,"?referralInfo=editor"].join("")}function l(b,c){var d=b.getOpenPanels();return a.find(d,{name:c})}function m(b,c){if(!c){return false}var d=b.widgets&&b.widgets[c];return a.get(d,"appPage.multiInstanceEnabled")}function n(a){return a===d.BLOG_APP_DEF_ID}function o(a,b){a("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:e.events.TPA_MESSAGE_LOADED,biParams:{app_id:b,description:"provision failed",type:"provision_failed"}},true)}function p(b,c){if(a.isUndefined(b)||a.isUndefined(c)){return false}var d=a.map(b.split("."),function(a){return parseInt(a,10)});var e=a.map(c.split("."),function(a){return parseInt(a,10)});while(d.length&&e.length){var f=d.shift();var g=e.shift();if(f>g){return true}else if(f<g){return false}}return d.length>=e.length}function q(){return window}function r(b,c,d){var e=b.selection.getSelectedComponentData();var f=a.get(e,"applicationId");if(!f||f.toString()!==c.applicationId.toString()){var g=b.tpa.app.getFirstAppCompPageId(c.appDefinitionId);var h=b.pages.getFocusedPageId();var i=b.components.get.byId(g.compId,g.pageId);if(g.pageId!==h&&g.pageId!=="masterPage"){b.pages.navigateTo(g.pageId,function(){b.selection.selectComponentByCompRef(i);if(d){d()}})}else{b.selection.selectComponentByCompRef(i);if(d){d()}}}else if(d){d()}}function s(b,c,d,e,g,j){if(!a.includes(f,c)){return}var k=j?null:h.bind(null,b,d);var l;if(j){l=i(b,d,e,g)}else{l=i.bind(null,b,d,e,g)}b.bi.reportBI(c,[l],k)}return{isInDevMode:j,getAppInMyAccountUrl:k,getOpenedPanel:l,isMultiSectionInstanceEnabled:m,isBlog:n,provisionFailAlert:o,sdkVersionIsAtLeast:p,getWindow:q,selectComponentAndNavigateIfNeeded:r,bi:{reportBIOnAppIntent:s}}});define("tpa/constants/constants",[],function(){"use strict";return{TPA_SETTING_MODAL:"tpa.compModals.tpaSettingsModal",TPA_DEFAULT_HELP_ID:"47f00d3e-78ae-4bd6-9c2f-4ddf0e9c42f4",BI:{initiator:{APP_MARKET:"APPMARKET_EDITOR",EDITOR:"EDITOR"},type:{ADD_APP:"ADD_APP",GFPP_UPGRADE:"GFPP_UPGRADE",GFPP_SETTINGS:"GFPP_SETTINGS",GFPP_MANAGE:"GFPP_MANAGE",APP_UPGRADE_BUTTON:"APP_BUTTON_UPGRADE",APP_MANAGE_BUTTON:"APP_BUTTON_MANAGE"}}}});define("tpa/utils/mediaDialogHandlerUtils",["lodash"],function(a){"use strict";var b={photos:"IMAGE",secure_picture:"IMAGE_PRO",backgrounds:"BG_IMAGE",audio:"MUSIC",documents:"DOCUMENT",secure_music:"MUSIC_PRO",swf:"FLASH",video:"VIDEO",shape:"SHAPE",music:"MUSIC",clipart:"CLIPART",bg_video:"BG_VIDEO",icon_document:"ICON_DOCUMENT",bg_social:"ICON_SOCIAL",bg_favicon:"ICON_FAVICON"};var c=function(a,c){var d=b[a];return c.categories[d]};var d=function(b){var c=a.cloneDeep(b);c.relativeUri=b.uri||"";return c};var e=function(b){var c={};c.fileName=b.title||"";if(b.mediaType==="secure_music"){var d=b.fileOutput&&b.fileOutput.audio;var e=a.find(d,{tag:"preview-short"});c.shortPreviewFileName=e&&e.url||"";c.previewFileName=b.previewFileName||"";c.fileUrl=b.fileUrl||""}else{c.relativeUri=b.fileName||"";c.width=Number(b.width)||0;c.height=Number(b.height)||0}return c};return{convertMediaManagerResult:e,convertMediaManagerResultForSuperApps:d,convertMediaType:c}});define("tpa/handlers/editorRefreshTPADataAfterUpgrade",["lodash","jquery"],function(a,b){"use strict";var c=null;var d="focus";var e={};var f=function(a,b){var c=a.tpa.app.getRenderedReactCompsByApplicationId(b);a.tpa.app.refreshApp(c)};var g=function(a,b){var c=a.generalInfo.getMetaSiteId();b.forEach(function(b){a.tpa.provision.refreshAppSpecMap(b,c,function(){j();a.selection.deselectComponents();a.panelManager.closePanelByName("tpa.compPanels.tpaSettings");f(a,b)})})};var h=function(b,c){var d=b.generalInfo.getMetaSiteId();b.tpa.billing.getPremiumApps(d,function(b){if(!a.isEmpty(b)){var d,f,g=[];var h=function(){return f&&f.cycle&&f.cycle===6};if(a.isArray(b)){b=a.keyBy(b,"appDefinitionId");for(d in e){if(a.isObject(b[e[d].appDefinitionId])){f=b[e[d].appDefinitionId];if(e[d].vendorProductId!==f.vendorProductId||e[d].upgradedToYearly!==h()){delete e[d];g.push(d)}}}}c(g)}})};var i=function(a){if(!c){c=function(){h(a,function(b){g(a,b)})};b(window).on(d,c)}};var j=function(){if(c){b(window).off(d,c);c=null}};var k=function(a,b){var c=a.tpa.app.getData(b);e[b]={appDefinitionId:c.appDefinitionId,vendorProductId:c.vendorProductId,upgradedToYearly:c.upgradedToYearly===true};i(a)};var l=function(){j();for(var a in e){if(e.hasOwnProperty(a)){delete e[a]}}};return{trackAppUpgrade:k,trackedApps:e,resetListeners:l}});define("tpa/packagePicker/packagePickerUtils",["lodash","jquery","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi"],function(a,b,c,d){"use strict";var e={BENEFITS:"tpa.packagePicker.modals.benefitsModal",CYCLES:"tpa.packagePicker.modals.cyclesModal",EXTERNAL:"tpa.packagePicker.modals.externalBenefitsModal",PACKAGES:"tpa.packagePicker.modals.packagePickerModal"};var f={BENEFITS:"offering",CYCLES:"cycle",PACKAGES:"package",EXTERNAL:"external"};var g=function(a,b,c,d,e,f){var g=a.selection.getSelectedComponentData();var h="tpa_"+e+"_ed_14";return a.tpa.billing.getAppUpgradeUrl(g.applicationId,b,c,{referralAdditionalInfo:h,pp_type:d,premiumIntent:f})};var h=function(b,d,e,f,h,i,j){var k=!b.generalInfo.isFirstSave();if(!k){b.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:""})}else{var l=g(b,d,e,f,h,j);window.open(l);var m=b.selection.getSelectedComponentData();c.trackAppUpgrade(b,m.applicationId)}if(a.isFunction(i)){i()}};var i=function(a,b,c){var e=a.selection.getSelectedComponentData();var f=a.tpa.app.getData(e.applicationId);var g={pp_type:b,pp_origin:c,app_site_id:f.instanceId,app_id:e.applicationId};a.bi.event(d.events.CLICK_UPGRADE_IN_PP,g)};var j=function(b,c,d,f){f=f||{};var g=a.assign(a.pick(c,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),a.pick(d,"vendorProductId"));g.packages=a.reject(c.packages,{id:"oneTime"});if(a.get(d,"openPremiumPage")){g.panelName=e.EXTERNAL;var h={appDefId:d.appDefinitionId,referralAdditionalInfo:f.origin};if(f.premiumIntent){h.premiumIntent=f.premiumIntent}g.upgradeUrl=b.tpa.billing.getSiteUpgradeUrl(h);return g}if(c.billingPanelType==="benefits"){g.panelName=e.BENEFITS;return g}if(c.billingPanelType==="cycles"){g.panelName=e.CYCLES;return g}g.panelName=e.PACKAGES;return g};return{upgradeToPremiumAndClosePickerModal:h,pickPickerForm:j,sendBI:i,TYPE:e,BI_TYPE:f}});define("tpa/packagePicker/compModals/benefitsModal.rt",["react","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.close()}function g(b,c){return a.createElement("li",{},a.createElement(d.symbol,{name:"benefitsModalVSign"}),a.createElement("span",{dangerouslySetInnerHTML:{__html:b}}))}function h(){this.close()}function i(){this.onBuy()}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:true},a.createElement("div",{className:"benefits-modal"},a.createElement("div",{className:"panel-header dark"},a.createElement("span",{className:"app-icon",style:{backgroundImage:"url('"+(this.props.colorSvgIcon||this.props.appIcon)+"')"}}),a.createElement(d.symbol,{name:"messageConfetti"}),a.createElement(d.symbol,{name:"messageShadow"}),a.createElement("div",{className:"panel-header-title"},"\n                ",this.translateIfNeeded("tpa_package_picker_upgrade_title"),"\n                ",a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.name}}),a.createElement("button",{className:"close",onClick:f.bind(this)},a.createElement(e.symbol,{name:"headerCloseButton"})))),a.createElement("div",{className:"content"},a.createElement.apply(this,["ul",{className:"benefit-list"},b.map(this.props.upgradeBenefits,g.bind(this))]),a.createElement("div",{className:"price"},a.createElement("span",{className:"currencySymbol",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),this.props.price.priceValue,"/",this.translateIfNeeded("tpa_package_picker_month"),"\n                "),a.createElement("div",{className:"actions"},a.createElement(d.button,{className:"btn-later",onClick:h.bind(this),label:"tpa_benefits_cancel_button"}),a.createElement(d.button,{className:"btn-upgrade",onClick:i.bind(this),label:"tpa_package_picker_upgrade_button"})))))}});define("tpa/packagePicker/compModals/benefitsModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/benefitsModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"benefitsModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],getInitialState:function(){return{}},componentDidMount:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.BENEFITS};a.bi.event(g.events.PP_OPENED,d)},onBuy:function(){var a=this.getEditorAPI();e.upgradeToPremiumAndClosePickerModal(a,this.props.packages[0].id,null,e.BI_TYPE.BENEFITS,this.props.origin,this.close,this.props.premiumIntent);e.sendBI(a,e.BI_TYPE.BENEFITS,this.props.origin)},onCancel:function(){this.close()},render:f})});define("tpa/packagePicker/compModals/cyclePickerHeader.rt",["react","lodash","symbols"],function(a,b,c){"use strict";function d(){this.close()}return function(){return a.createElement("div",{className:"panel-header cycle-picker dark"},a.createElement("span",{className:"app-logo",style:{backgroundImage:"url('"+this.props.appIconUrl+"')"}}),a.createElement("button",{className:"close",onClick:d.bind(this)},a.createElement(c.symbol,{name:"headerCloseButton"})),a.createElement("span",{className:"panel-header-title",dangerouslySetInnerHTML:{__html:this.props.title}}))}});define("tpa/packagePicker/compModals/cyclePickerHeader",["react","util","panels","core","tpa/packagePicker/compModals/cyclePickerHeader.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"cyclePickerHeader",mixins:[b.translationMixin,c.mixins.panelFrameMixin,d.mixins.editorAPIMixin],getUpgradeText:function(){return"Upgrade to Get More Features"},render:e})});define("tpa/packagePicker/compModals/cyclesModal.rt",["react","lodash","panels","tpa/packagePicker/compModals/cyclePickerHeader","baseUI","baseUILib"],function(a,b,c,d,e,f){"use strict";function g(c,d){return a.createElement("div",{className:b({feature:true,"feature-display":!this.state.moreFeatures}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("span",{className:"premium"},this.getPremiumText(c).length>0?a.createElement("span",{key:"features",dangerouslySetInnerHTML:{__html:this.getPremiumText(c)}}):null,c.premium&&this.getPremiumText(c).length===0?a.createElement("span",{className:"symbol",key:"premium"},a.createElement(e.symbol,{name:"cyclePickerV"})):null,!c.premium?a.createElement("span",{className:"symbol",key:"not-premium"},a.createElement(e.symbol,{name:"cyclePickerX"})):null),a.createElement("span",{className:"basic"},c.freeText&&c.freeText.length>0?a.createElement("span",{key:"free",dangerouslySetInnerHTML:{__html:c.freeText}}):null,(c.freeText&&c.freeText.length===0||!c.freeText)&&c.free?a.createElement("span",{className:"symbol",key:"free1"},a.createElement(e.symbol,{name:"cyclePickerV"})):null,(c.freeText&&c.freeText.length===0||!c.freeText)&&!c.free?a.createElement("span",{className:"symbol",key:"not-free"},a.createElement(e.symbol,{name:"cyclePickerX"})):null),a.createElement("span",{className:"title"},a.createElement(e.tooltip,{disabled:!c.description,value:a.createElement("span",{className:"cycles-modal-tooltip-content-wrapper",dangerouslySetInnerHTML:{__html:c.description}}),alignment:"right",styleType:e.uiConstants.TOOLTIP.STYLE_TYPE.NORMAL},a.createElement("span",{},c.title))))}function h(){this.yearlyPlanSelected()}function i(){this.monthlyPlanSelected()}function j(){this.onBuy()}function k(){this.toggleMoreFeatures()}function l(){this.toggleMoreFeatures()}function m(){this.onCancel()}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:true,enableScroll:"true"},a.createElement("div",{className:"cycles-modal"},a.createElement(d,{panelName:this.props.panelName,appIconUrl:this.props.colorSvgIcon||this.props.appIcon,title:this.translateIfNeeded("tpa_package_picker_upgrade_title")+" "+this.props.name}),a.createElement(f.CustomScroll,{addScrolledClass:"true"},a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"tableWrapper"},a.createElement("div",{className:"header"},a.createElement("span",{className:"free header"},"\n                        ",this.translateIfNeeded("tpa_cycle_picker_free"),"\n                    "),a.createElement("span",{className:"premium header"},"\n                        ",this.translateIfNeeded("tpa_cycle_picker_premium"),"\n                    ")),a.createElement.apply(this,["div",{className:"feature-table-wrapper"},b.map(this.props.features,g.bind(this))]),a.createElement("div",{className:"cycle-modal-footer"},a.createElement("div",{className:"upgrade"},a.createElement("div",{className:"cycle-options"},a.createElement("label",{onClick:h.bind(this)},a.createElement("input",{type:"radio",checked:this.state.yearly,name:"the-radio"}),a.createElement("div",{className:"cycle-box"},a.createElement("div",{className:"circle"},a.createElement(e.symbol,{name:"vCyclePicker"})),a.createElement("div",{className:"title"},this.translateIfNeeded("tpa_cycle_picker_pay_annually")),a.createElement("div",{className:"save"},this.getSaveTitle()),a.createElement("div",{className:"price price-yearly"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"price-whole-number"},this.getYearlyPriceWholeNumber()),a.createElement("span",{className:"price-fragment-number"},this.getYearlyPriceFragmentNumber()),a.createElement("span",{className:"month"},"/",this.translateIfNeeded("tpa_package_picker_month"))))),!this.isPremium()?a.createElement("label",{onClick:i.bind(this),key:"footer-upgrade"},a.createElement("input",{type:"radio",checked:!this.state.yearly,name:"the-radio"}),a.createElement("div",{className:"cycle-box"},a.createElement("div",{className:"circle"},a.createElement(e.symbol,{name:"vCyclePicker"})),a.createElement("div",{className:"title"},this.translateIfNeeded("tpa_cycle_picker_pay_monthly")),a.createElement("div",{className:"price price-monthly"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"price-whole-number"},this.getMonthlyPriceWholeNumber()),a.createElement("span",{className:"price-fragment-number"},this.getMonthlyPriceFragmentNumber()),a.createElement("span",{className:"month"},"/",this.translateIfNeeded("tpa_package_picker_month"))))):null),a.createElement("div",{},a.createElement(e.button,{className:"btn-confirm-primary upgrade-yearly-btn",onClick:j.bind(this),label:"tpa_package_picker_upgrade_button"}))),a.createElement("div",{className:"basic-bottom-border"}),!this.state.moreFeatures&&this.props.features.length>7?a.createElement("div",{className:"features",key:"moreFeatures",onClick:k.bind(this)},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_more_features")),a.createElement(e.symbol,{name:"cyclePickerMoreArrow"})):null,this.state.moreFeatures?a.createElement("div",{className:"features",key:"lessFeatures",onClick:l.bind(this)},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_less_features")),a.createElement(e.symbol,{name:"cyclePickerLessArrow"})):null),a.createElement("div",{className:"cancel-btn",onClick:m.bind(this)},this.translateIfNeeded("tpa_cycle_picker_cancel_link")))))))}});define("tpa/packagePicker/compModals/cyclesModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/cyclesModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"cyclesModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],propTypes:{vendorProductId:a.PropTypes.object,packages:a.PropTypes.array,price:a.PropTypes.object},getInitialState:function(){return{yearly:true,shouldShowMonthly:!this.props.vendorProductId,moreFeatures:false}},componentDidMount:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.CYCLES};a.bi.event(g.events.PP_OPENED,d)},getSaveTitle:function(){var a=this.translateIfNeeded("tpa_cycle_picker_save");var b=Math.round((this.props.price.priceValue-this.props.price.yearlyPriceValue)/this.props.price.priceValue*100);return a+" "+b+"%"},onBuy:function(){var a=this.props.packages[0].id;var b=this.state.yearly?"YEARLY":"MONTHLY";var c=this.getEditorAPI();e.upgradeToPremiumAndClosePickerModal(c,a,b,e.BI_TYPE.CYCLES,this.props.origin,this.close,this.props.premiumIntent);e.sendBI(c,e.BI_TYPE.CYCLES,this.props.origin)},onCancel:function(){this.close()},isPremium:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();return a.tpa.app.isPremium(b.applicationId)},toggleMoreFeatures:function(){this.setState({moreFeatures:!this.state.moreFeatures})},getPremiumText:function(a){var b=this.props.packages[0].id;var c="";if(a&&a.packagesTexts&&a.packagesTexts[b]&&a.packagesTexts[b].premiumText){c=a.packagesTexts[b].premiumText}return c},yearlyPlanSelected:function(){if(this.state.yearly){return}this.setState({yearly:true});this.cycleChangedBI("yearly")},monthlyPlanSelected:function(){if(!this.state.yearly){return}this.setState({yearly:false});this.cycleChangedBI("monthly")},cycleChangedBI:function(a){var b=this.getEditorAPI();var c=b.selection.getSelectedComponentData();var d=b.tpa.app.getData(c.applicationId);var f={cycle_id:a==="monthly"?3:6,cycle_name:a,pp_type:e.BI_TYPE.PACKAGES,pp_origin:this.props.origin,app_site_id:d.instanceId,app_id:d.appDefinitionId};b.bi.event(g.events.CLICK_CYCLE,f)},getYearlyPriceWholeNumber:function(){return parseInt(this.props.price.yearlyPriceValue,10)},getYearlyPriceFragmentNumber:function(){return this.getFragmentNumber(this.props.price.yearlyPriceValue)},getMonthlyPriceWholeNumber:function(){return parseInt(this.props.price.priceValue,10)},getMonthlyPriceFragmentNumber:function(){return this.getFragmentNumber(this.props.price.priceValue)},getFragmentNumber:function(a){var b=String(a).split(".")[1]||"";while(b.length<2){b+="0"}return b},render:f})});define("tpa/packagePicker/compModals/packagePickerModal.rt",["react","lodash","panels","tpa/packagePicker/compModals/cyclePickerHeader","baseUI","baseUILib"],function(a,b,c,d,e,f){"use strict";function g(){this.showMonthly()}function h(a,b){this.selectPackage(a.id,"YEARLY")}function i(a,b){this.onBuy()}function j(a,b){this.selectPackage(a.id,"MONTHLY")}function k(a,b){this.onBuy()}function l(c,d,f,g){return a.createElement("div",{className:b({feature:true,highlighted:f.relevant.highlighted}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement(e.tooltip,{value:a.createElement("span",{className:"package-picker-modal-tooltip-content-wrapper"},{dangerouslySetInnerHTML:{__html:f.full.description}}),alignment:"top"},a.createElement("span",{dangerouslySetInnerHTML:{__html:f.relevant.premiumText}})))}function m(c,d){return a.createElement("div",{className:b({package:true,popular:d==1}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),key:c.id},a.createElement("header",{},a.createElement("div",{className:"package-name",dangerouslySetInnerHTML:{__html:c.name}}),d===1?a.createElement("div",{key:"firstIndex"},a.createElement(e.symbol,{className:"badge",name:"PPPopular"}),a.createElement("div",{className:"badge text"},a.createElement("span",{className:"badge-caption"},this.translateIfNeeded("tpa_package_picker_popular")))):null),this.state.hasCycles?a.createElement("div",{className:b({plane:true,yearly:true,disabled:this.isDisabled(c.id,"YEARLY")}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),key:"yearly",onClick:h.bind(this,c,d)},a.createElement("div",{className:"price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"yearly-per-month-whole"},this.getPriceWholePart(c.yearly.price)),a.createElement("span",{className:"yearly-per-month-fragment"},this.getPriceFragmentPart(c.yearly.price)),a.createElement("span",{className:"per-month"},"/",a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_month")))),a.createElement("div",{className:"you-save"},a.createElement("span",{className:"original-price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{},c.monthly.price)),a.createElement("span",{className:"you-save"},a.createElement("span",{},this.translateIfNeeded("tpa_cycle_picker_save")),a.createElement("span",{className:"discount-percent"},c.discountPercent),"%\n                            ")),this.state.hasCycles?a.createElement("div",{key:"best-feature",className:"best-selling-feature",dangerouslySetInnerHTML:{__html:c.bestSellingFeature}}):null,a.createElement("div",{className:b({"select-package":true,selected:this.isSelectedPackage(c.id,"YEARLY")}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("div",{className:"radio-button"}),a.createElement("button",{onClick:i.bind(this,c,d)},a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_upgrade_button"))))):null,a.createElement("div",{className:b({plane:true,monthly:true,"monthly-open":this.state.monthlyOpen||!this.state.hasCycles,"no-cycles":!this.state.hasCycles,disabled:this.isDisabled(c.id,"MONTHLY")}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),onClick:j.bind(this,c,d)},a.createElement("div",{className:"price"},a.createElement("span",{className:"currency",dangerouslySetInnerHTML:{__html:this.props.price.currencySymbol}}),a.createElement("span",{className:"yearly-per-month-whole"},this.getPriceWholePart(c.monthly.price)),a.createElement("span",{className:"yearly-per-month-fragment"},this.getPriceFragmentPart(c.monthly.price)),a.createElement("span",{className:"per-month"},"/",a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_month")))),!this.state.hasCycles?a.createElement("div",{key:"best-feature",className:"best-selling-feature",dangerouslySetInnerHTML:{__html:c.bestSellingFeature}}):null,a.createElement("div",{className:b({"select-package":true,selected:this.isSelectedPackage(c.id,"MONTHLY")}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("div",{className:"radio-button"}),a.createElement("button",{onClick:k.bind(this,c,d)},a.createElement("span",{},this.translateIfNeeded("tpa_package_picker_upgrade_button"))))),a.createElement.apply(this,["div",{className:"features"},b.map(this.state.normalizedFeatures[c.id],l.bind(this,c,d))]))}return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:true},a.createElement("div",{className:"package-picker-container"},a.createElement(d,{panelName:this.props.panelName,appIconUrl:this.props.colorSvgIcon||this.props.appIcon,title:this.translateIfNeeded("tpa_package_picker_upgrade_title")+" "+this.props.name}),a.createElement(f.CustomScroll,{addScrolledClass:"true"},a.createElement("div",{className:"packages"},this.state.hasCycles?a.createElement("div",{className:b({"plane-cycles":true,package:true,"has-cycles":this.state.hasCycles}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),key:"monthly-cycles"},a.createElement("div",{className:"best-value-badge"},a.createElement(e.symbol,{name:"PPBestValue"}),a.createElement("div",{},this.translateIfNeeded("tpa_package_picker_best_value"))),a.createElement("div",{className:"yearly"},a.createElement("div",{className:"cycle-title"},this.translateIfNeeded("tpa_package_picker_yearly"),"\n                            "),a.createElement("div",{className:"cycle-subtitle"},this.translateIfNeeded("tpa_package_picker_saving_plans"),"\n                            "),a.createElement("div",{className:b({"open-monthly":true,"monthly-open":this.state.monthlyOpen
}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),onClick:g.bind(this)},a.createElement("span",{className:"arrow"},a.createElement(e.symbol,{name:"PPOpenMonthlyArrow"})),a.createElement("span",{className:"caption"},this.translateIfNeeded("tpa_package_picker_monthly")," ",this.translateIfNeeded("tpa_package_picker_plans")))),a.createElement("div",{className:b({monthly:true,"monthly-open":this.state.monthlyOpen}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("div",{className:"cycle-title"},this.translateIfNeeded("tpa_package_picker_monthly"),"\n                            "),a.createElement("div",{className:"cycle-subtitle"},this.translateIfNeeded("tpa_package_picker_plans"),"\n                            "))):null,a.createElement.apply(this,["div",{className:"packages-wrapper"},b.map(this.props.packages,m.bind(this))])))))}});define("tpa/packagePicker/compModals/packagePickerModal",["react","core","lodash","util","panels","tpa/packagePicker/packagePickerUtils","tpa/packagePicker/compModals/packagePickerModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f,g,h){"use strict";var i=1;function j(a){var b={};a.forEach(function(a){var e;for(var f in a.packagesTexts){if(a.packagesTexts.hasOwnProperty(f)){e=a.packagesTexts[f].highlighted;if(!b[f]){b[f]=[]}if(a.packagesTexts[f].premiumText){b[f].push({full:a,relevant:{premiumText:a.packagesTexts[f].premiumText,highlighted:c.isBoolean(e)?e:d.stringUtils.isTrue(e)}})}}}});return b}function k(a){return c.isArray(a)&&c.isObject(a[0])&&c.isObject(a[0].yearly)&&!c.isUndefined(a[0].yearly.price)}return a.createClass({displayName:"packagePickerModal",mixins:[d.translationMixin,e.mixins.panelFrameMixin,b.mixins.editorAPIMixin],componentDidMount:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:f.BI_TYPE.PACKAGES};a.bi.event(h.events.PP_OPENED,d)},getInitialState:function(){return{hasCycles:this.isHasCycles(),monthlyOpen:false,normalizedFeatures:j(this.props.features),selectedPackageId:this.getDefaultPackageId(this.props.vendorProductId,this.props.upgradedToYearly,this.props.packages),selectedPackageCycle:this.isHasCycles()?"YEARLY":"MONTHLY"}},isHasCycles:function(){return k(this.props.packages)},getMostExpansiveIndex:function(a){return a.length-1},getOwnedPackageIndex:function(a,b){if(c.isUndefined(a)){return-1}for(var d=0;d<b.length;d++){if(b[d].id===a){return d}}},isDefaultPackageAlreadyPurchased:function(a,b,d){var e=k(d);if(a!==1){return false}if(e){return!(c.isUndefined(b)||b===false)}return true},getDefaultPackageId:function(a,b,c){var d=this.getOwnedPackageIndex(a,c);var e=i;if(this.isDefaultPackageAlreadyPurchased(d,b,c)||this.isPurchasedPackageHigherThenDefault(d,c)){e=this.getMostExpansiveIndex(c)}return c[e].id},isPurchasedPackageHigherThenDefault:function(a,b){return a===this.getMostExpansiveIndex(b)},showMonthly:function(){this.setState({monthlyOpen:true});var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={cycle_id:"3",cycle_name:"monthly",pp_type:f.BI_TYPE.PACKAGES,pp_origin:this.props.origin,instance_id:a.selection.getSelectedComponentId(),app_id:c.appDefinitionId};a.bi.event(h.events.EXPAND_OFFERING,d)},isDisabled:function(a,b){var c=this.getOwnedPackageIndex(this.props.vendorProductId,this.props.packages);var d=this.getOwnedPackageIndex(a,this.props.packages);if(this.props.upgradedToYearly&&b==="MONTHLY"){return true}if(d===c){return this.props.upgradedToYearly?true:b==="MONTHLY"}return c===-1?false:d<c},selectPackage:function(a,b,c){if(this.isDisabled(a,b)){return}this.setState({selectedPackageId:a,selectedPackageCycle:b},c)},getPriceWholePart:function(a){return parseInt(a,10)},getPriceFragmentPart:function(a){var b=String(a).split(".")[1]||"";while(b.length<2){b+="0"}return b},isSelectedPackage:function(a,b){return a===this.state.selectedPackageId&&b===this.state.selectedPackageCycle},onBuy:function(){var a=this.getEditorAPI();f.upgradeToPremiumAndClosePickerModal(a,this.state.selectedPackageId,this.state.selectedPackageCycle,f.BI_TYPE.PACKAGES,this.props.origin,this.close,this.props.premiumIntent);f.sendBI(a,f.BI_TYPE.PACKAGES,this.props.origin)},render:g})});define("tpa/packagePicker/compModals/externalBenefitsModal.rt",["react","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.close()}function g(b,c){return a.createElement("li",{},a.createElement(d.symbol,{name:"benefitsModalVSign"}),a.createElement("span",{dangerouslySetInnerHTML:{__html:b}}))}function h(){this.close()}function i(){this.onBuy()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:true},a.createElement("div",{className:"benefits-modal"},a.createElement("div",{className:"panel-header dark"},a.createElement("span",{className:"app-icon",style:{backgroundImage:"url('"+(this.props.colorSvgIcon||this.props.appIcon)+"')"}}),a.createElement(d.symbol,{name:"messageConfetti"}),a.createElement(d.symbol,{name:"messageShadow"}),a.createElement("div",{className:"panel-header-title"},"\n                ",this.translateIfNeeded("tpa_package_picker_upgrade_title"),"\n                ",a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.name}}),a.createElement("button",{className:"close",onClick:f.bind(this)},a.createElement(e.symbol,{name:"headerCloseButton"})))),a.createElement("div",{className:"content"},a.createElement.apply(this,["ul",{className:"benefit-list"},b.map(this.props.upgradeBenefits,g.bind(this))]),a.createElement("div",{className:"price"}),a.createElement("div",{className:"actions"},a.createElement(d.button,{className:"btn-later",onClick:h.bind(this),label:"tpa_benefits_cancel_button"}),a.createElement(d.button,{className:"btn-upgrade",onClick:i.bind(this),label:"tpa_package_picker_upgrade_button"})))))}});define("tpa/packagePicker/compModals/externalBenefitsModal",["react","core","util","panels","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/packagePicker/compModals/externalBenefitsModal.rt"],function(a,b,c,d,e,f,g,h){"use strict";return a.createClass({displayName:"externalBenefitsModal",mixins:[c.translationMixin,d.mixins.panelFrameMixin,b.mixins.editorAPIMixin],getInitialState:function(){return{}},componentDidMount:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={app_id:c.appDefinitionId,app_site_id:c.instanceId,pp_origin:this.props.origin,pp_type:e.BI_TYPE.BENEFITS};a.bi.event(g.events.PP_OPENED,d)},onBuy:function(){var a=this.getEditorAPI();var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);f.trackAppUpgrade(a,c.applicationId);window.open(this.props.upgradeUrl);this.close()},onCancel:function(){this.close()},render:h})});define("tpa/packagePicker/packagePicker",["lodash","tpa/packagePicker/compModals/benefitsModal","tpa/packagePicker/compModals/cyclesModal","tpa/packagePicker/compModals/packagePickerModal","tpa/packagePicker/compModals/externalBenefitsModal","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/utils/tpaUtils"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b,c,d,e){var f=d||false;e=a.assign({isAsyncFlow:f},e);var g=b.tpa.appMarket.getData(c);var h=r(b,c);if(h&&h.demoMode){b.tpa.provision.provisionAppDemoSave(h.applicationId,function(){k(b,e,c,g,h)},function(){i.provisionFailAlert(b.panelManager.openPanel,c)})}else if(u(b,h)){k(b,e,c,g,h)}else{l(b,c,g,h,e)}};var k=function(a,b,c,d,e){a.saveManager.saveInBackground(a,function(){a.tpa.appMarket.getDataAsync(c).then(function(d){b.isAsyncFlow=true;l(a,c,d,e,b)})},function b(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_upgrade_before_save_error_title",description:"tpa_messages_upgrade_before_save_error_description",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_upgrade_before_save_error_step_3"],helpMessage:"tpa_messages_upgrade_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:h.events.TPA_MESSAGE_LOADED,biParams:{app_id:c,description:"Error on upgrade TPA from template site",type:"upgrade_save_error"}},true)})};var l=function(a,b,c,d,e){if(m(c)){a.tpa.appMarket.getDataAsync(b).then(function(b){n(a,b,d,e)})}else{n(a,c,d,e)}};var m=function(b){return a.isUndefined(b)||b&&a.isUndefined(b.price)};var n=function(b,c,d,e){var h=f.pickPickerForm(b,c,d,e);var i=h.upgradeUrl;if(h.panelName===f.TYPE.EXTERNAL&&!e.isAsyncFlow){window.open(i);g.trackAppUpgrade(b,d.applicationId)}else{b.panelManager.openPanel(h.panelName,a.assign(h,e),true)}};var o=function(b,c){return a.last(b.packages).id===c.vendorProductId};var p=function(b){return!a.last(b.packages).yearly.price};var q=function(a,b){var c=a.tpa.appMarket.getData(b.appDefinitionId);if(c){var d=f.pickPickerForm(a,c,b);var e=!!b.vendorProductId;var g=!!c.upgradedToYearly;switch(d.panelName){case f.TYPE.BENEFITS:return e;case f.TYPE.CYCLES:return e&&g;case f.TYPE.PACKAGES:var h=e&&o(d,b);h=h&&(g||p(d));return h;case f.TYPE.EXTERNAL:return e;default:return false}}return true};function r(a,b){var c=a.tpa.app.getDataByAppDefId(b);i.selectComponentAndNavigateIfNeeded(a,c);return c}var s=function(a,b,c){a.tpa.appMarket.getDataAsync(b).then(function(d){var e=r(a,b);var g=f.pickPickerForm(a,d,e);c(g.upgradeUrl)})};var t=function(a,b,c){var d=r(a,b);if(u(a,d)){a.saveManager.saveInBackground(a,function(){s(a,b,c)})}else{s(a,b,c)}};var u=function(a,b){var c=!a.generalInfo.isFirstSave();return!c||b&&(!a.tpa.app.isAppProvisionedOnServer(b.applicationId)||a.tpa.app.isPermissionsRevoked(b))};return{startUpgradeFlow:j,isFullyUpgraded:q,getWixUpgradeUrl:t,isSaveSiteNeeded:u,modals:{benefitsModal:b,cyclesModal:c,packagePickerModal:d,externalBenefitsModal:e}}});define("tpa/services/dashboardAppService",["util","tpa/utils/tpaUtils","tpa/bi/bi"],function(a,b,c){"use strict";var d=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.isHybrid(b.applicationId)};var e=function(a){return!a.generalInfo.isFirstSave()};var f=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.getData(b.applicationId)};var g=function(a,g){var h=f(a);var i=d(a);var j=e(a);var k=a.tpa.app.isAppProvisionedOnServer(h.applicationId);if(i&&j&&k){var l=b.getAppInMyAccountUrl(a.generalInfo.getMetaSiteId(),h.appDefinitionId);g(l)}else if(!j||!k){var m=function(){var c=b.getAppInMyAccountUrl(a.generalInfo.getMetaSiteId(),h.appDefinitionId);g(c)};var n=function(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:c.events.TPA_MESSAGE_LOADED,biParams:{app_id:h.appDefinitionId,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},true);g(null)};a.saveManager.saveInBackground(a,m,n)}else{g(null)}};var h=function(a){var c=d(a);var g=e(a);var h=f(a);if(c&&g){return b.getAppInMyAccountUrl(a.generalInfo.getMetaSiteId(),h.appDefinitionId)}return null};var i=function(b){var c=b.selection.getSelectedComponentData();if(c){var d=b.tpa.app.getData(c.applicationId);var e=b.tpa.appMarket.getData(d.appDefinitionId);if(e&&e.editorGfpp){return e.editorGfpp}}return{upgradeText:a.translate("tpa_package_picker_upgrade_title"),openInDashboardText:a.translate("tpa_open_dashboard")}};return{getDashboardAppUrl:h,getDashboardAppUrlAsync:g,getEditorGfppData:i}});define("tpa/services/tpaAddRemoveDSService",["lodash","util","core","tpa/utils/tpaUtils","experiment"],function(a,b,c,d,e){"use strict";var f=[];var g=function(a,b,c){c.onError=function(){d.provisionFailAlert(a.panelManager.openPanel,b)};var e=a.tpa.widget.add(b,c);a.waitForChangesApplied(function(){if(e&&a.components.is.exist(e)){a.selection.selectComponentByCompRef(e)}});a.history.add("adding a tpa widget to stage");l(a);return e};var h=function(b,c,e){if(!a.includes(f,c)){f.push(c);e=e||{};var g=e.callback||null;e.callback=function(b){f=a.without(f,c);if(g){g(b)}};var h=function(){f=a.without(f,c);d.provisionFailAlert(b.panelManager.openPanel,c)};var i=b.tpa.section.add(c,e,h);b.history.add("adding a tpa section to stage");l(b);return i}return{id:b.pages.getFocusedPageId()}};var i=function(a,b,c){var d=a.tpa.section.addMultiSection(b,c);a.history.add("adding multi section");l(a);return d};var j=function(a,b){a.tpa.widget.delete(b);a.panelManager.closePanelByName("tpa.compPanels.tpaSettings")};var k=function(a,c,d){a.tpa.section.delete(c);a.bi.reportBI(b.bi.events.COMPONENT_REMOVED,d);a.components.reset()};var l=function(a){if(!e.isOpen("dontCloseAddPanelOnAdd")){a.panelManager.closePanelByName("addPanelInfra.addPanel")}};return{addWidget:g,addSection:h,addMultiSection:i,deleteWidget:j,deleteSection:k}});define("tpa/services/tpaStyleService",["lodash"],function(a){"use strict";var b=null;var c={};var d=function(d){if(c[b]){var e=[];var g=[];var h=b;a.forEach(c[h],function(a){e.push(a.data);g.push(a.callback)});delete c[h];b=null;f(d,h,e,g)}else{b=null}};var e=function(b,c){if(a.isArray(b)){a.forEach(b,function(a){if(a){a(c)}})}else if(b){b(c)}};var f=function(a,f,g,h){if(b===f){if(!c[f]){c[f]=[]}c[f].push({data:g,callback:h});return}a.tpa.style.setStyleParam(f,g,function(a){e(h,a)});a.waitForChangesApplied(d.bind(null,a));b=f};return{setStyleParam:f}});define("tpa/appMarket/utils/appMarketUtils",["lodash","util","helpIds","tpa/bi/bi","pLoader!santa:utils"],function(a,b,c,d,e){"use strict";var f=function(){var a=b.url.getParameterByName("openpanel");return a.indexOf("market")===0};var g=function(){var a=b.url.parseUrlParams(window.location.search);a=a&&a.amexperiment;return a||""};var h=function(){var c=["openAppDefId","appDefinitionId"],d={};a.forEach(c,function(a){d[a]=b.url.getParameterByName(a)});d.tests=g();return d};var i=function(){var c=b.url.getParameterByName("openpanel");var d={};if(!a.isEmpty(c)){var e=c.split(":");var f=h();switch(e.length){case 1:d.appDefinitionId=f.appDefinitionId;d.openAppDefId=f.openAppDefId;break;case 2:d.query=e[1];break;case 3:if(e[1]==="Cat"){d.categorySlug=e[2]}else if(e[1]==="appDefId"){d.openAppDefId=e[2]}break;default:d.query="";break}}return d};var j=function(a){return a.getUserPreferences().site.get("app-market")||{}};var k=function(a,b){return a.getUserPreferences().site.set("app-market",b)||false};var l=function(a){return a.getUserPreferences().session.get("app-market")||{}};var m=function(a,b){return a.getUserPreferences().session.set("app-market",b)||false};var n=function(b,c,d){var e="tpa.compModals."+c;d.width=o(d.width);d.height=o(d.height);var f=a.pick(d,["title","width","height","closeModalBiEvent","closeModalBiParams","id"]);f.panelName=e;f.iframeUrl=d.url;f.shouldTranslate=d.shouldTranslateTitle;b(e,f,true)};var o=function(a){if(typeof a==="number"){a=a.toString()}return a};var p=function(a,b,c){var d="tpa.compModals."+b;a(d,{panelName:d,iframeUrl:c.url,appDefinitionId:c.appDefinitionId,onClose:c.onClose},true)};var q=function(b,c){var d=b.panelManager.getOpenPanels();return a.find(d,{props:{id:c}})};var r=function(a,b){var c=q(a,b);if(c){a.panelManager.closePanelByPropKey("id",c.props.id);if(c.props.closeModalBiEvent){a.bi.event(c.props.closeModalBiEvent,c.props.closeModalBiParams)}}};var s=function(a){a("tpa.compPanels.appMarketPanel")};var t=function(a){var b={learn_more:false,origin:"panel",panel_name:"tpa.compPanels.appMarketPanel"};a.panelManager.openHelpCenter(c.EXTERNAL.APP_MARKET,null,b);a.bi.event(d.events.MARKET_HELP_CLICK)};var u=function(a,b){a("tpa.compModals."+b)};var v=function(){return e.urlUtils.origin()};return{openAppMarketModal:n,openAppMarketModalWithAppDefinitionId:p,closeAppMarketModal:u,closeAppMarketModalById:r,closeAppMarket:s,openAppMarketHelp:t,shouldOpenAppMarketTab:f,getAppMarketUrlParams:h,getAppMarketOpenPanelUrlParams:i,getAppMarketPersistedUserPrefs:j,setAppMarketPersistedUserPrefs:k,getAppMarketSessionUserPrefs:l,setAppMarketSessionUserPrefs:m,origin:v}});define("tpa/services/tpaHelpService",["lodash","bluebird"],function(a,b){"use strict";var c={SETTINGS_MODAL:"settings_modal",SETTINGS:"settings",WIDGET:"widget"};var d=function(d,e,f,g){return new b(function(b,h){var i="";if(!a.isEmpty(e)){d.tpa.appMarket.getDataAsync(e).then(function(e){var h=a.find(e.widgets,{widgetId:f});var j=a.get(h,"settings.helpId","");if(g===c.SETTINGS_MODAL){i=a.get(e,"dashboard.helpId",j)}else if(f){if(g===c.SETTINGS){i=j}else if(d.isMobileEditor()){i=a.get(h,"mobileHelpId","")}else{i=a.get(h,"helpId","")}}b(i)},h)}else{h(i)}})};return{getHelpId:d,HELP_END_POINTS:c}});define("tpa/services/mediaDialogService",["lodash","tpa/utils/mediaDialogHandlerUtils"],function(a,b){"use strict";var c=function(c,d,e,f){var g=c.mediaServices.mediaManager;var h=b.convertMediaType(d.data.mediaType,g);var i=d.data.callOnCancel;var j=d.data.multiSelection;var k=function(b){var c;var d=!a.isEmpty(b);if(d){c=e(b)}else if(i){c={wasCancelled:true}}if(c){f(c)}};var l={multiSelect:j,callback:k};g.open(h,l)};return{openMediaDialogByPayloadParsingMethod:c}});define("tpa/handlers/editorSuperAppsHandlers",["lodash","tpa/packagePicker/packagePicker","tpa/utils/mediaDialogHandlerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/services/mediaDialogService"],function(a,b,c,d,e){"use strict";var f=function(b,d,f){var g=function(b){if(!a.isArray(b)){b=[b]}var e=b.map(c.convertMediaManagerResultForSuperApps);e=d.data.multiSelection?e:e[0];return e};e.openMediaDialogByPayloadParsingMethod(b,d,g,f)};var g=function(a){var b=a.selection.getSelectedComponentData();d.trackAppUpgrade(a,b.applicationId)};var h=function(a,c,d){var e=a.selection.getSelectedComponentData();var f=a.tpa.app.getData(e.applicationId);if(a.tpa.app.hasPremiumOffering(f.applicationId)){b.getWixUpgradeUrl(a,f.appDefinitionId,d)}};var i=function(b,c){var d=a.get(c,"data.articleId");var e=a.get(c,"data.type");if(e==="MODAL"){b.panelManager.updatePanelProps("tpa.compModals.tpaSettingsModal",{articleId:d})}else{b.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{articleId:d})}};return{trackAppUpgrade:g,superAppsOpenMediaDialog:f,getWixUpgradeUrl:h,setHelpArticle:i}});define("tpa/handlers/editorTPAHandlers",["lodash","util","tpa/utils/mediaDialogHandlerUtils","tpa/utils/tpaUtils","tpa/packagePicker/packagePicker","tpa/constants/constants","tpa/services/dashboardAppService","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/services/tpaStyleService","tpa/appMarket/utils/appMarketUtils","textControls","tpa/services/tpaHelpService","tpa/services/mediaDialogService","tpa/handlers/editorSuperAppsHandlers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=function(b,c){var d=b.selection.getSelectedComponentData();if(!d){return}var f=b.tpa.app.getData(d.applicationId);if(e.isFullyUpgraded(b,f)){return}var g=true;var h={origin:a.get(c,"data.referrer")||"settings"};var i=a.get(c,"data.premiumIntent");if(i){h.premiumIntent=i}e.startUpgradeFlow(b,f.appDefinitionId,g,h)};var q=function(b,c){var d=b.selection.getSelectedComponentData();if(!d){return}var e=b.tpa.app.getData(d.applicationId);var f={app_id:e.appDefinitionId,instance_id:a.get(c,"compId"),premium_intent:a.get(c,"data.premiumIntent")};b.bi.event(h.events.APP_ENGAGEMENT,f)};var r=function(a,b){var c=a.selection.getSelectedComponentData();if(!c){return}a.tpa.change.trigger.settingsUpdated(c.applicationId,b.data.compId,b.data.message)};var s=function(b,d,e){if(b.tpa.app.isSuperAppByCompId(d.compId)&&d.namespace==="SuperApps.Settings"){o.superAppsOpenMediaDialog(b,d,e)}else{var f=function(b){if(!a.isArray(b)){b=[b]}var e=b.map(c.convertMediaManagerResult);e=d.data.multiSelection?e:e[0];return e};n.openMediaDialogByPayloadParsingMethod(b,d,f,e)}};var t=function(a){var b="panels.focusPanels.siteMembersSettingsPanel";a.panelManager.openPanel(b,{panelName:b},true)};var u=function(a,b,c){j.setStyleParam(a,b.compId,b.data,c);a.tpa.style.setParamOldSDK(b.compId,b.data)};var v=function(a,b,c){g.getDashboardAppUrlAsync(a,c)};var w=function(b,c,d){b.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{isAlive:true,sdkVersion:a.get(c,"data.version")});var e=true;var f=b.tpa.style.get(c.compId,e);f.siteTextPresets=x(f.siteTextPresets);d(f)};var x=function(c){var d=l.constants.CLASS_TO_FONT;return a.transform(c,function(a,c,e){if(d[c.editorKey]){c.displayName=b.translate(d[c.editorKey].displayName);a[e]=c}},{})};var y=function(b,c){b.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{stylesReady:true,sdkVersion:a.get(c,"data.version")})};var z=function(b,c){var d=c.data.placement;if(d==="CENTER"){throw new Error("Invalid position: "+d+". please use a valid position")}var e=c.data.verticalMargin||0;var f=c.data.horizontalMargin||0;var g=b.components.get.byId(c.compId,"masterPage");var h=b.components.properties.get(g);a.assign(h,{placement:d,verticalMargin:e,horizontalMargin:f});b.components.properties.update(g,h);b.tpa.change.trigger.windowPlacement(c)};var A=function(a,b,c){var d=a.components.properties.get(a.selection.getSelectedComponents());if(d){c({placement:d.placement,verticalMargin:parseFloat(d.verticalMargin),horizontalMargin:parseFloat(d.horizontalMargin)})}else{throw new Error("Selected widget is not Glued Widget")}};var B=function(a){if(typeof a==="number"){a=a.toString()+"px"}return a};function C(a,b){var c=d.getOpenedPanel(a.panelManager,b);if(c){a.panelManager.closePanelByName(c.props.panelName)}}var D=function(b,c,d){var e=f.TPA_SETTING_MODAL;var g=b.selection.getSelectedComponentData();var h=b.tpa.app.getData(g.applicationId);var i={url:c.data.url,deviceType:c.deviceType,applicationId:g.applicationId,origCompId:b.selection.getSelectedComponentId()};var j=a.clone(c.data);j.width=B(j.width);j.height=B(j.height);j.onClose=d;C(b,e);if(h.isWixTPA){if(j.isBareMode){delete j.title}j.shouldNotCloseOnBlur=j.shouldNotCloseOnBlur||a.get(j,"options.shouldNotCloseOnBlur",false)}else{j.isBareMode=false;j.shouldNotCloseOnBlur=false}var k=b.tpa.getSettingsModalParams(i,j)||{};var l=g.widgetId||b.tpa.app.getMainSectionWidgetData(h).widgetId;m.getHelpId(b,h.appDefinitionId,l,m.HELP_END_POINTS.SETTINGS_MODAL).then(function(a){k.appDefinitionId=h.appDefinitionId;k.helpId=a;k.widgetId=l;b.panelManager.openPanel(e,k,true)})};var E=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.comp.setExternalId(d,b.data.externalId,c)};var F=function(a,b,c){var d=a.components.get.byId(b.compId);var e=a.tpa.comp.getExternalId(d);c(e)};var G=function(b,c){return a.includes(b.pages.getPageIdList(),c)};function H(b,c,d,e){var f;if(c){if(d){if(a.includes(b.theme.styles.getAllIds(),d)){f=d}}else{var g=b.components.get.byId(e);f=b.components.style.getId(g)}}return f}var I=function(b,c,e){var f=b.selection.getSelectedComponentData();if(f){var g=b.tpa.app.getData(f.applicationId);var h=c.data.componentType;var j=H(b,a.get(c,"data.copyStyle"),a.get(c,"data.styleId"),a.get(c,"compId"));if(h==="WIDGET"){var k=b.pages.getFocusedPageId();var l=c.data.widget.wixPageId||k;if(G(b,l)||c.data.widget.allPages){var m=b.tpa.app.getWidgetDataFromTPAWidgetId(g.appDefinitionId,c.data.widget.tpaWidgetId);if(m){var n=m.widgetId;var o=i.addWidget(b,g.appDefinitionId,{pageId:l,widgetId:n,showOnAllPages:c.data.widget.allPages,styleId:j});if(l!==k){b.pages.navigateTo(l,function(){b.panelManager.closePanelByName("tpa.compPanels.tpaSettings")})}b.waitForChangesApplied(function(){if(e){e(o.id)}J(b,g,o,n)})}else if(e){e({onError:"No widget found."})}}else if(e){e({onError:"pageId was not found."})}}else if(h==="PAGE"){var p=b.tpa.app.getWidgetDataFromTPAPageId(g.appDefinitionId,c.data.page.pageId);if(p&&d.isMultiSectionInstanceEnabled(g,p.widgetId)){var q=i.addMultiSection(b,g.appDefinitionId,{pageId:c.data.page.pageId,title:c.data.page.title,styleId:j});b.pages.navigateTo(q.id,function(){if(e){e(q.sectionId)}b.panelManager.closePanelByName("tpa.compPanels.tpaSettings")});K(b,g,q,p.widgetId)}else if(e){e({onError:"No page found."})}}else if(e){e({onError:"componentType not supported."})}}else if(e){e({onError:"General Error."})}};var J=function(a,b,c,d){var e=a.components.getPage(c);var f=e&&e.id;var g={app_id:b.appDefinitionId,app_site_id:b.instanceId,instance_id:c.id,widget_id:d,page_id:f};a.bi.event(h.events.EXTENSION_ADDED,g)};var K=function(a,b,c,d){var e={app_id:b.appDefinitionId,app_site_id:b.instanceId,instance_id:c.sectionId,widget_id:d,page_id:c.id};a.bi.event(h.events.EXTENSION_ADDED,e)};var L=function(a){var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);a.tpa.appMarket.getDataAsync(c.appDefinitionId).then(function(b){if(b){var c={origin:k.origin(),openMarketOrigin:"settings_panel"};var d=a.tpa.appMarket.getAppReviewsUrl(c,b.slug);k.openAppMarketModal(a.panelManager.openPanel,"appMarketAppModal",{url:d})}})};var M=function(b,c,d){var e=c.data.stretch;var f=b.selection.getSelectedComponents();var g=b.components.layout.isHorizontallyStretchedToScreen(f);if(e){var h=a.get(c,"data.margins");if(N(h)){P(b,h,f,d)}else{d({onError:"Margin values are not valid. Cannot set PCT(%) with PX or VW units."})}}else if(g){b.waitForChangesApplied(function(){R(b,f,d)})}};function N(a){if(a){var b=O(a.left);var c=O(a.right);return b&&c}return true}function O(b){b=b||{};var c=a.isNumber(a.get(b,"px"));var d=a.isNumber(a.get(b,"vw"));var e=a.isNumber(a.get(b,"pct"));return e&&!c&&!d||!e&&c||!e&&d}function P(b,c,d,e){var f=a.get(c,"left")||{};var g=a.get(c,"right")||{};var h={left:Q(f),right:Q(g)};b.components.layout.setDock(d,h);b.waitForChangesApplied(e)}function Q(b){if(a.isNumber(b.pct)){return{pct:b.pct}}return{vw:b.vw||0,px:b.px||0}}function R(a,b,c){var d=a.selection.getSelectedComponentData();var e=a.tpa.app.getDefaultLayout(d.applicationId,d.widgetId);e.height=a.components.layout.get(b).height;a.components.layout.unDock(b);a.waitForChangesApplied(function(){a.components.layout.update(b,e);c()})}var S=function(a,b,c){var d=a.selection.getSelectedComponents();c(a.components.layout.isHorizontallyStretchedToScreen(d))};function T(b,c,d,e){var f=b.tpa.app.getDataByAppDefId(c);if(f&&b.tpa.app.isAppProvisionedOnServer(a.get(f,"applicationId"))&&!b.tpa.app.isPermissionsRevoked(f)){b.tpa.appMarket.getPackages(c,a.get(f,"instanceId"),{currency:d}).then(e,e)}else{e({error:"app is not installed"})}}var U=function(b,c,d){var f=b.selection.getSelectedComponentData();var g=b.tpa.app.getData(a.get(f,"applicationId"));var h=a.get(c,"data.appDefinitionId");var i=a.get(c,"data.currency");if(h&&g.isWixTPA){T(b,h,i,d)}else if(e.isSaveSiteNeeded(b,g)){b.saveManager.saveInBackground(b,function(){b.tpa.appMarket.getPackages(a.get(g,"appDefinitionId"),a.get(g,"instanceId"),{currency:i}).then(d,d)})}else{b.tpa.appMarket.getPackages(a.get(g,"appDefinitionId"),a.get(g,"instanceId"),{currency:i}).then(d,d)}};var V=function(b,c,d){var e=a.get(c,"data.componentId");var f=b.selection.getSelectedComponentData();if(f){var g=b.tpa.app.getData(f.applicationId);if(g){var h=a.find(g.widgets,function(a){if(a.appPage){return a.appPage.id===e}return a.tpaWidgetId===e});if(h){d(b.tpa.comp.isInstalled(h.widgetId));return}}}d(false)};var W=function(){};return{openBillingPage:p,appEngaged:q,postMessage:r,openMediaDialog:s,openSiteMembersSettingsDialog:t,setStyleParam:u,appIsAlive:w,stylesReady:y,getDashboardAppUrl:v,setWindowPlacement:z,getWindowPlacement:A,settingsOpenModal:D,addComponent:I,setExternalId:E,getExternalId:F,setFullWidth:M,isFullWidth:S,openReviewInfo:L,getProducts:U,isComponentInstalled:V,getViewModeInternal:W,toWixDate:W,getCompId:W,getOrigCompId:W,getWidth:W,getLocale:W,getCacheKiller:W,getTarget:W,getInstanceId:W,getSignDate:W,getUid:W,getPermissions:W,getIpAndPort:W,getDemoMode:W,getDeviceType:W,getInstanceValue:W,getSiteOwnerId:W,getImageUrl:W,getResizedImageUrl:W,getAudioUrl:W,getDocumentUrl:W,getSwfUrl:W,getPreviewSecureMusicUrl:W,getStyleParams:W,getStyleColorByKey:W,getColorByreference:W,getEditorFonts:W,getSiteTextPresets:W,getFontsSpriteUrl:W,getStyleFontByKey:W,getStyleFontByReference:W,getSiteColors:W,setUILIBParamValue:W}});define("tpa/handlers/editorSettingsModalHandlersService",["lodash"],function(a){"use strict";function b(b){var c=function(c,d,e){var f=a.clone(e.props);f.closeModalMessage=c.data.message;f.shouldCloseModal=true;b.panelManager.updatePanelProps(e.props.panelName,f)};var d=function(a,c,d){b.panelManager.updatePanelProps(d.name,{width:a.data.width,height:a.data.height})};return{closeWindow:c,resizeWindow:d}}return b});define("tpa/settings/uiLib/fontPickerStyleService",["lodash","textControls","tpa/services/tpaStyleService"],function(a,b,c){"use strict";var d=function(a,b,d,f,g,h,i){var j={key:d,param:{value:e(a,b,d,g,h,i)},type:"font"};c.setStyleParam(a,b,j);a.waitForChangesApplied(function(){var c=a.tpa.style.get(b);f({fontParam:c.style.fonts[j.key]})})};var e=function(a,c,d,e,f,g){var h={style:{italic:false,bold:false,underline:false},family:"arial"};var i=a.tpa.style.get(c);if(i.style&&i.style.fonts&&i.style.fonts[d]){h=i.style.fonts[d];delete h.displayName;delete h.value}switch(e){case"theme":var j=a.tpa.style.getNameToFontsKeyMap();var k=j[f];var l=a.theme.fonts.get(f);var m=b.fontUtils.parseStyleFont(l,a.theme.fonts.getAll(),a.theme.colors.getAll());h.preset=k;h.editorKey=f;h.displayName=g;h.size=m.size;h.family=m.family.toLowerCase();h.style={bold:m.bold,italic:m.italic,underline:false};break;case"family":h.preset="Custom";h.family=f;break;case"size":h.preset="Custom";h.size=f;break;case"bold":h.preset="Custom";h.style.bold=f;break;case"italic":h.preset="Custom";h.style.italic=f;break;case"underline":h.preset="Custom";h.style.underline=f;break}h.fontStyleParam=true;return h};return{onStyleChange:d}});define("tpa/settings/uiLib/colorPickerStyleService",["lodash","tpa/services/tpaStyleService"],function(a,b){"use strict";var c=function(a,c,g,h,i){var j=a.tpa.style.get(c)||{};var k=j.style&&j.style.colors[g]||{};var l=e(k.value);var m=l?+l:1;var n={key:g,param:{value:{opacity:m}},type:"color"};if(d(i)){n.param.value.rgba=f(i,m)}else{n.param.value.color={name:i}}b.setStyleParam(a,c,n);a.waitForChangesApplied(function(){j=a.tpa.style.get(c);if(j.style&&j.style.colors){h({colorParam:j.style.colors[n.key]})}})};var d=function(b){if(a.isUndefined(b)){return false}if(a.includes(b,"#")){return true}return false};var e=function(a){var b=/^rgba\(((\d+),\s*){3}(0?\.\d+)\)$/;if(b.test(a)){var c=a.split(",");var d=c[3];return d.split(")")[0]}return 1};var f=function(b,c){var d;if(a.includes(b,"rgba")){var e=b.split(",");e[3]=c+")";d=e.join(",")}else{b=b.replace("#","");var f=parseInt(b.substring(0,2),16);var g=parseInt(b.substring(2,4),16);var h=parseInt(b.substring(4,6),16);d="rgba("+f+","+g+","+h+","+c+")"}return d};return{onStyleChange:c}});define("tpa/handlers/editorUILibHandlers",["jquery","lodash","tpa/services/tpaStyleService","tpa/settings/uiLib/fontPickerStyleService","tpa/settings/uiLib/colorPickerStyleService"],function(a,b,c,d,e){"use strict";var f=function(b){var c=a("#tpaSettingsFrame").offset();if(c){return{left:(b.left||0)+(c.left||0),top:(b.top||0)+(c.top||0)}}return{left:b.left,top:b.top}};var g=function(a,c,d){var e=a.tpa.style.get(c);if(e&&b.has(e,"style.fonts")){return e.style.fonts[d]}};var h=function(a,c,d){var g=f(b.pick(c.data,["top","left"]));var h=c.data.wixParam;var i=c.compId;var l=c.data.color||"#ffffff";a.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{
value:l,onChange:e.onStyleChange.bind(null,a,i,h,d),onClose:k.bind(null,d),siteCustomColors:a.theme.colors.getCustomUsedInSkins(),sessionStorage:a.userPreferences.session,history:null,palettePresets:a.theme.colors.getColorPresets(),updateSitePalette:j.bind(null,a,i,d),previewOnHover:false,top:g.top,left:g.left},true)};var i=function(a,c,e){var h=c.data.wixParam;var i=c.compId;var j=f(b.pick(c.data,["top","left"]));a.panelManager.openPanel("tpaPanels.uiLib.uiLibTextParamDesignPanel",{title:c.data.title||"Font picker",hideTheme:c.data.hideTheme||false,hideFont:c.data.hideFont||false,hideSize:c.data.hideSize||false,hideStyle:c.data.hideStyle||false,top:j.top,left:j.left,fontMaxSize:c.data.fontMaxSize,fontMinSize:c.data.fontMinSize,compStyle:g(a,i,h),onStyleChange:d.onStyleChange.bind(null,a,i,h,e)},true)};var j=function(a,b,c,d){a.theme.colors.update(d);a.waitForChangesApplied(function(){var d=a.tpa.style.get(b);if(d.style&&d.style.colors){c({paletteChange:true,colors:d.style.colors})}})};var k=function(a){a({panelClose:true})};return{openColorPicker:h,openFontPicker:i}});define("tpa/handlers/editorPublicDataHandlers",[],function(){"use strict";var a=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.set(d,b.data.key,b.data.value,b.data.scope,c)};var b=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=a.selection.getSelectedComponentData();a.tpa.data.app.get(d.applicationId,b.data.key,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.get(e,b.data.key,c)}};var c=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.remove(d,b.data.key,b.data.scope,c)};var d=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=a.selection.getSelectedComponentData();a.tpa.data.app.getMulti(d.applicationId,b.data.keys,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.getMulti(e,b.data.keys,c)}};return{setValue:a,removeValue:c,getValue:b,getValues:d}});define("tpa/common/editorTPAPostMessageCommon",["lodash"],function(a){"use strict";var b={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"};var c=function(b,c,d){if(a.isUndefined(b)){return}var e="";try{e=JSON.stringify(c)}catch(a){return}if(!b.postMessage){b=b.contentWindow}b.postMessage(e,d||"*")};var d=function(d,e){var f=["openColorPicker","openFontPicker"];var g=b.TPA_RESPONSE;if(a.includes(f,e.type)){g=b.UI_LIB_RESPONSE}return function(a){try{c(d,{intent:g,callId:e.callId,type:e.type,res:a,status:true})}catch(a){}}};var e=function a(c){return(c.intent===b.TPA_MESSAGE||c.intent===b.TPA_MESSAGE2)&&!f(c)};var f=function(a){return a.compId==="[UNKNOWN]"};var g=function(a){return a.replace(b.PINGPONG_PREFIX,"")};var h=function(a,b,c){var f;try{if(c.data){f=JSON.parse(c.data)}else if(c.originalEvent&&c.originalEvent.data){c=c.originalEvent;f=JSON.parse(c.data)}}catch(a){return}if(f&&e(f)){b(a,f,d(c.source,f))}};return{Intents:b,callPostMessage:c,generateResponseFunction:d,isTPAMessage:e,fixOldPingPongMessageType:g,handleTPAMessage:h}});define("tpa/services/tpaPostMessageService",["lodash","experiment","tpa/handlers/editorTPAHandlers","tpa/handlers/editorSettingsModalHandlersService","tpa/handlers/editorUILibHandlers","tpa/handlers/editorPublicDataHandlers","tpa/handlers/editorSuperAppsHandlers","tpa/common/editorTPAPostMessageCommon","tpa/utils/tpaUtils","tpa/constants/constants"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(k,l){var m=d(k);var n=function(a){return function(b,c){return Boolean(a[c.type])}};var o=function(a,b){return Boolean(g[b.type])&&a.tpa.app.isSuperAppByCompId(b.compId)};var p=[{test:n(f),handlers:f},{test:o,handlers:g},{test:n(c),handlers:c},{test:n(e),handlers:e}];var q=function(b,c){var d=a.find(p,function(a){return a.test(b,c)});if(d){return d.handlers[c.type]}};var r=function(c,d,e){a.assign(d,{compId:c.selection.getSelectedComponentId()});var f=i.getOpenedPanel(k.panelManager,j.TPA_SETTING_MODAL);if(f&&m[d.type]){m[d.type].call(this,d,e,f);if(b.isOpen("se_sendSdkMethodCallBI")){c.tpa.bi.sendBIEvent(d,"editor")}}else{var g=q(c,d);if(g){g.call(this,c,d,e);if(b.isOpen("se_sendSdkMethodCallBI")){c.tpa.bi.sendBIEvent(d,"editor")}}else{c.tpa.handlers(a.assign(d,{originFrame:"editor"}),e)}}};function s(){l("message",h.handleTPAMessage.bind(this,k,r),false)}return{addListenerToTpaMessage:s}}return k});define("tpa/handlers/editorTPAPreviewHandlers",["lodash","util","tpa/constants/constants","tpa/services/tpaHelpService"],function(a,b,c,d){"use strict";var e=function(a,b){a.preview.togglePreview();var c=a.tpa.app.getFirstAppCompPageId(b.data);var e=a.components.get.byId(c.compId,c.pageId);a.selection.selectComponentByCompRef(e);var f=a.selection.getSelectedComponentData();var g=a.tpa.app.getData(f.applicationId);var h=f.widgetId||a.tpa.app.getMainSectionWidgetData(g).widgetId;d.getHelpId(a,g.appDefinitionId,h,d.HELP_END_POINTS.WIDGET).then(function(b){a.panelManager.openHelpCenter(b,null,{origin:"preview",component:"TPAWidget"})})};var f=function(a,b,c){var d=a.getPreviewMode()?"preview":"editor";return c(d)};var g=function(b,c){if(b.isDesktopEditor()&&b.getPreviewMode()){var d=c.data.pageId;var e=c.data.compId;var f=[b.pages.getFocusedPageId()];if(!b.pages.popupPages.isPopupOpened()){f.push(b.pages.getMasterPageId())}if(!a.includes(f,d)){b.pages.navigateTo(d,h.bind(undefined,b,e,d))}else{h(b,e,d)}}};var h=function(a,b,c){a.preview.togglePreview();var d=a.components.get.byId(b,c);a.selection.selectComponentByCompRef(d);var e={selectedComponent:a.selection.getSelectedComponents(),origCompId:b};a.panelManager.openPanel("tpa.compPanels.tpaSettings",e)};var i=function(a){a.selection.deselectComponents()};return{openHelp:e,getViewMode:f,openSettingsDialog:g,deselectComponent:i}});define("tpa/services/tpaPreviewPostMessageService",["lodash","tpa/handlers/editorTPAPreviewHandlers","tpa/common/editorTPAPostMessageCommon"],function(a,b,c){"use strict";var d=function(a,b){var c;try{if(b.data){c=JSON.parse(b.data)}else if(b.originalEvent&&b.originalEvent.data){b=b.originalEvent;c=JSON.parse(b.data)}}catch(a){return}if(c&&g(c)&&h(c)){e(a,c,f(b.source,c))}};var e=function(a,c,d){b[c.type].call(this,a,c,d)};var f=function(a,b){return function(d){var e={intent:"TPA_PREVIEW",callId:b.callId,type:b.type,res:d,status:true};c.callPostMessage(a,e)}};var g=function(a){return a.intent==="TPA_PREVIEW"};function h(a){return Boolean(b[a.type])}var i=function(a){window.addEventListener("message",d.bind(this,a),false)};return{init:i}});define("tpa/appMarket/services/appMarketTabService",["lodash","util","tpa/appMarket/utils/appMarketUtils"],function(a,b,c){"use strict";var d="tpa.compPanels.appMarketPanel";var e=function(a){var d=c.shouldOpenAppMarketTab();if(d){f({urlParams:{openMarketOrigin:b.url.getParameterByName("referral_info")}},a)}};var f=function(b,e){b=b||{};b.urlParams=b.urlParams||{};var f=c.getAppMarketOpenPanelUrlParams();a.merge(b.urlParams||{},f);e(d,b)};var g=function(a){a(d)};return{openAppMarketTab:f,closeAppMarketTab:g,openAppMarketTabFromUrlParamIfNeeded:e}});define("tpa/services/pendingAppsService",["lodash","tpa/appMarket/utils/appMarketUtils"],function(a,b){"use strict";var c="tpa.compPanels.appMarketPanel";var d=function(c,d){var e=b.getAppMarketPersistedUserPrefs(c);if(e){var f=e.removedPendingApps||[];var g=a(d).keyBy("appDefinitionId").omit(f).value();d=a.values(g)}return d};var e=function(a){var b=a.tpa.getPendingApps();return d(a,b)};var f=function(a){return a.tpa.getPremiumPendingApps()};var g=function(b){return a.size(b.tpa.pending.getPendingApps())};var h=function(b){var c=e(b);var d=f(b);return a.union(c,d)};var i=function(a){a.leftBar.notifications.setCount(c,g(a))};var j=function(a,b){a.tpa.pending.dismiss(b);i(a)};var k=function(a,b){a.tpa.pending.add(b);i(a)};return{getPendingApps:h,getPendingAppsCount:g,updateNotification:i,dismiss:j,add:k}});define("tpa/settings/settings",["lodash","util","panels","experiment","tpa/superApps/superAppsConstants","tpa/appMarket/utils/appMarketUtils"],function(a,b,c,d,e,f){"use strict";var g={en:116,da:120,sv:120,es:120,tr:128,pl:128,no:128,it:128,fr:128,de:128,ru:128,ja:138,pt:138,nl:138,ko:138};var h=288;function i(b){return a.has(b,"settings.languages")?b.settings.languages:[]}function j(b,c){return a.includes(c,b)}function k(a){return g[a]+h}function l(a,b){var c=i(b);return j(a,c)?k(a):k("en")}function m(b,c,d,e,g){var h=b.appDefinitionId;if(b.demoMode&&c.by!=="Wix"){var i=d.tpa.appMarket.getPermissionsUrl({appName:a.get(c,"slug")},h);i=i.concat("&demoMode=true");f.openAppMarketModal(d.panelManager.openPanel,"appMarketPermissionsModal",{url:i})}else{var j=a.find(c.widgets,{widgetId:g});var k=n(b,g);var m=k?l(d.generalInfo.getLanguage(),j):b.settingsWidth;p(d,e,{width:m,isNewVersion:k})}}var n=function(b,c){var e=b.appDefinitionId;var f=b.widgets&&b.widgets[c];var g=a.get(f,"settings");if(a.get(g,"version")!==1){if(a.get(g,"urlV2")){if(a.get(g,"abTest")){if(d.isOpen("SE_"+e.replace(/-/g,"_"))){return true}}else{return true}}}return false};var o=function(a,b){b=b||a.selection.getSelectedComponents();var c=a.components.data.get(b);var d=a.tpa.app.getData(c.applicationId);var e=d.appDefinitionId;if(e){a.tpa.appMarket.getDataAsync(e,{verticalsPremium:true}).then(function(e){var f=c.widgetId||a.tpa.app.getMainSectionWidgetData(d).widgetId;m(d,e,a,b,f)})}else{p(a,b)}};var p=function(b,c,d){var e="tpa.compPanels.tpaSettings";var f=q(e,b.panelManager);if(!f){var g=a.merge({selectedComponent:c,origCompId:b.selection.getSelectedComponentId()},d);b.panelManager.openPanel(e,g)}};var q=function(b,c){var d=c.getOpenPanels();return a.find(d,{name:b})};return{open:o}});define("tpa/services/navigateAndOpenAppService",["lodash","util","tpa/appMarket/services/appMarketTabService","tpa/settings/settings","blog","core"],function(a,b,c,d,e,f){"use strict";var g="61f33d50-3002-4882-ae86-d319c1a249ab";var h=function(a){var d=b.url.getParameterByName("etpa");if(d){var e=a.tpa.app.getFirstAppCompPageId(d);if(e){j(a,d)}else{c.openAppMarketTab({urlParams:{openAppDefId:d,openMarketOrigin:b.url.getParameterByName("referral_info")}},a.panelManager.openPanel)}}};var i=function(a,b){var c=a.components.get.byId(b.compId,b.pageId);a.selection.selectComponentByCompRef(c);d.open(a,c)};var j=function(a,b){var c=a.pages.getFocusedPageId();if(b===g){var d=e.getBlogPageId(a);if(d!==c){a.pages.navigateTo(d)}a.leftBar.collapseMenu();a.panelManager.openPanel(f.constants.SUPER_APPS.BLOG_PANEL_NAME,{});return}var h=a.tpa.app.getFirstAppCompPageId(b);if(h){if(h.pageId!==c&&h.pageId!=="masterPage"){a.pages.navigateTo(h.pageId,function(){i(a,h)})}else{i(a,h)}}};return{handleIfComingFromETPA:h,navigateAndOpenSettingsForAppDefId:j}});define("tpa/componentsData/addCompKeyToCompTypeMap",[],function(){"use strict";var a={addAccordion:"tpa.viewer.components.Accordion",addAdminLoginButton:"wysiwyg.viewer.components.AdminLoginButton",addAudioPlayer:"wysiwyg.viewer.components.AudioPlayer",addBgImageStrip:"wysiwyg.viewer.components.BgImageStrip",addCollage:"tpa.viewer.components.Collage",addContactForm:"wysiwyg.viewer.components.ContactForm",addDocumentMedia:"wysiwyg.viewer.components.documentmedia.DocumentMedia",addFacebookComment:"wysiwyg.viewer.components.WFacebookComment",addFacebookLike:"wysiwyg.viewer.components.WFacebookLike",addDisqusComment:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",addFacebookShare:"wysiwyg.viewer.components.FacebookShare",addFlashComponent:"wysiwyg.viewer.components.FlashComponent",addFreestyle:"tpa.viewer.components.Freestyle",addGoogleMap:"wysiwyg.viewer.components.GoogleMap",addGooglePlusOne:"wysiwyg.viewer.components.WGooglePlusOne",addHtmlComponent:"wysiwyg.viewer.components.HtmlComponent",addHoneycomb:"tpa.viewer.components.Honeycomb",addImpress:"tpa.viewer.components.Impress",addItunesButton:"wysiwyg.viewer.components.ItunesButton",addLoginButton:"wysiwyg.viewer.components.LoginButton",addMasonry:"tpa.viewer.components.Masonry",addMatrixGallery:"wysiwyg.viewer.components.MatrixGallery",addPaginatedGridGallery:"wysiwyg.viewer.components.PaginatedGridGallery",addPayPalButton:"wysiwyg.viewer.components.PayPalButton",addPinterestFollow:"wysiwyg.viewer.components.PinterestFollow",addSliderGallery:"wysiwyg.viewer.components.SliderGallery",addSlideShowGallery:"wysiwyg.viewer.components.SlideShowGallery",addSocialBar:"wysiwyg.viewer.components.LinkBar",addSoundCloud:"wysiwyg.viewer.components.SoundCloudWidget",addStripShowcase:"tpa.viewer.components.StripShowcase",addStripSlideshow:"tpa.viewer.components.StripSlideshow",addSvgShape:"wysiwyg.viewer.components.svgshape.SvgShape",addThumbnails:"tpa.viewer.components.Thumbnails",addTPA3DCarousel:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",addTPA3DGallery:"wysiwyg.viewer.components.tpapps.TPA3DGallery",addTwitterFollow:"wysiwyg.viewer.components.WTwitterFollow",addTwitterTweet:"wysiwyg.viewer.components.WTwitterTweet",addVideo:"wysiwyg.viewer.components.Video",addVKShare:"wysiwyg.viewer.components.VKShareButton"};var b=function(b){return a[b]||b};return{getCompType:b}});define("tpa/componentsData/componentsDefaultData",["lodash"],function(a){"use strict";var b={"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{layout:{width:803,height:272},componentType:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:true,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:false,transDuration:1,bidirectional:true,reverse:false,showAutoplay:true,showNavigation:true,showCounter:true,showExpand:false,showSocial:false},style:"tfc1"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{layout:{width:790,height:237},componentType:"wysiwyg.viewer.components.tpapps.TPA3DGallery",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:true,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:false,transDuration:1,bidirectional:true,reverse:false,showAutoplay:true,showNavigation:true,showCounter:true,showExpand:false,showSocial:false},style:"tfg1"},"tpa.viewer.components.Accordion":{layout:{width:473,height:270},componentType:"tpa.viewer.components.Accordion",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"AccordionProperties",metaData:{schemaVersion:"1.0"},font:"arial",descFont:"arial",alignText:"left",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",borderWidth:0,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",textBackgroundColor:"#FFFFFF",alphaTextBackgroundColor:"0.8",borderColor:"#FFFFFF",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Accordion",pageId:"",compId:"i6rzx2vz",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_11",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.8"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAAccordionSkin"}},"wysiwyg.viewer.components.AdminLoginButton":{layout:{width:125,height:20},componentType:"wysiwyg.viewer.components.AdminLoginButton",data:{type:"LinkableButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},label:"Webmaster Login"},props:{type:"ButtonProperties",metaData:{schemaVersion:"1.0"},align:"center",margin:0},style:"admb0"},"wysiwyg.viewer.components.PaginatedGridGallery":{layout:{width:273,height:204},componentType:"wysiwyg.viewer.components.PaginatedGridGallery",style:"pagg1"},"wysiwyg.viewer.components.AudioPlayer":{layout:{width:42,height:40},componentType:"wysiwyg.viewer.components.AudioPlayer",style:"ap1"},"tpa.viewer.components.Collage":{layout:{width:631,height:846},componentType:"tpa.viewer.components.Collage",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"CollageProperties",metaData:{schemaVersion:"1.0"},font:"arial",alignText:"center",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",minImageSize:1,maxImageSize:3,margin:5,fitToScreenWidth:false,showNavButtons:true,orientation:"vertical",layoutSeed:50,numOfCells:5,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7"},style:{componentClassName:"tpa.viewer.components.Collage",pageId:"",compId:"i6rzzs7n",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.7"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPACollageSkin"}},"wysiwyg.viewer.components.documentmedia.DocumentMedia":{layout:{width:70,height:90},componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",data:{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Document Title",uri:"http://static.parastorage.com/services/skins/2.1144.0/images/wysiwyg/core/themes/editor_web/add_image_thumb.png",width:0,height:0,alt:"",link:{type:"DocumentLink"}},props:{type:"DocumentMediaProperties",metaData:{schemaVersion:"1.0"},showTitle:true},style:"dm1"},"wysiwyg.viewer.components.WFacebookComment":{layout:{width:555,height:116},componentType:"wysiwyg.viewer.components.WFacebookComment",props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:555,colorScheme:"light",canBeShownOnAllPagesBug:true},data:{type:"WFacebookComment",urlFormat:"hashBang"},style:"fbc1"},"wysiwyg.common.components.disquscomments.viewer.DisqusComments":{type:"Component",skin:"wysiwyg.common.components.disquscomments.viewer.skins.DisqusCommentsSkin",layout:{width:500,height:325,x:0,y:1,scale:1,rotationInDegrees:0},componentType:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",data:{type:"DisqusComments",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},disqusId:""},style:"disq2"},"wysiwyg.viewer.components.FacebookShare":{layout:{width:71,height:30,rotationInDegrees:0,scale:1,fixedPosition:false},componentType:"wysiwyg.viewer.components.FacebookShare",data:{type:"FacebookShareButton",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},urlChoice:"Current page",urlFormat:"hashBang",label:"Share"},skin:"skins.viewer.facebookshare.FacebookShareSkin",style:"fs1"},"wysiwyg.viewer.components.WFacebookLike":{layout:{width:250,height:40},data:{type:"WFacebookLike",urlFormat:"hashBang"},componentType:"wysiwyg.viewer.components.WFacebookLike",style:"fbl1"},"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":{layout:{width:280,height:575},componentType:"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",data:{type:"FacebookLikeBox",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},facebookPageId:"wix",colorScheme:"light",showFaces:true,showStream:true,showBorder:true,showHeader:true},props:{type:"FacebookLikeBoxProperties",metaData:{schemaVersion:"1.0"},transparentBg:false},style:"FacebookLikeBox_1"},"wysiwyg.viewer.components.FlashComponent":{layout:{width:128,height:128},componentType:"wysiwyg.viewer.components.FlashComponent",data:{type:"LinkableFlashComponent",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},uri:"",placeHolderImage:{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Default Flash",uri:"7ff659c252dfd1ca5c76533695cb9611.wix_mp",description:"Some description here",width:128,height:128,alt:""}},props:{type:"FlashComponentProperties",metaData:{schemaVersion:"1.0"},displayMode:"original"},style:"swf1"},"tpa.viewer.components.Freestyle":{layout:{width:602,height:600},componentType:"tpa.viewer.components.Freestyle",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"FreestyleProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"zoomMode",layoutSeed:50,cropAndFitStage:"fit",imageDecoration:"none",borderWidth:3,orientation:"horizontal",applyRotationInLayout:true,borderColor:"#2F2E2E",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Freestyle",pageId:"",compId:"i6s02gma",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",
color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAFreestyleSkin"}},"wysiwyg.viewer.components.WGooglePlusOne":{layout:{width:250,height:24},componentType:"wysiwyg.viewer.components.WGooglePlusOne",style:"gp1"},"wysiwyg.viewer.components.GoogleMap":{layout:{width:500,height:400},componentType:"wysiwyg.viewer.components.GoogleMap",style:"gm1"},"wysiwyg.viewer.components.MatrixGallery":{layout:{width:675,height:712},componentType:"wysiwyg.viewer.components.MatrixGallery",style:"mg1"},"tpa.viewer.components.Honeycomb":{layout:{width:550,height:271},componentType:"tpa.viewer.components.Honeycomb",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"",width:800,height:594},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"",width:1e3,height:673},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"",width:2294,height:1524},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"",width:555,height:580},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"",width:600,height:900},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"",width:700,height:525},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"",width:1e3,height:1500},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"",width:700,height:814},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tropical Berries close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"",width:803,height:1e3},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"",width:750,height:1e3}]},props:{type:"HoneycombProperties",metaData:{schemaVersion:"1.0"},expandEnabled:false,galleryImageOnClickAction:"zoomMode",font:"arial",alignText:"left",textMode:"titleAndDescription",margin:1,numOfColumns:4,layoutSeed:50,rolloverAnimation:"colorOnly",imageShape:"hexagon",imageScale:"x1",textColor:"#30BDFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7",holesColor:"#FFFFFF",alphaHolesColor:"1"},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i6s04hn3",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}},"wysiwyg.viewer.components.HtmlComponent":{layout:{width:200,height:200},componentType:"wysiwyg.viewer.components.HtmlComponent",data:{type:"HtmlComponent",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},url:"",sourceType:"external",freezeFrame:false},style:"htco1"},"tpa.viewer.components.Impress":{layout:{width:980,height:390},componentType:"tpa.viewer.components.Impress",data:{type:"ImageList",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"ImpressProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:false,galleryImageOnClickAction:"zoomMode",cropAndFitStage:"crop",transition:"random",showPagination:true,bcgColor1:"#A0A09F",alphaBcgColor1:"1",bcgColor2:"#30BDFF",alphaBcgColor2:"1",bcgColor3:"#41BAAE",alphaBcgColor3:"1",bcgColor4:"#DE5021",alphaBcgColor4:"1",bcgColor5:"#DEC328",alphaBcgColor5:"1",textColor:"#BAE9FF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#605E5E",alphaTextBackgroundColor:"1"},style:{componentClassName:"tpa.viewer.components.Impress",pageId:"",compId:"i6s05c77",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1","alpha-color6":"1","alpha-color7":"1","alpha-color8":"1",color1:"color_13",color2:"color_18",color3:"color_23",color4:"color_28",color5:"color_33",color6:"color_16",color7:"color_1",color8:"color_14","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",color6:"theme",color7:"theme",color8:"theme"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAImpressSkin"}},"wysiwyg.viewer.components.ItunesButton":{layout:{width:110,height:40},componentType:"wysiwyg.viewer.components.ItunesButton",data:{type:"ItunesButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},downloadUrl:""},props:{type:"ItunesButtonProperties",metaData:{schemaVersion:"1.0"},language:"en",openIn:"_blank"},style:"ib1"},"tpa.viewer.components.Masonry":{layout:{width:980,height:1450},componentType:"tpa.viewer.components.Masonry",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"0bfb60ff6550b68a849ada091f254158.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:1e3},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"d5281560853f147420a877b24be7daec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:536},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray Of Light",uri:"84b2ba7d33c6c76e0976354bfeb53223.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:800},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil Forest",uri:"0560932b578ed39cc5ff0d4f9b257496.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom ",uri:"c18ef262eff1988801adc0c6cd9f69c2.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:511},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"ae505cb9630a240ff39bd7e3a6a30e5b.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:700,height:525},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"bab38d8e951657c1122c9ef971e512b3.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"bbb19657224f3880b7af258ffe1329ec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:532},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:1067}]},props:{type:"MasonryProperties",metaData:{schemaVersion:"1.0"},font:"arial",galleryImageOnClickAction:"zoomMode",numCols:3,margin:25,textMode:"titleAndDescription",alignText:"left",boxShadowIsOn:true,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.33)",textColor:"#000000",alphaTextColor:"1",descriptionColor:"#000000",alphaDescriptionColor:"1",textBackgroundColor:"#ffffff",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#000000",alphaBackgroundMouseoverColor:"0.4",textButtonColor:"#2F2E2E",alphaTextButtonColor:"1"},style:{componentClassName:"tpa.viewer.components.Masonry",pageId:"",compId:"i6s06d18",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"0.4","alpha-color5":"1",color1:"#000000",color2:"#000000",color3:"#ffffff",color4:"#000000",color5:"color_15",version:"2","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"value",color2:"value",color3:"value",color4:"value",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAMasonrySkin"}},"wysiwyg.viewer.components.LoginButton":{layout:{width:190,height:46},componentType:"wysiwyg.viewer.components.LoginButton",data:{type:"LoginButton",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},language:"en"},style:"lgn0"},"wysiwyg.viewer.components.PayPalButton":{layout:{width:170,height:47},componentType:"wysiwyg.viewer.components.PayPalButton",data:{type:"PayPalButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},merchantID:""},props:{type:"PayPalButtonProperties",metaData:{schemaVersion:"1.0"},buttonType:"buy",itemName:"",itemID:"",organizationName:"",organizationID:"",amount:"",currencyCode:"USD",target:"_blank",showCreditCards:true,smallButton:false},style:"ppb0"},"wysiwyg.viewer.components.PinterestFollow":{layout:{width:40,height:20},componentType:"wysiwyg.viewer.components.PinterestFollow",data:{type:"PinterestFollow",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},urlChoice:"www.pinterest.com/wixcom/",label:"Pinterest"},style:"pf1"},"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":{layout:{width:40,height:20},componentType:"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt",data:{type:"PinterestPinIt",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},uri:"",urlFormat:"hashBang",description:"Check it out!"},props:{type:"PinterestPinItProperties",metaData:{schemaVersion:"1.0"},size:"small",color:"gray",counterPosition:"none"},style:"PinterestPinIt_1"},"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":{layout:{width:237,height:377,x:385,y:6358},componentType:"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",data:{type:"PinItPinWidget",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},pinId:"http://www.pinterest.com/pin/204421270560540859/"},style:"PinItPinWidget_1"},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{layout:{width:280,height:68},componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",style:"SingleAudioPlayer_1"},"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":{layout:{width:56,height:24},componentType:"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton",data:{type:"SkypeCallButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},skypeName:"",buttonType:"call"},props:{type:"SkypeCallButtonProperties",metaData:{schemaVersion:"1.0"},imageSize:"medium",imageColor:"blue"},style:"SkypeCallButton_1"},"wysiwyg.viewer.components.SliderGallery":{layout:{width:480,height:160},componentType:"wysiwyg.viewer.components.SliderGallery",style:"sg1"},"wysiwyg.viewer.components.SlideShowGallery":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.SlideShowGallery",style:"ssg1"},"wysiwyg.viewer.components.LinkBar":{layout:{width:105,height:30},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Wix Facebook page",uri:"b1cd13f9d4dfb1450bbb325285106177.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},url:"http://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Wix Twitter page",uri:"01113281ebb7dfb57a8dc2a02eb1cb92.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Wix Google+ page",uri:"806f5f56d9a7b8849f2f2ea71ff5c0cc.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}]},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:30,spacing:5,bgScale:1,orientation:"HORIZ"},style:"lb1"},"wysiwyg.viewer.components.SoundCloudWidget":{layout:{width:482,height:171},componentType:"wysiwyg.viewer.components.SoundCloudWidget",data:{type:"SoundCloudWidget",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},url:"",showArtWork:true,autoPlay:false},style:"scw1"},"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":{layout:{width:300,height:56},componentType:"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow",data:{type:"SpotifyFollow",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},uri:""},props:{type:"SpotifyFollowProperties",metaData:{schemaVersion:"1.0"},size:"large",theme:"light",showFollowersCount:true},style:"SpotifyFollow_1"},"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":{layout:{width:250,height:82},componentType:"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer",data:{type:"SpotifyPlayer",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},uri:""},props:{type:"SpotifyPlayerProperties",metaData:{schemaVersion:"1.0"},size:"compact",color:"black",style:"list"},style:"SpotifyPlayer_1"},"tpa.viewer.components.StripShowcase":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripShowcase",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"StripShowcaseProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"disabled",cropAndFitStage:"fit",imageScale:"4:3",imageMargin:5,showThumbnails:true,thumbsScale:"4:3",thumbsMargin:5,autoplay:false,autoplayInterval:5,arrowMode:false},style:{componentClassName:"tpa.viewer.components.StripShowcase",pageId:"",compId:"i6s28d55",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_1",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"0.5","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripShowcaseSkin"}},"tpa.viewer.components.StripSlideshow":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripSlideshow",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"27f904ad057a38ab22a806fba8051170.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"632212ab58f9280a24539800cf453443.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"f1aba941244eda43f8ed7116ab2a98d4.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lily Pond",uri:"60562c9106f4ca8ba07bb4d430935993.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600}]},props:{type:"StripSlideshowProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:false,transDuration:1,transition:"scroll",titleColor:"#30BDFF",alphaTitleColor:"1",descriptionColor:"#2F2E2E",alphaDescriptionColor:"1",backgroundColor:"#FFFFFF",alphaBackgroundColor:"0.75"},style:{componentClassName:"tpa.viewer.components.StripSlideshow",pageId:"",compId:"i6s2b7bp",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_18",color2:"color_15",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.75"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripSlideshowSkin"}},"tpa.viewer.components.Thumbnails":{layout:{width:980,height:500},componentType:"tpa.viewer.components.Thumbnails",data:{type:"ImageList",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},items:[{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:false,schemaVersion:"2.0",isHidden:false},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"ThumbnailsProperties",metaData:{schemaVersion:"1.0"},font:"arial",cropAndFitStage:"crop",componentScale:"4:3",margin:5,textMode:"titleAndDescription",arrowMode:true,alignText:"left",autoplayInterval:5,autoplay:false,transDuration:1,transition:"crossFade",thumbnailsGravity:"bottom",galleryImageOnClickAction:"disabled",textColor:"#FFFFFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"0.6"},style:{componentClassName:"tpa.viewer.components.Thumbnails",pageId:"",compId:"i6s2bmjp",styleType:"custom",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.6"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAThumbnailsSkin"}},"wysiwyg.viewer.components.WTwitterFollow":{layout:{width:183,height:22},componentType:"wysiwyg.viewer.components.WTwitterFollow",data:{type:"TwitterFollow",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},accountToFollow:"wix"},props:{type:"WTwitterFollowProperties",metaData:{schemaVersion:"1.0"},showCount:true,width:100,dataLang:"en",showScreenName:true},style:"tf1"},"wysiwyg.viewer.components.WTwitterTweet":{layout:{width:100,height:20},componentType:"wysiwyg.viewer.components.WTwitterTweet",data:{type:"TwitterTweet",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},defaultText:"",urlFormat:"hashBang",accountToFollow:""},style:"twt1"},"wysiwyg.viewer.components.Video":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.Video",style:"v1"},"wysiwyg.viewer.components.VKShareButton":{layout:{width:100,height:21},componentType:"wysiwyg.viewer.components.VKShareButton",data:{type:"VKShareButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},style:"Button",urlFormat:"hashBang",text:"Share"},props:{type:"VKShareProperties",metaData:{schemaVersion:"1.0"},rightAngles:false},style:"vks1"},"wysiwyg.viewer.components.ContactForm":{layout:{width:480,height:180},componentType:"wysiwyg.viewer.components.ContactForm",style:"cf1"},"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":{layout:{width:212,height:55},componentType:"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",data:{type:"YouTubeSubscribeButton",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},youtubeChannelId:"wix"},props:{type:"YouTubeSubscribeButtonProperties",metaData:{schemaVersion:"1.0"},layout:"full",theme:"light"},style:"YouTubeSubscribeButton_1"}};var c=function(c){return a.cloneDeep(b[c])||{}};return{getComponentDefaultData:c}});define("tpa/componentsData/componentsDefaultDataGenerator",["lodash","jquery","baseUI","addPanelInfra","tpa/componentsData/addCompKeyToCompTypeMap","tpa/componentsData/componentsDefaultData"],function(a,b,c,d,e,f){"use strict";function g(a){var d=a.siteSegments.getPagesContainer();var e=a.siteSegments.layout.get(d);return{x:e.width/2,y:b(window).scrollTop()+window.innerHeight/2-e.y-c.uiConstants.TOPBAR_HEIGHT}}function h(b,c){var d={};a.forIn(c,function(c,e){if(a.includes(["width","height"],e)){if(b){d[e]=b.stageLayout?b.stageLayout[e]:b.panelLayout[e]}else{d[e]=c}}});return d}function i(a,b){var c=g(a);var d={x:c.x-b.width/2,y:c.y-b.height/2};return d}function j(b){var c=b&&b.data;var d=a.merge({},a.omit(c,"id"),b.stageData);return a.isEmpty(d)?null:d}var k=function(b,c){var g=e.getCompType(c.compType);var k=f.getComponentDefaultData(g);var l=d.componentsDefaultData.getComponentDefault(g);if(l){k.layout=h(l,k.layout);k.data=j(l)||k.data;k.props=l.props||k.props}var m=i(b,k.layout);a.merge(k.layout,m);k.type="Component";return k};return{getComponentDefinition:k}});define("tpa/addPanelData/addPanelService",["lodash","addPanelData"],function(a,b){"use strict";var c={1024:b.categoriesConstIds.GALLERY,1025:b.categoriesConstIds.VIDEO,1026:b.categoriesConstIds.MUSIC,1027:b.categoriesConstIds.SOCIAL,1028:b.categoriesConstIds.CONTACT,1029:b.categoriesConstIds.IMAGE,1030:b.categoriesConstIds.OTHER,1031:b.categoriesConstIds.BUTTON,1032:b.categoriesConstIds.BOX,1034:b.categoriesConstIds.MENU,1035:b.categoriesConstIds.SHAPE,1036:b.categoriesConstIds.TEXT,1037:b.categoriesConstIds.LIST,1038:b.categoriesConstIds.BLOG,1039:b.categoriesConstIds.STORE,1153:b.categoriesConstIds.STORE};var d={};var e=function(a){switch(a){case b.categoriesConstIds.GALLERY:return"1024";case b.categoriesConstIds.VIDEO:return"1025";case b.categoriesConstIds.MUSIC:return"1026";case b.categoriesConstIds.SOCIAL:return"1027";case b.categoriesConstIds.CONTACT:return"1028";case b.categoriesConstIds.IMAGE:return"1029";case b.categoriesConstIds.OTHER:return"1030";case b.categoriesConstIds.BUTTON:return"1031";case b.categoriesConstIds.BOX:return"1032";case b.categoriesConstIds.MENU:return"1034";case b.categoriesConstIds.SHAPE:return"1035";case b.categoriesConstIds.TEXT:return"1036";case b.categoriesConstIds.LIST:return"1037";case b.categoriesConstIds.BLOG:return"1038";
case b.categoriesConstIds.STORE:return"1153";case b.categoriesConstIds.STORE+"_post":return"1039"}};var f=function(){return a.keys(c)};var g;var h=function(a,b,c){g=b;a.tpa.appMarket.getRelatedApps(function(a){i(a);c()})};var i=function(b){a.forEach(b,function(b){var c=a.intersection(b.categories,f());a.forEach(c,function(a){j(a,b)})})};var j=function(a,b){d[a]=d[a]?d[a]:[];d[a].push(b)};var k=function(){return a(c).pick(a.keys(d)).values().xor(g).value()};var l=function(b){return a.sortBy(d[b],function(a){return a.weights?-a.weights.categories[b]:0})};var m=function(b,c,e){if(a.isEmpty(d)){h(b,function(){e(l(c))})}else{var f=l(c);e(f)}};var n=function(){return d};return{init:h,initRelatedApps:i,getApps:n,getCategories:k,getCategoryApps:m,getCategoryNumber:e}});define("tpa/addPanelData/tpaAddPanelAppBox.rt",["react","lodash","baseUI"],function(a,b,c){"use strict";function d(){this.onMouseEnter(this.props.index)}function e(){this.onMouseLeave(this.props.index)}function f(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement("div",{className:"box-app-wrapper",onMouseEnter:d.bind(this),onMouseLeave:e.bind(this),onClick:this.onClick},a.createElement("a",f({onMouseDown:this.onMouseDown,className:"box-app"},{style:{margin:"auto",top:"0",bottom:"0"},appDefinitionId:this.props.box.appDefinitionId}),a.createElement("div",{style:{backgroundImage:"url("+(this.props.box.colorSvgIcon||this.props.box.appIcon)+")",width:"100%",height:"100%",backgroundSize:"contain",borderRadius:"5px"}})),a.createElement("div",{className:"content"},a.createElement("div",{className:"title ellipsis"},this.props.box.name),a.createElement("label",{className:"ellipsis"},this.props.box.relatedAppsTeaser)),a.createElement("a",{onClick:this.onPlusClick.bind(this,this.props.index)},a.createElement("span",{className:"plus-tooltip"},a.createElement(c.tooltip,{value:"tpa_add_panel_add_to_site",alignment:c.uiConstants.TOOLTIP.ALIGNMENT.TOP},a.createElement("div",{},a.createElement(c.symbol,{className:"plus",name:"plusBig"}))))))}});define("tpa/addPanelData/tpaAddPanelAppBox",["reactDOM","react","lodash","core","experiment","tpa/appMarket/utils/appMarketUtils","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/bi/bi","tpa/constants/constants","tpa/utils/tpaUtils","tpa/services/tpaAddRemoveDSService","tpa/addPanelData/tpaAddPanelAppBox.rt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";return b.createClass({displayName:"tpaAddPanelApp",mixins:[d.mixins.editorAPIMixin],render:m,propTypes:{referralInfo:b.PropTypes.string.isRequired,category:b.PropTypes.string,box:b.PropTypes.object,onItemDrag:b.PropTypes.func},addApp:function(a,b,d,g,h,i){var j=this;var k=this.getEditorAPI();var m=k.tpa.app.isInstalled(a,true);if(m&&i){var n=k.pages.getFocusedPageId();var o=k.tpa.app.getFirstAppCompPageId(a);if(o){if(o.pageId!==n){k.pages.navigateTo(o.pageId)}}k.tpa.appMarket.getDataAsync(a).then(function(b){k.panelManager.openPanel("tpa.message.sectionAlreadyInstalled",{appName:c.get(b,"name"),appIcon:c.get(b,"colorSvgIcon")||c.get(b,"appIcon"),appDefId:a})})}else if(b||m){var p=k.pages.getFocusedPageId();if(i){k.tpa.appMarket.getDataAsync(a).then(function(d){var f=l.addSection(k,a,{callback:function(f){if(!c.get(d,"doNotShowPageAddedPanel")){k.panelManager.openPanel("tpa.message.newPageAdded",{appName:c.get(d,"name"),appDefId:a},e.isOpen("photographyPromotionFixed")||e.isOpen("photographyPromotionRotation"))}j.reportTpaAddedBiEvent(a,b,g,m,p,f.sectionId,h)}});k.pages.navigateTo(c.get(f,"id"),function(){var a=k.tpa.section.getSectionRefByPageId(f.id);k.selection.selectComponentByCompRef(a)})})}else{var q={pageId:p};q=d?c.merge(q,{layout:d}):q;q.callback=function(c){j.reportTpaAddedBiEvent(a,b,g,m,q.pageId,c.comp.id,h)};l.addWidget(k,a,q)}}else{k.tpa.appMarket.getDataAsync(a).then(function(b){var e=k.tpa.appMarket.getPermissionsUrl(this.getAppMarketParams(c.get(b,"slug")),a);e=d?e.concat("&x="+d.x+"&y="+d.y):e;f.openAppMarketModal(k.panelManager.openPanel,"appMarketPermissionsModal",{url:e})}.bind(this))}},onMouseEnter:function(a){this.setState({hover:true,selected:a})},onMouseLeave:function(){this.setState({hover:false})},onMouseDown:function(b){var d=this;if(!c.isFunction(this.props.onItemDrag)){return}var e=a.findDOMNode(this).getBoundingClientRect();var f=c.pick(c.merge({},e,{top:e.top+30,left:e.left+41,width:60,height:60}),["left","top","width","height"]);var g,h;var i=this.props.box.hasSection;if(i){g=980;h=500}else{g=this.props.box.widgets[0].defaultWidth;h=this.props.box.widgets[0].defaultHeight}this.props.onItemDrag(b,{rect:f,onDrop:function(a,b){d.onMouseDrop(a,b)},structure:{layout:{width:g,height:h}},selectedApp:this.props.box})},onMouseDrop:function(a,b){var c=this.getEditorAPI();var d=b.selectedApp.appDefinitionId;var e=b.selectedApp.by==="Wix";var f=this.isFirstAdd(c,d);var g=b.selectedApp.hasSection;this.reportTpaAddClickBiEvent(d,e,"drag",f);this.addApp(d,e,{width:b.structure.layout.width,height:b.structure.layout.height,x:a.x,y:a.y},"drag",f,g)},onClick:function(a){if(this.svgClicked(a)){return}var b=this.getEditorAPI();var c=this.props.box;var d=c.appDefinitionId;this.openInfoModal(c);var e={app_id:d,origin:this.props.referralInfo,category:this.getCategory(),section:"related apps",component_type:k.isBlog(d)?"blog":"tpa"};b.bi.event(i.events.OPEN_MODAL_CLICK,e);b.panelManager.closePanelByName("rEditor.addPanel")},svgClicked:function(a){return a.target.tagName==="svg"||a.target.tagName==="circle"||a.target.tagName==="path"},onPlusClick:function(a,b){if(!this.svgClicked(b)){return}var c=this.getEditorAPI();var d=this.props.box;var e=d.by==="Wix";var f=d.appDefinitionId;var g=d.hasSection;var h=this.isFirstAdd(c,f);this.reportTpaAddClickBiEvent(f,e,"direct_add",h);this.addApp(f,e,null,"direct_add",h,g)},getAppMarketParams:function(a){return{origin:f.origin(),openMarketOrigin:this.props.referralInfo,referralInfoCategory:this.getCategory(),section:"related_apps",appName:a}},openInfoModal:function(a){var b=this.getEditorAPI();var d=b.tpa.appMarket.getInfoUrl(this.getAppMarketParams(c.get(a,"slug")),a.slug);f.openAppMarketModal(b.panelManager.openPanel,"appMarketAppModal",{url:d})},reportTpaAddedBiEvent:function(a,b,d,e,f,g,h){var j=this.getEditorAPI();var k=this.getBasicBiParams(j,a,b,d,h);var l=j.tpa.app.getDataByAppDefId(a);var m=j.generalInfo.isFirstSave();var n=m?j.generalInfo.getMetaSiteId():"";var o={widget_id:"",app_site_id:l.instanceId,instance_id:g,search_term:"",search_result_position:"",referral_info_category:this.getCategory(),referral_info:this.props.referralInfo,template_guid:n,modal_tab_name:"",page_id:f};k=c.assign(k,o);j.bi.event(i.events.TPA_ADDED,k)},reportTpaAddClickBiEvent:function(a,b,c,d){var e=this.getEditorAPI();k.bi.reportBIOnAppIntent(e,i.events.APP_INTENT,a,j.BI.initiator.EDITOR,j.BI.type.ADD_APP);var f=this.getBasicBiParams(e,a,b,c,d);e.bi.event(i.events.TPA_ADD_CLICK,f)},getBasicBiParams:function(a,b,c,d,e){return{adding_method:d,section:"related_apps",category:this.getCategory(),origin:this.props.referralInfo,app_id:b,is_first:e?1:0,is_permissions_app:c?0:1}},isFirstAdd:function(a,b){return!a.tpa.app.isInstalled(b,true)},getCategory:function(){return this.props.category}})});define("tpa/addPanelData/tpaAddPanelSection.rt",["react","lodash","addPanelInfra","util","baseUI","tpa/addPanelData/tpaAddPanelAppBox"],function(a,b,c,d,e,f){"use strict";function g(b,c){return a.createElement("div",{key:b.appDefinitionId},a.createElement(f,{box:b,index:c,category:this.props.props.category,onItemDrag:this.props.onItemDrag,referralInfo:this.props.parentType}))}function h(){this.openCategory()}return function(){return a.createElement.apply(this,["div",{category:this.getCategory()},b.map(this.getAppBoxList(),g.bind(this)),a.createElement("div",{className:"more"},a.createElement(e.symbol,{name:"market"}),a.createElement("span",{},d.translate("tpa_add_panel_still_havent_found")),a.createElement("a",{onClick:h.bind(this)},d.translate("tpa_add_panel_browse_app_market")),a.createElement("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}))])}});define("tpa/addPanelData/tpaAddPanelSection",["react","lodash","core","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/addPanelData/tpaAddPanelSection.rt","util","tpa/services/pendingAppsService"],function(a,b,c,d,e,f,g,h){"use strict";return a.createClass({displayName:"tpaAddPanelSection",mixins:[c.mixins.editorAPIMixin],render:f,getAppBoxList:function(){return this.appBoxList},componentWillMount:function(){var a=this;var b=this.getEditorAPI();d.getCategoryApps(b,this.getCategoryNum(),function(b){a.appBoxList=b});this.referralInfo=this.props.parentType.toLowerCase()},openCategory:function(){var a=this.getEditorAPI();a.panelManager.closePanelByName("rEditor.addPanel");var b={referralInfoCategory:this.getCategory(),openMarketOrigin:this.referralInfo,section:"related_apps"};e.openAppMarketTab({urlParams:b},a.panelManager.openPanel);a.bi.event(g.bi.events.OPEN_MARKET_CLICK,{referral_info:this.referralInfo,referral_info_category:this.getCategory(),num_pending_apps:h.getPendingAppsCount(this.getEditorAPI())})},getCategory:function(){return this.props.props.category},getCategoryNum:function(){return this.props.props.categoryNum}})});define("tpa/addPanelData/section",["tpa/addPanelData/tpaAddPanelSection","tpa/addPanelData/addPanelService","addPanelData"],function(a,b,c){"use strict";var d=function(){var a=b.getCategories();c.manager.end.register(a,function(a){return[e(a,null)]})};var e=function(b,d){var e=c.getGeneralSectionBaseStructure();e.help.hide=false;e.help.title="";e.help.text="add_section_info_text_relatedapps_general";e.teaser.hide=true;e.props.class="tpaSection";e.props.template=a;e.props.category=b;e.props.categoryNum=d||f(b);if(b==="store"){if(d==="1153"){e.help.text="add_section_info_text_relatedapps_store"}else{e.help.text="add_section_info_text_relatedapps_store2"}}else if(b==="blog"){e.help.text="add_section_info_text_relatedapps_blog"}return e};var f=function(a){return b.getCategoryNumber(a)};return{registerAddPanelSection:d,getSectionStructure:e}});define("tpa/superApps/provisionService",["bluebird","tpa/bi/bi","tpa/utils/tpaUtils"],function(a,b,c){"use strict";var d=function(b,d){var e=function(){c.provisionFailAlert(b.panelManager.openPanel,d.appDefinitionId)};return new a(function(a){b.tpa.provision.provisionAppDemoSave(d.applicationId,a,e)})};var e=function(b,c){return new a(function(a){b.saveManager.saveInBackground(b,a,f.bind(null,b,c))})};var f=function(a,c){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:b.events.TPA_MESSAGE_LOADED,biParams:{app_id:c.appDefinitionId,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},true)};return{preSaveProvision:d,save:e,onSaveError:f}});define("tpa/superApps/superApps",["lodash","superAppMenuInfra","tpa/utils/tpaUtils","tpa/handlers/editorTPAHandlers","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/constants/constants","tpa/addPanelData/section","tpa/bi/bi","tpa/superApps/superAppsConstants","tpa/services/tpaAddRemoveDSService","tpa/packagePicker/packagePicker","tpa/services/tpaHelpService","tpa/superApps/provisionService","tpa/services/tpaStyleService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p;var q=["dontStretch","styleId","parentContainerRef"];var r={store:{category:"store",categoryNum:{pre:"1153",post:"1039"}}};var s=["store"];var t=function(a){p=a};var u=function(a){return p.tpa.app.isPremiumByAppDefinitionId(a)};var v=function(a,b){if(b){p.tpa.appMarket.getDataAsync(a).then(function(a){b(p.tpa.app.getExtensionsWidgets(a))})}};var w=function(b,c,d,e,f){V(a.get(f,"type")||g.BI.type.GFPP_MANAGE,b);var h=p.tpa.app.getDataByAppDefId(b);if(h){if(h.demoMode){n.preSaveProvision(p,h).then(a.partial(n.save,p,h)).then(a.partial(x,h,c,d,e))}else{var i=!p.generalInfo.isFirstSave();if(!i||!p.tpa.app.isAppProvisionedOnServer(h.applicationId)){n.save(p,h).then(a.partial(x,h,c,d,e))}else{x(h,c,d,e)}}}};var x=function(a,b,d,e){e=e||{};var f=g.TPA_SETTING_MODAL;var h=c.getOpenedPanel(p.panelManager,f);if(h){p.panelManager.closePanelByName(h.props.panelName)}var i=a.dashboardUrl;if(e.state){i+="#"+e.state}if(a.dashboardUrl){var j={url:i,deviceType:"desktop",applicationId:a.applicationId,origCompId:p.selection.getSelectedComponentId(),origin:e.origin};var k={width:b,height:d,title:e.title,isBareMode:e.isBareMode||false,options:e.options};var l=p.tpa.getSettingsModalParams(j,k);l.onClose=e.onClose;l.shouldNotCloseOnBlur=e.shouldNotCloseOnBlur;var n=e.leavePanelsOpen||false;m.getHelpId(p,a.appDefinitionId,e.widgetId,m.HELP_END_POINTS.SETTINGS_MODAL).then(function(b){l.appDefinitionId=a.appDefinitionId;l.helpId=b;l.widgetId=e.widgetId;c.selectComponentAndNavigateIfNeeded(p,a,function(){p.panelManager.openPanel(f,l,n)})})}};var y=function(a){var b={urlParams:{openMarketOrigin:j.getMarketOpenOriginForBi(a),openAppDefId:a}};e.openAppMarketTab(b,p.panelManager.openPanel)};var z=function(a){var b=p.tpa.app.getDataByAppDefId(a);var c=p.tpa.app.getRenderedReactCompsByApplicationId(b.applicationId);p.tpa.app.refreshApp(c)};var A=function(a){var b=p.tpa.appMarket.getInfoUrl({origin:"http://editor.wix.com"},a);f.openAppMarketModal(p.panelManager.openPanel,"appMarketAppModal",{url:b})};var B=function(a,b){p.tpa.app.registerOnInstalled(a,b)};var C=function(a,b){p.tpa.app.registerOnDeleted(a,b)};var D=function(a,b){var d=p.tpa.app.getDataByAppDefId(a);var e=d.widgets[b];if(e&&c.isMultiSectionInstanceEnabled(d,e.widgetId)){c.bi.reportBIOnAppIntent(p,i.events.APP_INTENT,a,g.BI.initiator.EDITOR,g.BI.type.ADD_APP);var f=k.addMultiSection(p,d.appDefinitionId,{pageId:e.appPage.id});p.pages.navigateTo(f.id);N(d,f,e.widgetId)}};var E=function(a,b){c.bi.reportBIOnAppIntent(p,i.events.APP_INTENT,a,g.BI.initiator.EDITOR,g.BI.type.ADD_APP);b=b||{};return k.addSection(p,a,b)};var F=function(b,d,e,f){c.bi.reportBIOnAppIntent(p,i.events.APP_INTENT,b,g.BI.initiator.EDITOR,g.BI.type.ADD_APP);var h=G(d,e,f);var j=k.addWidget(p,b,h);p.waitForChangesApplied(function(c){if(a.isUndefined(c)){J(j,f);var e=p.tpa.app.getDataByAppDefId(b);M(e,j,d,a.get(f,"presetId"));if(a.get(f,"cb")){f.cb(j)}}})};var G=function(b,c,d){var e=a.merge({widgetId:b,layout:c},a.pick(d,q));e.callback=function(){p.bi.tryFlushingConditionedEvents()};return e};var H=function(a,b){p.components.layout.unDock(a);p.waitForChangesApplied(function(){p.components.layout.update(a,b)})};var I=function(a,b,c){o.setStyleParam(p,b,c)};var J=function(b,c){var d=c&&c.presetId;if(a.isString(d)&&!a.isEmpty(d)){p.tpa.data.set(b,"presetId",d,p.tpa.data.SCOPE.COMPONENT)}};var K=function(a){var b=p.tpa.app.isInstalled(a);if(b){p.tpa.appMarket.getData(a)}return b};var L=function(a){return p.tpa.app.getFirstAppCompPageId(a)};var M=function(a,b,c,d){var e={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:b.id,widget_id:c,page_id:b.pageId,preset_id:d};p.bi.event(i.events.EXTENSION_ADDED,e)};var N=function(a,b,c){var d={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:b.sectionId,widget_id:c,page_id:b.id};p.bi.event(i.events.EXTENSION_ADDED,d)};var O=function(a,b){return h.getSectionStructure(a,b,"vertical_button")};var P=function(a){return p.tpa.section.getSectionRefByPageId(a)};var Q=function(a,b,c){V(g.BI.type.APP_UPGRADE_BUTTON,a);l.startUpgradeFlow(p,a,false,{origin:c})};var R=function(a){var b=p.tpa.app.getDataByAppDefId(a);if(b){return p.tpa.app.hasPremiumOffering(b.applicationId)}return false};var S=function(a,c,d,e,f,g,h){b.button.registerButton(p,a,c,d,e,f,g,h,true);p.panelManager.openPanel(d,{appWasManuallyInstalled:true})};var T=function(b){d.settingsOpenModal(p,{data:a.omit(b,"autoProvision")})};var U=function(b){V(g.BI.type.APP_MANAGE_BUTTON,W());if(a.get(b,"autoProvision")){var c=p.selection.getSelectedComponentData();if(c){var d=p.tpa.app.getData(c.applicationId);if(d){if(d.demoMode){n.preSaveProvision(p,d).then(a.partial(n.save,p,d)).then(a.partial(T,b))}else{var e=!p.generalInfo.isFirstSave();if(!e){n.save(p,d).then(a.partial(T,b))}else{T(b)}}}}}else{T(b)}};var V=function(a,b){c.bi.reportBIOnAppIntent(p,i.events.APP_INTENT,b,g.BI.initiator.EDITOR,a,true)};var W=function(){var a=p.selection.getSelectedComponentData();var b=p.components.data.get(a)||{};var c=p.tpa.app.getData(b.applicationId)||{};return c.appDefinitionId};return{init:t,isPremium:u,getExtensions:v,openDashboardUrl:w,openAppMarketForAppDef:y,refreshAppCompsForAppDefId:z,openAppMarketInfoModal:A,registerOnAppInstalled:B,registerOnAppDeleted:C,addApp:E,addWidget:F,addSection:D,superAppsConstants:j,isInstalled:K,getFirstAppCompPageId:L,relatedApps:{addPanelCategories:s,constants:r,getRelatedAppsForPostInstall:O,getRelatedAppsForPreInstall:O},getSectionRefByPageId:P,upgrade:Q,hasPremiumOffering:R,openSuperAppPanel:S,openSuperAppsModal:U,setStyleParam:I,unDockComp:H}});define("tpa/appMarket/appMarketHandlers",["lodash","blog","core","experiment","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/services/pendingAppsService","tpa/services/navigateAndOpenAppService","tpa/componentsData/componentsDefaultDataGenerator","tpa/utils/tpaUtils","tpa/constants/constants","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/settings/settings","tpa/superApps/superApps"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a,b){b.params.shouldTranslateTitle=b.params.shouldTranslateTitle===undefined?false:b.params.shouldTranslateTitle;a.ui.focus.setOnEditor();f.openAppMarketModal(a.panelManager.openPanel,"appMarketModal",b.params)};var q=function(a,b){f.closeAppMarketModalById(a,b.params.id)};var r=function(a){f.closeAppMarket(a.panelManager.closePanelByName)};var s=function(a){f.openAppMarketHelp(a)};var t=function(a,b){f.openAppMarketModalWithAppDefinitionId(a.panelManager.openPanel,"appMarketPermissionsModal",{url:b.params.url,appDefinitionId:b.params.appDefinitionId})};var u=function(a){f.closeAppMarketModal(a.panelManager.closePanelByName,"appMarketPermissionsModal")};var v=function(a,b,c){f.openAppMarketModalWithAppDefinitionId(a.panelManager.openPanel,"appMarketAppModal",{url:b.params.url,appDefinitionId:b.params.appDefinitionId,onClose:c})};var w=function(a){f.closeAppMarketModal(a.panelManager.closePanelByName,"appMarketAppModal")};var x=function(a,b,c){var d=a.generalInfo.getUserInfo();var e=d&&d.name||"";c(e)};var y=function(c,d,e){var f=a.get(d,"params.appDefinitionId");var g=a.get(d,"params.includingDemoMode");if(b.siteHasBlog(c)&&f===o.superAppsConstants.BLOG_APP_DEF_ID){e(true)}else{e(c.tpa.app.isInstalled(f,!g))}};var z=function(a,b,c){c(g.getPendingApps(a))};var A=function(a,b){g.dismiss(a,b.params.id)};var B=function(a,b){g.add(a,b.params.id)};var C=function(a,b,c){if(a.generalInfo.isFirstSave()){a.saveManager.saveInBackground(a,function(){c({response:"success",metaSiteId:a.generalInfo.getMetaSiteId()})},function b(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:l.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},true);c({response:"site was not saved."})})}else{c({response:"success",metaSiteId:a.generalInfo.getMetaSiteId()})}};var D=function(b,c){var d=a.get(c,"params.appDefinitionId");h.navigateAndOpenSettingsForAppDefId(b,d)};var E=function(b,c){var d=a.get(c,"params.state","");f.setAppMarketSessionUserPrefs(b,{state:d})};var F=function(a,b,c){c({isDevMode:j.isInDevMode()})};var G=function(b,c){var d=a.get(c,"params.appDefinitionDataObj");var f=a.get(d,"appDefinitionId");var g=c.params.widgetId;var h=b.pages.getFocusedPageId();var i=b.tpa.app.getDataByAppDefId(f);var m=c.params.biData;var o=c.params.is_permissions_app;if(c.params.provision_demo_app){var p=function(){n.open(b,b.selection.getSelectedComponents());M(b,f,g,h,null,true,o,m,true)};var q=function(){j.provisionFailAlert(b.panelManager.openPanel,f)};b.tpa.provision.provisionAppDemoSave(i.applicationId,p,q)}else{var r=c.params.type;switch(r){case"tpaSection":var s=I(c);j.bi.reportBIOnAppIntent(b,l.events.APP_INTENT,f,s,k.BI.type.ADD_APP);var t=d&&d.doNotShowPageAddedPanel||false;var v=d&&d.appName;L(b,f,i,g,v,h,t,o,m);break;case"tpaWidget":J(f,b,c,g,h,o,m);break;case"wixappsPart":H(b,c,h);break;default:throw new Error("Error: "+r+" is unknown tpa type")}}u(b);w(b);e.closeAppMarketTab(b.panelManager.closePanelByName)};function H(a,c,d){if(!b.siteHasBlog(a)){b.installApp(a,null,function b(d){O(a,d,c.params)})}else{var e=b.getBlogPageId(a);if(e!==d){a.pages.navigateTo(e)}}}function I(b){if(a.get(b,"params.biData.referral_info")==="ADD_PANEL"){return k.BI.initiator.EDITOR}return k.BI.initiator.APP_MARKET}function J(a,b,c,d,e,f,h){var i=I(c);j.bi.reportBIOnAppIntent(b,l.events.APP_INTENT,a,i,k.BI.type.ADD_APP);if(a===o.superAppsConstants.SHOUTOUT_APP_DEF_ID){K(b)}else{var n={};if(c.params.x&&c.params.y){n={x:c.params.x,y:c.params.y}}var p=!b.tpa.app.isInstalled(a,true);m.addWidget(b,a,{widgetId:d,layout:n,callback:function(c){g.updateNotification(b);M(b,a,d,e,c.comp.id,p,f,h);b.bi.tryFlushingConditionedEvents()}})}}function K(a){if(a.generalInfo.isFirstSave()){a.saveManager.saveInBackground(a,function(){o.openSuperAppPanel("shoutout",true,c.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")},function b(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:l.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},true)})}else{o.openSuperAppPanel("shoutout",true,c.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")}}var L=function(b,c,e,f,h,i,k,l,n){if(b.tpa.section.alreadyInstalled(c)){if(e.demoMode){var o=b.tpa.app.getFirstAppCompPageId(c);var p=function(){M(b,c,f,o.pageId,o.compId,true,l,n)};var q=function(){j.provisionFailAlert(b.panelManager.openPanel,c)};b.tpa.provision.provisionAppDemoSave(e.applicationId,p,q)}var r=b.tpa.app.getFirstAppCompPageId(c);if(r){if(r.pageId!==i){b.pages.navigateTo(r.pageId)}}b.tpa.appMarket.getDataAsync(c).then(function(d){b.panelManager.openPanel("tpa.message.sectionAlreadyInstalled",{appName:h,appIcon:a.get(d,"colorSvgIcon")||a.get(d,"appIcon"),appDefId:c})})}else{var s=m.addSection(b,c,{widgetId:f,callback:function(a){if(!k){b.panelManager.openPanel("tpa.message.newPageAdded",{appName:h,appDefId:c},d.isOpen("photographyPromotionFixed")||d.isOpen("photographyPromotionRotation"))}g.updateNotification(b);M(b,c,f,a.page.pageId,a.sectionId,true,l,n)}});b.pages.navigateTo(s.id,function(){var a=b.tpa.section.getSectionRefByPageId(s.id);b.selection.selectComponentByCompRef(a)})}};var M=function(a,b,c,d,e,f,g,h){var i=a.generalInfo.isFirstSave();var j=i?a.generalInfo.getMetaSiteId():"";var k=a.tpa.app.getDataByAppDefId(b);h=h||{};var m={is_permissions_app:g?1:0,is_first:f?1:0,app_id:b,widget_id:c,app_site_id:k.instanceId,instance_id:e,origin:"ed_market",adding_method:h.adding_method,category:h.category,section:h.section,search_term:h.search_term,item_position:h.item_position,referral_info_category:h.referral_info_category,referral_info:h.referral_info,template_guid:j,modal_tab_name:h.modal_tab_name,page_id:d};a.bi.event(l.events.TPA_ADDED,m)};var N=function(a,b){var c=b.params;var d=c&&c.pageId||a.pages.getFocusedPageId();var f=a.pages.getReference(d);var g=i.getComponentDefinition(a,c);a.components.add(f,g,undefined,function(b){a.selection.selectComponentByCompRef(b);a.history.add("add component from app market");P(a,b.id,c)});e.closeAppMarketTab(a.panelManager.closePanelByName)};var O=function(a,c,d){var e=b.getBlogMainAppPartCompRef(a,c);P(a,e.id,d)};var P=function(a,b,c){c.biData=c.biData||{};a.bi.event(l.events.COMPONENT_ADDED_FROM_MARKET,{app_id:c.biData.app_id,instance_id:b,component_type:c.type||"wix_component",origin:"ed_market",category:c.biData.category,search_term:c.biData.search_term,item_position:c.biData.item_position,referral_info_category:c.biData.referral_info_category,referral_info:c.biData.referral_info,adding_method:c.biData.adding_method,modal_tab_name:c.biData.modal_tab_name})};return{openMarketPopup:v,closeMarketPopup:w,openModal:t,closeModal:u,openAppMarketModal:p,closeAppMarketModal:q,closeAppMarket:r,openAppMarketHelp:s,addComponentToSite:N,getUserDetails:x,getPendingAppsList:z,addAppToSite:G,appIsInstalled:y,removePendingApp:A,addPendingApp:B,save:C,openApp:D,setAppMarketState:E,isDevMode:F}});define("tpa/appMarket/utils/appMarketPostMessageUtils",["tpa/common/editorTPAPostMessageCommon","util"],function(a,b){"use strict";var c={OPEN_MARKET_POPUP:"openMarketPopup",CLOSE_MARKET_POPUP:"closeMarketPopup",OPEN_MODAL:"openModal",CLOSE_MODAL:"closeModal",ADD_APP_TO_SITE:"addAppToSite",ADD_COMPONENT_TO_SITE:"addComponentToSite",GET_USER_DETAILS:"getUserDetails",GET_PENDING_APPS_LIST:"getPendingAppsList",APP_IS_INSTALLED:"appIsInstalled",REMOVE_PENDING_APP:"removePendingApp",ADD_PENDING_APP:"addPendingApp",OPEN_APP_MARKET_MODAL:"openAppMarketModal",CLOSE_APP_MARKET_MODAL:"closeAppMarketModal",CLOSE_APP_MARKET:"closeAppMarket",OPEN_APP_MARKET_HELP:"openAppMarketHelp",SAVE:"save",OPEN_APP:"openApp",SET_APP_MARKET_STATE:"setAppMarketState",IS_DEV_MODE:"isDevMode"};var d=b.serviceTopology.htmlEditorRootUrl?b.serviceTopology.htmlEditorRootUrl.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var e=function(a){return a==="APP_MARKET"};var f=function(a){return!!g(a)};var g=function(a){return c[a]};var h=function(b){var c={eventType:"ON_MARKET_OPEN"};a.callPostMessage(b,c,d)};var i=function(b,c,e){var f={eventType:"ON_COMMAND_RESPONSE",callerId:c,params:e};a.callPostMessage(b,f,d)};return{getMethodName:g,isAppMarketMessage:e,shouldHandleMessage:f,sendOnOpenEvent:h,sendMessageToAppMarket:i}});define("tpa/appMarket/services/appMarketPostMessageService",["lodash","core","tpa/appMarket/appMarketHandlers","tpa/appMarket/utils/appMarketPostMessageUtils"],function(a,b,c,d){"use strict";var e=function(a,b,e){var f=d.getMethodName(b.cmd);c[f].apply(this,[a,b,e])};var f=function(a,b){var c;try{if(b.data){c=JSON.parse(b.data)}else if(b.originalEvent&&b.originalEvent.data){b=b.originalEvent;c=JSON.parse(b.data)}}catch(a){return}if(c&&d.isAppMarketMessage(c.intent)&&d.shouldHandleMessage(c.cmd)){e(a,c,g(b.source,c))}};var g=function(a,b){return function(c){d.sendMessageToAppMarket(a,b.id,c)}};var h=function(a){window.addEventListener("message",f.bind(this,a),false)};return{init:h,callHandler:e,handleAppMarketMessage:f}});define("tpa/services/tpaCompNameService",["lodash"],function(a){"use strict";var b=function(b,c){var d=b.components.data.get(c);var e=b.tpa.app.getData(d.applicationId);var f=b.tpa.appMarket.getData(e.appDefinitionId);if(f){var g=a.find(f.widgets,{widgetId:d.widgetId});if(g){return g.title}return f.name}return e.appDefinitionName};return{getCompName:b}});define("tpa/settings/frames/tpaSettingsPanelFrame.rt",["react","lodash","symbols","baseUI","baseUILib"],function(a,b,c,d,e){"use strict";function f(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}function g(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",f({className:"tpa-settings-panel-frame"},this.getPanelProps()),a.createElement(e.PanelHeader,{className:"dragger dark",onMouseDown:g.bind(this),onHelp:this.openHelpCenter,onClose:this.close},a.createElement("span",{},this.props.title)),this.props.shouldAddScroll?a.createElement(e.CustomScroll,{},a.createElement("div",{className:"content",style:this.getContentStyle()},this.props.children)):null,!this.props.shouldAddScroll?a.createElement("div",{className:"content",style:this.getContentStyle()},this.props.children):null)}});define("tpa/settings/frames/tpaSettingsPanelFrame",["lodash","react","core","util","panels","tpa/settings/frames/tpaSettingsPanelFrame.rt"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"tpaSettingsPanelFrame",mixins:[e.mixins.panelFrameMixin,d.draggableMixin,e.mixins.panelDragLimitsMixin,c.mixins.editorAPIMixin],propTypes:{panelName:b.PropTypes.string.isRequired,title:b.PropTypes.string.isRequired,width:b.PropTypes.number,height:b.PropTypes.number,top:b.PropTypes.string,left:b.PropTypes.string,onHelpClicked:b.PropTypes.func,shouldAddScroll:b.PropTypes.bool.isRequired},getInitialState:function(){return{showHelp:false}},componentWillMount:function(){this.getEditorAPI().panelManager.registerForStageMouseDown(this.constructor.displayName,function(){this.close()}.bind(this))},getPanelProps:function(){var b=["width","top","left"];var c={};a.forEach(b,a.bind(function(a){if(this.props[a]){c[a]=this.props[a]}},this));return a({style:c}).defaults(this.props).omit("children","top","left").value()},toggleHelp:function(){var a=!this.state.showHelp;this.setState({showHelp:a})},getContentStyle:function(){return{height:a.isNumber(this.props.height)?this.props.height+"px":"100%"}},render:f})});define("tpa/settings/compPanels/tpaSettings.rt",["react","lodash","baseUI","core","util","tpa/settings/frames/tpaSettingsPanelFrame"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement(f,b.assign({},{className:b({"tpa-settings-panel-frame-padding":!this.state.isNewVersion,version2:this.state.isNewVersion}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),title:this.getAppName(),width:this.state.width,height:this.state.isNewVersion?this.state.height:null,ref:"tpaSettingsFrame",top:c.uiConstants.TOPBAR_HEIGHT+24+"px",left:60+18+"px",onHelpClicked:this.onHelpClicked,shouldAddScroll:!this.state.isNewVersion},this.getFrameProps()),a.createElement("div",{className:b({"tpa-settings-iframe-wrapper":true,"tpa-settings-iframe-wrapper-padding":!this.state.isNewVersion}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),style:this.getDialogStyle()},this.shouldShowPreloader()?a.createElement("div",{key:"preloader",className:"tpa-preloader"},a.createElement("div",{},a.createElement(c.preloader,{}),a.createElement("div",{className:"text"},e.translate("tpa_loading_settings"),"."))):null,this.state.overlay===this.OVERLAY_STATE.UNRESPONSIVE?a.createElement("div",{key:"unavailableMessage",className:"tpa-unresponsive"},a.createElement("header",{},a.createElement(c.symbol,{name:"alert"}),"\n                ",e.translate("tpa_oops"),"\n            "),a.createElement("div",{
id:"textContainer"},a.createElement("span",{id:"text",dangerouslySetInnerHTML:{__html:this.getUnresponsiveText()}}),a.createElement("span",{id:"dismissButton",onClick:this.refs.tpaSettingsFrame.openHelpCenter},a.createElement("a",{}," ",this.getAppName()," ")),a.createElement("span",{id:"text_2",dangerouslySetInnerHTML:{__html:this.getUnresponsiveContact()}}))):null,a.createElement("iframe",{scrolling:"no",frameBorder:"0",marginHeight:"0",marginWidth:"0",className:"tpa-iframe",width:"100%",height:this.getIframeHeight(),id:"tpaSettingsFrame",src:this.state.url})))}});define("tpa/settings/compPanels/tpaSettings",["lodash","react","jquery","core","compPanels","tpa/bi/bi","util","tpa/utils/tpaUtils","tpa/services/tpaCompNameService","tpa/services/tpaHelpService","tpa/settings/compPanels/tpaSettings.rt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=54;var m=582-l;function n(a,b){b=parseInt(b,10);return a?Math.min(m,b):b}return b.createClass({ALIVE_TIMEOUT:2e4,STYLES_READY_SDK_VERSION:"1.64.0",OVERLAY_STATE:{PRELOADER:"preloader",UNRESPONSIVE:"unresponsive",NONE:"none"},mixins:[e.compPanelMixin],displayName:"TPASettings",propTypes:{width:b.PropTypes.string},getDefaultProps:function(){return{panelName:"tpa.compPanels.tpaSettings"}},getInitialState:function(){var b=this.getEditorAPI();this.selectedComponent=a.isArray(this.props.selectedComponent)?this.props.selectedComponent[0]:this.props.selectedComponent;this.data=b.components.data.get(this.selectedComponent);this.appData=b.tpa.app.getData(this.data.applicationId);this.maxScreenHeight=c(window).height()-126;var d=!!this.props.isNewVersion;this.helpId="";if(this.appDataIsValid()){var e=this.getContentSize(d);return{url:this.appData.demoMode===true?undefined:this.getUrl(),width:this.props.width||e.width,height:e.height,overlay:this.OVERLAY_STATE.PRELOADER,isNewVersion:d}}return{width:400,height:200}},appDataIsValid:function(){var b=a.isArray(this.appData)&&a.size(this.appData)===0||a.isObject(this.appData)&&a.isEmpty(this.appData);return!b},componentDidMount:function(){var a=this.getEditorAPI();if(!this.isAppReady(this.props)){this._appAliveTimeout=window.setTimeout(this.onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT)}a.leftBar.collapseMenu();if(this.appDataIsValid()){if(this.appData.demoMode){var b=function(){this.appData=a.tpa.app.getData(this.data.applicationId);this.setState({url:this.getUrl()});this.reportTpaAddedBiEvent(a)};var c=function(){h.provisionFailAlert(a.panelManager.openPanel,this.appData.appDefinitionId);this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})};a.tpa.provision.provisionAppDemoSave(this.appData.applicationId,b.bind(this),c.bind(this))}}else{this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})}this.panelOpenTime=this.getTime();var d={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId};a.bi.event(f.events.TPA_OPEN_SETTINGS,d)},componentWillReceiveProps:function(b){this.helpId=a.get(b,"articleId");var c=this.getEditorAPI();if(!c.components.is.exist(this.props.selectedComponent)){c.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}if(this.isAppReady(b)){this.setState({overlay:this.OVERLAY_STATE.NONE})}},reportTpaAddedBiEvent:function(a){var b=a.generalInfo.isFirstSave();var c=b?a.generalInfo.getMetaSiteId():"";var d=this.appData.by==="Wix";var e={is_permissions_app:d?0:1,is_first:1,app_id:this.appData.appDefinitionId,widget_id:this.data.widgetId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId,category:"",section:"",search_term:"",item_position:"",referral_info_category:"",referral_info:"",template_guid:c,modal_tab_name:"",origin:"template_provision",adding_method:"template",page_id:a.pages.getFocusedPageId()};a.bi.event(f.events.TPA_ADDED,e)},getContentSize:function(a){var b=this.isSection()?this.appData.widgets[this.data.widgetId].settings:this.appData.sectionSettings;return{height:n(a,b.height),width:parseInt(b.width,10)}},isSection:function(){return this.appData.widgets&&this.data.widgetId},getUrl:function(){var a=this.data.widgetId||this.getEditorAPI().tpa.app.getMainSectionWidgetData(this.appData).widgetId;return this.getEditorAPI().tpa.app.url.getSettingsUrl(this.appData.applicationId,a,this.props.origCompId,{width:this.props.width,isNewVersion:this.props.isNewVersion})},getDialogStyle:function(){var b="100%";if(!this.state.isNewVersion){b=this.state.overlay===this.OVERLAY_STATE.NONE?"100%":a.min([this.maxScreenHeight,this.state.height])}return{height:b,position:"relative"}},getIframeHeight:function(){return this.state.isNewVersion?"100%":this.state.height},onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){if(!this.isAppReady(this.props)){this.reportBIAppNotResponsive();this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})}else{this.clearAliveTimeout();this.setState({overlay:this.OVERLAY_STATE.NONE})}},reportBIAppNotResponsive:function(){var b=this.getEditorAPI();var c=this.data.widgetId?a.get(this.appData.widgets,this.data.widgetId):b.tpa.app.getMainSectionWidgetDataFromApplicationId(this.data.applicationId);var d={endpoint:c.settings.url,app_id:this.appData.appDefinitionId};b.bi.error(f.errors.APP_IS_NOT_RESPONSIVE,d)},getTime:function(){return Date.now()},sendClosePanelBI:function(){var a=this.getEditorAPI();var b=this.props.origCompId;var c={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:b,seconds_opened:parseInt((this.getTime()-this.panelOpenTime)/1e3,10)};a.bi.event(f.events.TPA_CLOSE_SETTINGS,c)},componentWillUnmount:function(){this.clearAliveTimeout();this.sendClosePanelBI()},clearAliveTimeout:function(){if(this._appAliveTimeout){window.clearTimeout(this._appAliveTimeout)}},isAppReady:function(b){var c=a.get(b,"sdkVersion")||this.props.sdkVersion;var d=h.sdkVersionIsAtLeast(c,this.STYLES_READY_SDK_VERSION);if(d){return this.shouldShowSettingsPanelFromStyleReadyEvent(b)}return this.shouldShowSettingsPanelFromIsAliveEvent(b)},shouldShowSettingsPanelFromStyleReadyEvent:function(b){return a.get(b,"stylesReady")||false},shouldShowSettingsPanelFromIsAliveEvent:function(b){return a.get(b,"isAlive")||false},shouldShowPreloader:function(){return!this.isAppReady(this.props)&&this.state.overlay===this.OVERLAY_STATE.PRELOADER||this.appData.demoMode===true},onHelpClicked:function(){var b=this.getEditorAPI();var c=f.events.TPA_HELP_CLICK;var e=this.data.widgetId||b.tpa.app.getMainSectionWidgetData(this.appData).widgetId;var g={widget_id:e,app_id:this.appData.appDefinitionId,origin:"settings"};var h=this.props.panelName;var i={openPanelBiEvent:c,openPanelBiParams:a.merge({help_status:"open"},g),closePanelBiEvent:c,closePanelBiParams:a.merge({help_status:"close"},g),origin:"settings"};var k={panel_name:h,origin:d.constants.BI.HELP.ORIGIN.PANEL,component:b.selection.getSelectedComponentType(),learn_more:false};if(this.helpId){b.panelManager.openHelpCenter(this.helpId,i,k)}else{j.getHelpId(b,this.appData.appDefinitionId,e,j.HELP_END_POINTS.SETTINGS).then(function(a){b.panelManager.openHelpCenter(a,i,k)})}},getUnresponsiveText:function(){var b=this.appData.appDefinitionName;if(b){var c=a.template(g.translate("tpa_unavail_problems"));return c({appName:b})}},getAppName:function(){var a=this.getEditorAPI();if(!a.components.is.exist(this.props.selectedComponent)){return""}return i.getCompName(a,this.selectedComponent)},getUnresponsiveContact:function(){if(!a.isEmpty(this.appData)){return g.translate("tpa_unavail_problems_2")}},render:k})});define("tpa/compPanels/appMarketPanel.rt",["react","lodash","panels","experiment"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.leftPanelFrame,b.assign({},{panelName:this.props.panelName,label:d.isOpen("appMarketNoHeader")?undefined:this.translateIfNeeded("app_market_title"),className:this.getAppMarketPanelClass(),panelClass:this.getAppMarketContainingPanelClass(),panelIndex:this.props.panelIndex},this.getPanelProps()),a.createElement("iframe",{src:this.state.appMarketUrl,className:this.getAppMarketIframeClass(),frameBorder:"0",scrolling:"no"}))}});define("tpa/compPanels/appMarketPanel",["lodash","react","core","util","tpa/appMarket/utils/appMarketUtils","tpa/utils/tpaUtils","tpa/compPanels/appMarketPanel.rt","tpa/bi/bi","helpIds","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b,c){var d={};if(c.openMarketOrigin==="market_button"){d=e.getAppMarketUrlParams()}a.assign(d,c);d.origin=e.origin();d.newUrl=true;d.state=a.get(e.getAppMarketSessionUserPrefs(b),"state","");return b.tpa.appMarket.getUrl(d)}function l(){var a=["app-market-panel-20"];if(j.isOpen("appMarketNoHeader")){a.push("no-header")}return a}return b.createClass({displayName:"AppMarketPanel",propTypes:{urlParams:b.PropTypes.shape({openMarketOrigin:b.PropTypes.string.isRequired,referralInfoCategory:b.PropTypes.string,section:b.PropTypes.string,openAppDefId:b.PropTypes.string,appDefinitionId:b.PropTypes.string,categorySlug:b.PropTypes.string,query:b.PropTypes.string,tags:b.PropTypes.string,tests:b.PropTypes.string}).isRequired,helpId:b.PropTypes.string.isRequired},mixins:[d.translationMixin,c.mixins.editorAPIMixin],getInitialState:function(){return{appMarketUrl:k(this.getEditorAPI(),this.props.urlParams)}},getDefaultProps:function(){return{panelName:"tpa.compPanels.appMarketPanel",helpId:i.EXTERNAL.APP_MARKET}},timeMarketOpened:undefined,openMarketOrigin:undefined,getTime:function(){return Date.now()},componentDidMount:function(){this.timeMarketOpened=this.getTime();this.openMarketOrigin=this.props.urlParams&&this.props.urlParams.openMarketOrigin},componentWillUnmount:function(){var a={open_origin:this.openMarketOrigin,seconds_opened:parseInt((this.getTime()-this.timeMarketOpened)/1e3,10)};this.getEditorAPI().bi.event(h.events.MARKET_CLOSED,a)},getPanelProps:function(){return{urlParams:this.props.urlParams,onHelpClicked:this.onHelpClicked,helpId:this.props.helpId}},onHelpClicked:function(){var a=this.getEditorAPI();a.bi.event(h.events.MARKET_HELP_CLICK)},getAppMarketContainingPanelClass:function(){var a=l();if(j.isOpen("appMarketResponsivePanel")){a.push("app-market-responsive")}return a.join(" ")},getAppMarketIframeClass:function(){return j.isOpen("appMarketResponsivePanel")?"app-market-frame-responsive":"app-market-frame-20"},getAppMarketPanelClass:function(){var a=l();return a.join(" ")},render:g})});define("tpa/compModals/appMarketAppModal.rt",["react","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.translateIfNeeded("app_market_title"),shouldHideHelp:true,onClose:this.onClose},a.createElement("div",{className:"app-market-app-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}});define("tpa/compModals/appMarketAppModal",["react","core","util","tpa/compModals/appMarketAppModal.rt"],function(a,b,c,d){"use strict";return a.createClass({propTypes:{onClose:a.PropTypes.func.isRequired},displayName:"appMarketAppModal",mixins:[c.translationMixin,b.mixins.editorAPIMixin],render:d,onClose:function(){var a=this.getEditorAPI();a.panelManager.closePanelByName(this.props.panelName);if(this.props.onClose){this.props.onClose()}}})});define("tpa/compModals/appMarketPermissionsModal.rt",["react","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:true},a.createElement("div",{className:"app-market-permissions-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,className:"app-market-permissions-modal",width:"100%",height:"100%",frameBorder:"0"})))}});define("tpa/compModals/appMarketPermissionsModal",["lodash","react","core","util","tpa/compModals/appMarketPermissionsModal.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"appMarketPermissionsModal",mixins:[d.translationMixin,c.mixins.editorAPIMixin],onClose:function(){var a={closing_method:"X",app_id:this.props.appDefinitionId};this.getEditorAPI().bi.event(f.events.PERMISSION_MODAL_CLOSED,a);return true},getTitle:function(){if(a.includes(this.props.iframeUrl,"demoMode=true")){return this.translateIfNeeded("app_market_permissions_template_message_title")}return this.translateIfNeeded("app_market_permissions_message_title")},render:e})});define("tpa/compModals/tpaSettingsModal.rt",["react","lodash","panels","core"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{title:this.props.title,shouldHideHeader:this.shouldHideHeader(),panelName:"tpa.compModals.tpaSettingsModal",width:this.getPanelWidth(),height:this.getPanelHeight(),onHelpClicked:this.helpClicked,isBareMode:this.props.isBareMode,className:this.getClassName(),containerBackground:b.get(this.props.options,"background"),overlayBackground:b.get(this.props.options,"overlay"),shouldNotCloseOnBlur:this.props.isBareMode||this.props.shouldNotCloseOnBlur},a.createElement("iframe",{id:"settingsModalIframe",src:this.props.url,style:{width:"100%",height:"100%",border:"0px"}}))}});define("tpa/compModals/tpaSettingsModal",["lodash","react","core","baseUI","util","tpa/bi/bi","tpa/constants/constants","tpa/utils/tpaUtils","tpa/compModals/tpaSettingsModal.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=54;return b.createClass({mixins:[c.mixins.editorAPIMixin],displayName:"settingsModal",getInitialState:function(){this.helpId="";return{}},modalShouldNotHaveMargin:function(){return a.get(this.props.options,"margin")===false},getPanelHeight:function(){var a=h.getWindow().innerHeight;var b=this.parsePercentToPixel(this.props.height,a);if(this.props.title){b+=j}var c=a*.05;if(this.modalShouldNotHaveMargin()){c=d.uiConstants.TOPBAR_HEIGHT}return this.resizeToFitContainer(b,a,c).toString()},getPanelWidth:function(){var a=h.getWindow().innerWidth;var b=this.parsePercentToPixel(this.props.width,a);var c=a*.02;if(this.modalShouldNotHaveMargin()){c=0}return this.resizeToFitContainer(b,a,c).toString()},getClassName:function(){var b=a.template("tpa-settings-modal<%= c %>");if(this.modalShouldNotHaveMargin()){return b({c:" no-margin"})}else if(this.props.isBareMode){return"tpa-settings-modal bare"}return b({c:""})},parsePercentToPixel:function(b,c){var d=a.isString(b)&&/^[0-9]+%$/.test(b);if(d){b=c*parseInt(b.replace("%",""),10)/100}else if(!a.isNumber(b)){b=parseInt(b.replace("px",""),10)}return b},resizeToFitContainer:function(a,b,c){var d=b-c;if(a>d){return d}return a},componentWillUnmount:function(){if(this.props.onClose){this.props.onClose(this.props.closeModalMessage)}},shouldHideHeader:function(){return this.props.isBareMode},helpClicked:function(){var b=this.getEditorAPI();var d=this.props.appDefinitionId;var e=this.helpId||this.props.helpId;var g=this.props.widgetId;var h=f.events.TPA_HELP_CLICK;var i={widget_id:g?g:null,app_id:d,origin:"settings_modal"};var j={openPanelBiEvent:h,openPanelBiParams:a.merge({help_status:"open"},i),closePanelBiEvent:h,closePanelBiParams:a.merge({help_status:"close"},i),origin:i.origin};var k={panel_name:this.props.panelName,origin:c.constants.BI.HELP.ORIGIN.PANEL,component:b.selection.getSelectedComponentType(),learn_more:false};b.panelManager.openHelpCenter(e,j,k)},componentWillReceiveProps:function(b){this.helpId=a.get(b,"articleId");if(b.shouldCloseModal){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}},render:i})});define("tpa/compModals/appMarketModal.rt",["react","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement(c.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:true,width:this.props.width,height:this.props.height,keyboardShortcuts:this.getShortcuts()},a.createElement("div",{className:"app-market-modal-container"},a.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}});define("tpa/compModals/appMarketModal",["react","core","util","tpa/compModals/appMarketModal.rt"],function(a,b,c,d){"use strict";var e={ESC:"esc"};return a.createClass({propTypes:{iframeUrl:a.PropTypes.string.isRequired,width:a.PropTypes.string.isRequired,height:a.PropTypes.string.isRequired,id:a.PropTypes.string.isRequired,title:a.PropTypes.string,closeModalBiEvent:a.PropTypes.object,closeModalBiParams:a.PropTypes.object},displayName:"appMarketModal",mixins:[c.translationMixin,b.mixins.editorAPIMixin],render:d,getTitle:function(){if(this.props.title){return this.translateIfNeeded(this.props.title)}},onClose:function(a){var b=this.getEditorAPI();b.panelManager.closePanelByPropKey("id",this.props.id);if(this.props.closeModalBiEvent){var c=this.props.closeModalBiParams||{};c.closeMethod=a;this.getEditorAPI().bi.event(this.props.closeModalBiEvent,c)}},getShortcuts:function(){var a=this;return{esc:function(){a.onClose(e.ESC)}}}})});define("tpa/addPanelData/music/musicSection",["lodash","addPanelData","tpa/superApps/superApps","tpa/superApps/superAppsConstants","util"],function(a,b,c,d,e){"use strict";var f=d.WIXMUSIC.APP_DEF_ID;var g=d.WIXMUSIC.WIDGET;var h=function(c){b.manager.start.register(["music"],a.partial(o,c))};var i=function(a){var b=k(a,true);var d={styleId:a.style||null};return c.addWidget(f,g,b,d)};var j=function(b,d,e){var h=k(d.structure);h=a.merge(h,{x:b.x||0,y:b.y||0});var i={styleId:d.structure.style||null,parentContainerRef:e};return c.addWidget(f,g,h,i)};function k(b,c){var d=c?null:{x:a.get(b,"layout.x")||0,y:a.get(b,"layout.y")||0};return a.merge({width:a.get(b,"layout.width"),height:a.get(b,"layout.height")},d)}function l(){return m(e.languages.getLanguageCode(),"wixMusicPlayerSection2_")}function m(a,b){return"addPanelData/sections/wixMusicPlayerSection_"+a+"/"+b+a+".png"}function n(){return[{id:"Music_Prop_Player_2",appDefinitionId:f,slug:"wix-music",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:680,height:210,x:14,y:71,scale:1,rotationInDegrees:0,fixedPosition:false},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"16",tpaData:{type:"TPAData",content:"{'wmp::paymentsId':'0352442c-26dc-415d-81f8-79d681c7efcf'}"},widgetId:g},style:{type:"TopLevelStyle",style:{properties:{"alpha-param_color_activeTrackColor":"1","alpha-param_color_albumArtistColor":"1","alpha-param_color_backgroundColor":"1","alpha-param_color_borderColor":"1","alpha-param_color_buyShareLinksColor":"1","alpha-param_color_controlBarColor":"1","alpha-param_color_dividersColor":"100","alpha-param_color_trackColor":"1","alpha-param_color_trackTitleColor":"1","param_boolean_wmp::isConnected":"true",param_boolean_trackListShow:"false","param_boolean_wmp::isMigrated":"true",param_color_activeTrackColor:"color_18",param_color_albumArtistColor:"color_15",param_color_backgroundColor:"color_11",param_color_borderColor:"color_15",param_color_buyShareLinksColor:"color_15",param_color_controlBarColor:"color_15",param_color_dividersColor:"color_12",param_color_trackColor:"color_15",param_color_trackTitleColor:"color_15",param_font_activeTrackButtonsFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_albumArtistFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_buyShareLinksFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_trackFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_trackTitleFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 1","style":{"bold":false,"italic":false,"underline":false},"size":"15","preset":"Body-L","editorKey":"font_7","fontStyleParam":true}',"param_font_wmp::numberTracksShown":"{}","param_font_wmp::paymentsId":'{"value":"0352442c-26dc-415d-81f8-79d681c7efcf"}',param_number_layout:"1","param_number_wmp::styleParamsVersion":"2"},propertiesSource:{"param_boolean_wmp::isConnected":"value","param_boolean_wmp::isMigrated":"value",param_color_activeTrackColor:"theme",param_color_albumArtistColor:"theme",param_color_backgroundColor:"theme",param_color_borderColor:"theme",param_color_buyShareLinksColor:"theme",param_color_controlBarColor:"theme",param_color_dividersColor:"theme",param_color_trackColor:"theme",param_color_trackTitleColor:"theme",param_font_activeTrackButtonsFont:"value",param_font_albumArtistFont:"value",param_font_buyShareLinksFont:"value",param_font_trackFont:"value",param_font_trackTitleFont:"value","param_font_wmp::numberTracksShown":"value","param_font_wmp::paymentsId":"value",param_number_layout:"value","param_number_wmp::styleParamsVersion":"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:160,x:0,y:0},label:"add_preset__WixMusic_Compact"}},{id:"Music_Prop_Player_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:350,height:700,x:315,y:18,scale:1,rotationInDegrees:0},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:f,slug:"wix-music",data:{type:"TPAWidget",applicationId:"16",widgetId:g},style:"tpaw0"},preset:{rect:{width:324,height:470,x:0,y:160},label:"add_preset__WixMusic_Classic"}}]}var o=function(a){return{type:b.addPanelDataConsts.SECTIONS_TYPES.PRESET,hide:false,title:"add_section_label_proplayer",showSectionHeader:true,additionalBehaviours:{labelMode:b.addPanelDataConsts.LABEL_BEHAVIOUR.HOVER,infoIcon:b.addPanelDataConsts.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:b.addPanelDataConsts.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{onClick:i,onDrop:j,image:l(),items:n()},help:{hide:false,text:"add_section_info_text_proplayer"},teaser:{id:"proplayer_section_teaser",hide:false,title:"add_section_teaser_title_proplayer",text:"add_section_teaser_text_proplayer",linkText:"add_category_teaser_link",learnMore:function(){c.openAppMarketInfoModal("wix-music");a.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:h}});define("tpa/addPanelData/video/videoSection",["lodash","addPanelData","tpa/superApps/superApps","tpa/superApps/superAppsConstants","addPanelDataConsts","experiment"],function(a,b,c,d,e,f){"use strict";var g=d.WIX_VIDEO.APP_DEF_ID;var h=d.WIX_VIDEO.WIDGET;function i(){b.manager.start.register(["video"],j)}function j(){var a={title:"ADD_SECTION_LABEL_WIXVIDEO",type:e.SECTIONS_TYPES.PRESET,hide:false,showSectionHeader:true,additionalBehaviours:{labelMode:e.LABEL_BEHAVIOUR.HOVER,infoIcon:e.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:e.HOVER_IMAGE_ACTIONS.NONE,iconEnabledForComps:{}},props:{image:"addPanelData/sections/videoSection_en/wixVideoSection_en.png",imageHover:null,items:o(),onClick:k,onDrop:l},help:{hide:false,text:"ADD_SECTION_INFO_TEXT_WIXVIDEO"}};if(f.isOpen("se_mediaplayer")){a.sectionNumber=0}return a}var k=function(a,b,d){var e=m(a,true);var f=n(a,d);return c.addWidget(g,h,e,f)};var l=function(b,d,e){var f=m(d.structure);f=a.merge(f,{x:b.x||0,y:b.y||0});var i=a.get(d,"tags");var j=n(d.structure,i);j.parentContainerRef=e;return c.addWidget(g,h,f,j)};function m(b,c){var d=c?null:{x:a.get(b,"layout.x")||0,y:a.get(b,"layout.y")||0};return a.merge({width:a.get(b,"layout.width"),height:a.get(b,"layout.height")},d)}function n(b,c){var d={styleId:a.get(b,"style")};if(c){d.dontStretch=c.shouldUnDock}return d}function o(){return[{id:"Video_Video_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:480,x:0,y:50,scale:1,rotationInDegrees:0,fixedPosition:false,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:h},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:{properties:{param_color_backgroundColor:"color_11",param_color_textColor:"color_15",param_number_channelLayout:"2",param_font_titleFont:'{"family":"proxima-n-w01-reg","displayName":"Large Heading","style":{"bold":false,"italic":false,"underline":false},"size":"40","preset":"Heading-L","editorKey":"font_4","fontStyleParam":true}',param_boolean_showChannelInfo:"true",param_color_buttonsAndLinksColor:"color_18","alpha-param_color_mainButtonTextColor":"1","alpha-param_color_backgroundColor":"1",param_boolean_showChannelCategories:"false","alpha-param_color_textColor":"1",param_font_textFont:'{"family":"proxima-n-w01-reg","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"15","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_color_mainButtonTextColor:"color_11","alpha-param_color_buttonsAndLinksColor":"1"},propertiesSource:{param_color_backgroundColor:"theme",param_color_textColor:"theme",param_number_channelLayout:"value",param_font_titleFont:"value",param_boolean_showChannelInfo:"value",param_color_buttonsAndLinksColor:"theme",param_boolean_showChannelCategories:"value",param_font_textFont:"value",param_color_mainButtonTextColor:"theme"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:130,x:0,y:0},label:"add_preset_WixVideo_Strip",tags:{shouldUnDock:false,googleFontsCssUrl:"",uploadFontFaces:""}}},{id:"Video_Video_2",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:706,x:90,y:50,scale:1,rotationInDegrees:0,fixedPosition:false},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:h},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:{properties:{param_color_backgroundColor:"color_11",param_color_textColor:"color_15",param_font_titleFont:'{"family":"proxima-n-w01-reg","displayName":"Large Heading","style":{"bold":false,"italic":false,"underline":false},"size":"40","preset":"Heading-L","editorKey":"font_4","fontStyleParam":true}',param_boolean_showChannelInfo:"true",param_color_buttonsAndLinksColor:"color_18","alpha-param_color_mainButtonTextColor":"1","alpha-param_color_backgroundColor":"1",param_boolean_showChannelCategories:"false","alpha-param_color_textColor":"1",param_font_textFont:'{"family":"proxima-n-w01-reg","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"15","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_color_mainButtonTextColor:"color_11","alpha-param_color_buttonsAndLinksColor":"1"},propertiesSource:{param_boolean_showChannelCategories:"value",param_boolean_showChannelInfo:"value",param_color_backgroundColor:"theme",param_color_buttonsAndLinksColor:"theme",param_color_mainButtonTextColor:"theme",param_color_textColor:"theme",param_font_textFont:"value",param_font_titleFont:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:234,x:0,y:130},label:"add_preset_WixVideo_Classic"}}]}return{registerSection:i}});define("tpa/addPanelData/styleParamUtils",["lodash"],function(a){"use strict";function b(b){var g=[];var h={numbers:c,booleans:d,colors:e,fonts:f};a.forEach(h,function(c,d){var e=b[d];a.forEach(e,function(a,b){c(e,b,g)})});return g}function c(b,c,d){if(a.has(b,c)){d.push({key:c,type:"number",param:{value:b[c]}})}}function d(b,c,d){if(a.has(b,c)){d.push({key:c,type:"boolean",param:{value:b[c]}})}}function e(b,c,d){if(a.has(b,c)){var e={opacity:a.isNumber(b[c].opacity)?b[c].opacity:1};if(b[c].rgba){e.rgba=b[c].rgba}else if(b[c].name){e.color={name:b[c].name}}d.push({key:c,type:"color",param:{value:e}})}}function f(b,c,d){if(a.has(b,c)){d.push({key:c,type:"font",param:{value:b[c]}})}}return{getTagsAsStyleParamsArray:b}});define("tpa/addPanelData/gallery/proGalleriesSection",["lodash","addPanelData","panels","tpa/addPanelData/styleParamUtils","tpa/superApps/superApps","experiment"],function(a,b,c,d,e,f){"use strict";var g="14271d6f-ba62-d045-549b-ab972ae1f70e";var h="142bb34d-3439-576a-7118-683e690a1e0d";var i=function(){if(f.isOpen("se_proGalleries")){b.manager.start.register(["gallery"],function(){return m()})}};var j=function(a,b,c){return e.addWidget(g,h,null,{dontStretch:c.booleans.shouldUnDock,cb:function(a){k(a.id,c)}})};var k=function(a,b){var c=d.getTagsAsStyleParamsArray(b);e.setStyleParam(g,a,c)};var l=function(a,b){return e.addWidget(g,h,null,{dontStretch:b.tags.booleans.shouldUnDock,cb:function(a){k(a.id,b.tags)}})};var m=function(){return{type:b.addPanelDataConsts.SECTIONS_TYPES.PRESET,hide:false,title:"design_section_label_explore_gallery_progallery",showSectionHeader:true,sectionNumber:0,additionalBehaviours:{labelMode:b.addPanelDataConsts.LABEL_BEHAVIOUR.HOVER,infoIcon:b.addPanelDataConsts.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:b.addPanelDataConsts.HOVER_IMAGE_ACTIONS.VIDEO,iconEnabledForComps:{}},props:{onClick:j,onDrop:l,image:"addPanelData/sections/proGalleriesSection_en/add-panel-pro-gallery-section.png",items:[{id:"Gallery_Pro_Galleries_3",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:false,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"sdf"},preset:{rect:{width:324,height:174,x:0,y:0},label:"add_preset_Galleries_Pro_Galleries_1",tags:{numbers:{collageDensity:80,gallerySize:30,galleryLayout:0,"te-padding-slider":30},booleans:{shouldUnDock:false,allowTitle:true,addPanel:true},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},itemFont:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},"text-editor-font":{family:"raleway",style:{bold:false,italic:false,underline:false},size:40,preset:"Custom",editorKey:"font_2",fontStyleParam:true},titleFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-1"}}},{id:"Gallery_Pro_Galleries_2",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:false,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:324,height:192,x:0,y:174},label:"add_preset_Galleries_Pro_Galleries_2",tags:{numbers:{collageDensity:100,gallerySize:20,galleryLayout:2,"te-padding-slider":30},booleans:{shouldUnDock:false,addPanel:true},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"
},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},itemFont:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},"text-editor-font":{family:"din-next-w01-light",displayName:"Page Title",style:{bold:false,italic:false,underline:false},size:25,preset:"Page-title",editorKey:"font_2",fontStyleParam:true},titleFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-2",ignoreMargins:true}}},{id:"Gallery_Pro_Galleries_1",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:false,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:324,height:190,x:0,y:366},label:"add_preset_Galleries_Pro_Galleries_3",tags:{numbers:{collageDensity:100,gallerySize:40,galleryLayout:1,isVertical:1},booleans:{shouldUnDock:false,addPanel:true},colors:{bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},itemFont:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},titleFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-3",ignoreMargins:true}}},{id:"Gallery_Pro_Galleries_4",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:false,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:162,height:182,x:0,y:556},label:"add_preset_Galleries_Pro_Galleries_5",tags:{numbers:{galleryLayout:2,"te-padding-slider":30},booleans:{shouldUnDock:true,addPanel:true},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Body-M",editorKey:"font_8",size:15,displayName:"Paragraph 2",fontStyleParam:true},itemFont:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Body-M",editorKey:"font_8",size:15,displayName:"Paragraph 2",fontStyleParam:true},"text-editor-font":{family:"raleway",style:{bold:false,italic:false,underline:false},size:40,preset:"Custom",editorKey:"font_2",fontStyleParam:true},titleFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Body-L",editorKey:"font_7",size:17,displayName:"Paragraph 1",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-4",ignoreMargins:true}}},{id:"Gallery_Pro_Galleries_5",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:0,y:62,scale:1,rotationInDegrees:0,fixedPosition:false},style:"xcv"},preset:{rect:{width:162,height:198,x:0,y:738},label:"add_preset_Galleries_Pro_Galleries_6",tags:{numbers:{galleryLayout:1,isVertical:1},booleans:{shouldUnDock:true,addPanel:true},colors:{itemOpacity:{name:"color_15",opacity:.6},itemFontColor:{name:"color_11"}},fonts:{itemFont:{family:"din-next-w01-light",displayName:"Paragraph 2",style:{bold:false,italic:false,underline:false},size:15,preset:"Body-M",editorKey:"font_8",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-5",ignoreMargins:true}}},{id:"Gallery_Pro_Galleries_6",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:0,y:62,scale:1,rotationInDegrees:0,fixedPosition:false},style:"fff"},preset:{rect:{width:162,height:380,x:162,y:556},label:"add_preset_Galleries_Pro_Galleries_4",tags:{numbers:{collageDensity:100,gallerySize:30,galleryLayout:6},booleans:{shouldUnDock:true,addPanel:true},colors:{bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},itemFont:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true},titleFontExpand:{style:{italic:false,bold:false,underline:false},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:true}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-6",ignoreMargins:true}}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:false,text:"add_section_info_text_progallery"}}};return{registerSection:i}});define("tpa/addPanelData/contact/contactSection",["staticAssets","addPanelData","util","tpa/superApps/superApps"],function(a,b,c,d){"use strict";var e="1375baa8-8eca-5659-ce9d-455b2009250d";var f="1375babd-6f2b-87ed-ff19-5778602c8b86";var g=function(a){b.manager.start.register(["contact"],function(){return j(a)})};var h=function(){return d.addWidget(e,f)};var i=function(a){var b={width:350,height:700,x:a.x,y:a.y};return d.addWidget(e,f,b)};var j=function(a){return{type:b.addPanelDataConsts.SECTIONS_TYPES.PRESET,hide:false,title:"add_section_label_getsubscribers",additionalBehaviours:{labelMode:b.addPanelDataConsts.LABEL_BEHAVIOUR.NONE,infoIcon:b.addPanelDataConsts.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:b.addPanelDataConsts.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},showSectionHeader:true,props:{onClick:h,onDrop:i,image:"addPanelData/sections/getSubscribersSection_"+c.languages.getLanguageCode()+"/getSubscribersSection_"+c.languages.getLanguageCode()+".png",items:[{structure:{layout:{x:315,y:650,width:500,height:122,scale:1,rotationInDegrees:0},type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:e,slug:"wix-get-subscribers",data:{widgetId:f,applicationId:"18",type:"TPAWidget",metaData:{isHidden:false,isPreset:true,schemaVersion:"1.0"}},style:"tpaw0"},preset:{rect:{width:324,height:110,x:0,y:0},label:""}}]},help:{hide:false,text:"add_section_info_text_getsubscribers"},teaser:{id:"get_subscribers_section_teaser",hide:false,title:"add_section_teaser_title_getsubscribers",text:"add_section_teaser_text_getsubscribers",linkText:"add_category_teaser_link",learnMore:function(){d.openAppMarketInfoModal("wix-get-subscribers");a.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:g}});define("tpa/compPanels/baseTpaMessage.rt",["react","lodash","panels"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-base-message-panel "+this.props.classNamespace},a.createElement(c.frames.messagePanelFrame,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:"tpa_messages_ok",panelTitle:this.props.title,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"content-wrapper"},"\n            ",this.props.children,"\n        ")))}});define("tpa/compPanels/baseTpaMessage",["react","core","tpa/compPanels/baseTpaMessage.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"baseTpaMessage",mixins:[b.mixins.editorAPIMixin],close:function(){var a=this.getEditorAPI();a.panelManager.closePanelByName(this.props.panelName)},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.close()},esc:function(){a.close()}}},render:c})});define("tpa/compPanels/sectionAlreadyInstalled.rt",["react","lodash","tpa/compPanels/baseTpaMessage"],function(a,b,c){"use strict";return function(){return a.createElement(c,{classNamespace:"section-already-installed",panelName:this.props.panelName,onConfirm:this.props.onConfirm,title:this.translateIfNeeded("tpa_messages_page_already_installed_title")},a.createElement("div",{className:"icon"},a.createElement("img",{src:this.props.appIcon,alt:"app icon"})),a.createElement("div",{className:"textual"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getText()}}),a.createElement("p",{},this.translateIfNeeded("tpa_messages_page_already_installed_text_2"))))}});define("tpa/compPanels/sectionAlreadyInstalled",["lodash","react","core","util","tpa/compPanels/sectionAlreadyInstalled.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"sectionAlreadyInstalled",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.message.sectionAlreadyInstalled"}},getText:function(){var a={app_name:this.props.appName};return this.translateTemplate("tpa_messages_page_already_installed_text",a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Adding page app again to site",type:"add_page"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})});define("tpa/compPanels/cannotDeleteSection.rt",["react","lodash","tpa/compPanels/baseTpaMessage","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{classNamespace:"tpa-cannot-delete-section",panelName:this.props.panelName,onConfirm:this.props.onConfirm,title:this.getTitle()},a.createElement("div",{className:"icon"},a.createElement(d.symbol,{name:"plaster"})),a.createElement("div",{className:"textual"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}})))}});define("tpa/compPanels/cannotDeleteSection",["lodash","react","core","util","tpa/compPanels/cannotDeleteSection.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"cannotDeleteSection",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.message.cannotDeleteSection"}},getInitialState:function(){return{}},getTitle:function(){var a={app_name:this.props.appName};return this.translateTemplate(this.props.title,a,this.getEditorAPI())},getFirstParagraph:function(){var a={app_name:this.props.appName};return this.translateTemplate("tpa_messages_oops_text",a,this.getEditorAPI())},getSecondParagraph:function(){var a=this.getEditorAPI();var b={page_name:a.pages.getCurrentUrlPageTitle()};return this.translateTemplate("tpa_messages_oops_text_2",b,a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Trying to delete page app",type:"cant_delete_page_app"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})});define("tpa/compPanels/tpaNewPageAdded.rt",["react","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.onConfirm()}function g(){this.onConfirm()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:true,panelName:this.props.panelName,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"tpa-new-page-added"},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:f.bind(this),'"':true},a.createElement(e.symbol,{name:"headerCloseButton"})),a.createElement(d.symbol,{name:"newPageAdded"}),a.createElement("div",{className:"panel-header-title"},a.createElement("div",{className:"title-text",dangerouslySetInnerHTML:{__html:this.getTitleText()}}))),a.createElement("div",{className:"content"},a.createElement("div",{className:"price"},"\n                ",this.translateIfNeeded("tpa_messages_new_page_added_text"),"\n            "),a.createElement("div",{className:"ok-btn"},a.createElement(d.button,{className:"btn-ok",onClick:g.bind(this),label:"tpa_messages_ok"})))))}});define("tpa/compPanels/tpaNewPageAdded",["lodash","react","util","panels","tpa/compPanels/tpaNewPageAdded.rt","core","tpa/bi/bi"],function(a,b,c,d,e,f,g){"use strict";return b.createClass({displayName:"newPageAddedSectionApp",mixins:[c.translationMixin,f.mixins.editorAPIMixin,d.mixins.panelFrameMixin],getDefaultProps:function(){return{panelName:"tpa.message.newPageAdded"}},getTitleText:function(){var a={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_title",a)},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Adding page app to site",type:"add_page"};this.getEditorAPI().bi.event(g.events.TPA_MESSAGE_LOADED,a)},onConfirm:function(){this.close()},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.onConfirm()},esc:function(){a.onConfirm()}}},render:e})});define("tpa/compPanels/baseTpaConfirmation.rt",["react","lodash","panels","baseUI"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.frames.confirmationPanelFrame,{type:this.props.type,panelName:this.props.panelName,onCancel:this.close,onConfirm:this.props.onConfirm,confirmLabel:this.props.confirmLabel,cancelLabel:"tpa_messages_cancel",panelTitle:this.props.title},a.createElement("div",{className:"content-wrapper"},this.props.svgName?a.createElement("div",{className:"icon",key:"icon"},a.createElement(d.symbol,{name:this.props.svgName})):null,a.createElement("div",{className:"content"},this.props.children)))}});define("tpa/compPanels/baseTpaConfirmation",["react","panels","tpa/compPanels/baseTpaConfirmation.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"baseTpaConfirmation",close:function(){if(this.props.onCancel){this.props.onCancel()}},onConfirm:function(){this.close();this.props.onConfirm()},render:c})});define("tpa/compPanels/premiumTPADeleteConfirmation.rt",["react","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.props.onConfirm,svgName:"deleteConfirmationIcon"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}}),a.createElement("p",{},this.getThirdParagraph())))}});define("tpa/compPanels/premiumTPADeleteConfirmation",["lodash","react","core","util","tpa/compPanels/premiumTPADeleteConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"premiumTPADeleteConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.confirmation.deleteContainerContainsPremiumTpa"}},getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_app_text"));return b({app_name:this.props.appName})},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},getThirdParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_app_question_app_text"));return b()},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},render:e})});define("tpa/compPanels/deletePageContainsPremiumTpaConfirmation.rt",["react","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper delete-page-contains-premium-tpa-confirmation"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.onDeleteClick,onCancel:this.props.onCancel,svgName:"deleteConfirmationIcon"},this.props.appCount===1?a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()},key:"singularMessage"}):null,this.props.appCount>1?a.createElement("p",{key:"pluralMessage"},this.getFirstParagraphPlural()):null,a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}}),a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getThirdParagraph()}})))}});define("tpa/compPanels/deletePageContainsPremiumTpaConfirmation",["lodash","react","core","util","tpa/compPanels/deletePageContainsPremiumTpaConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"deletePageContainsPremiumTpaConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.confirmation.deletePageContainsPremiumTpa"}},getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_page_text"));return b({app_name:this.props.appName})},getFirstParagraphPlural:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_page_plurals_text"));return b()},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},getThirdParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_page_question_page_text"));return b({page_name:this.props.pageTitle})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting page with premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},onDeleteClick:function(){this.props.onConfirm(this.getEditorAPI())},render:e})});define("tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation.rt",["react","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.onDeleteClick,svgName:"deleteConfirmationIcon"},this.props.appCount===1?a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getFirstParagraph()},key:"singularMessage"}):null,this.props.appCount>1?a.createElement("p",{key:"pluralMessage"},this.getFirstParagraphPlural()):null,a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getSecondParagraph()}})))}});define("tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation",["lodash","react","core","util","tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation.rt","tpa/bi/bi"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"deleteContainerContainsPremiumTpaConfirmation",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.confirmation.sectionDelete"}},getInitialState:function(){return{}},getFirstParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_container_text"));return b({app_name:this.props.appName})},getFirstParagraphPlural:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_premium_container_plurals_text"));return b()},getSecondParagraph:function(){var b=a.template(this.translateIfNeeded("tpa_messages_stop_payments_text"));return b({url:"https://premium.wix.com/wix/api/PaymentConsole"})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting container with premium app",type:"delete_premium"};this.getEditorAPI().bi.event(f.events.TPA_MESSAGE_LOADED,a)},onDeleteClick:function(){this.props.onConfirm(this.getEditorAPI())},render:e})});define("tpa/compPanels/sectionDelete.rt",["react","lodash","tpa/compPanels/baseTpaConfirmation"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:"tpa-delete-confirmation-wrapper"},a.createElement(c,{type:"important",title:this.translateIfNeeded("tpa_messages_are_you_sure_title"),panelName:this.props.panelName,confirmLabel:"tpa_messages_delete",onConfirm:this.props.onConfirm,svgName:"generalDeleteIcon"},a.createElement("p",{dangerouslySetInnerHTML:{__html:this.getText()}})))}});define("tpa/compPanels/sectionDelete",["lodash","react","core","util","tpa/bi/bi","tpa/compPanels/sectionDelete.rt"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"sectionDelete",mixins:[d.translationMixin,c.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.confirmation.sectionDelete"}},getInitialState:function(){return{}},getText:function(){var b=a.template(this.translateIfNeeded("tpa_messages_delete_page_with_section_text"));return b({app_name:this.props.appName,page_name:this.props.pageName})},componentDidMount:function(){var a={app_id:this.props.appDefId,description:"Deleting page with section app",type:"delete_page_with_section_app"};this.getEditorAPI().bi.event(e.events.TPA_MESSAGE_LOADED,a)},render:f})});define("tpa/compPanels/addEcom.rt",["react","lodash","panels","baseUI","symbols"],function(a,b,c,d,e){"use strict";function f(){this.onCancel()}function g(){this.onConfirm()}return function(){return a.createElement(c.frames.focusPanelFrame,{shouldHideHeader:true,panelName:this.props.panelName,keyboardShortcuts:this.getKeyboardShortcuts()},a.createElement("div",{className:"add-ecom"},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:f.bind(this),'"':true},a.createElement(e.symbol,{name:"headerCloseButton"})),a.createElement(d.symbol,{name:"newPageAdded"})),a.createElement("div",{className:"content"},a.createElement("div",{},"\n                ",this.getTitleText(),"\n            "),a.createElement("div",{className:"ok-btn"},a.createElement(d.button,{className:"btn-ok",onClick:g.bind(this),label:"tpa_messages_ok"})))))}});define("tpa/compPanels/addEcom",["react","core","util","tpa/bi/bi","tpa/compPanels/addEcom.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"addEcom",mixins:[c.translationMixin,b.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"tpa.confirmation.addEcom"}},getTitleText:function(){return"Do you want to add the eCom app?"},getKeyboardShortcuts:function(){var a=this;return{enter:function(){a.onConfirm()},esc:function(){a.onCancel()}}},onCancel:function(){this.close()},onConfirm:function(){this.props.onConfirm();this.close()},close:function(){var a=this.getEditorAPI();a.panelManager.closePanelByName(this.props.panelName)},render:e})});define("tpa/superApps/gfpp/superAppsCustomData",["tpaGfppData"],function(a){"use strict";var b=function(){return a.getData()};return{getSuperAppsCustomData:b}});define("tpa/experiments/experiments",["experiment"],function(a){"use strict";var b=function(){return a.isOpen("se_ecomAddApp")};var c=function(){return a.isOpen("StorePagesUsability1b")};var d=function(){return a.isOpen("se_shouldShowPhotoAlbumsAbout")};return{isEcomAddAppExperimentOn:b,isStorePagesUsability1bExperimentOn:c,isShouldShowPhotoAlbumsAboutExperimentOn:d}});define("tpa/superApps/gfpp/superAppsGfppDataCacheService",["lodash","panels","tpa/superApps/superApps","tpa/superApps/gfpp/superAppsCustomData","tpa/constants/constants","tpa/experiments/experiments"],function(a,b,c,d,e,f){"use strict";var g={};var h=function(){return g};var i=function(a){var b=d.getSuperAppsCustomData();g=j(a,b)};var j=function(b,c){a.forEach(c,function(c){a.forEach(c,function(c){c.actions=a.filter(c.actions,function(a){return l(a)&&k(b,a)})})});return c};var k=function(b,d){var e={openDashboardUrl:m,openSuperAppsModal:c.openSuperAppsModal,openPanel:b.openPanel};if(a.get(d,"onClick.name")&&a.get(d,"onClick.params")){var f=e[d.onClick.name];if(a.isFunction(f)){d.onClick=f.bind.apply(f,[null].concat(d.onClick.params));return true}return false}return false};var l=function(b){if(b.experiment){var c=f[b.experiment];if(a.isFunction(c)&&c()){delete b.experiment;return true}}else{return true}};var m=function(b,d,f,g,h,i,j,k){if(a.isObject(b)){c.openDashboardUrl(b.appDefId,b.width,b.height,{state:b.state,title:b.title,origin:b.origin,widgetId:b.widgetId,onClose:c.refreshAppCompsForAppDefId.bind(undefined,b.appDefId),shouldNotCloseOnBlur:b.shouldNotCloseOnBlur,isBareMode:b.isBareMode,options:b.options},{type:e.BI.type.GFPP_MANAGE})}else{var l=b;c.openDashboardUrl(l,f,g,{state:d,title:h,origin:i,widgetId:j,onClose:c.refreshAppCompsForAppDefId.bind(undefined,l),shouldNotCloseOnBlur:k},{type:e.BI.type.GFPP_MANAGE})}};var n=function(){g={}};return{init:i,getCustomMainActions:h,clearCustomMainActions:n}});define("tpa/superApps/gfpp/superAppsGfppData",["lodash","tpa/superApps/superApps","tpa/superApps/gfpp/superAppsGfppDataCacheService"],function(a,b,c){"use strict";var d=function(){return c.getCustomMainActions()};var e=function(a,b,c){var e=d();var f=e[b];if(f&&f[c]){return f[c]}else if(f&&f[b]){return f[b]}};var f=function(b){var c=d();return!a.isUndefined(c[b])};var g=function(a,c){if(b.hasPremiumOffering(a)){var e=d();var f=e[a];if(f&&f[c]){return f[c].showUpgrade}else if(f&&f[a]){return f[a].showUpgrade}}return false};return{getCustomMainActionsFor:e,hasCustomActions:f,hasExternalUpgrade:g}});define("tpa/gfpp/tpaGfppData",["lodash","core","tpa/packagePicker/packagePicker","tpa/services/dashboardAppService","tpa/superApps/gfpp/superAppsGfppData","tpa/constants/constants","tpa/bi/bi","tpa/utils/tpaUtils","tpa/settings/settings","tpa/services/tpaHelpService","experiment"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=function(a,b){m(a,b);i.open(a,b)};function m(a,b){var c=a.components.data.get(b)||{};var d=a.tpa.app.getData(c.applicationId);if(d&&d.appDefinitionId){n(a,g.events.APP_INTENT,d.appDefinitionId)}}function n(a,b,c){h.bi.reportBIOnAppIntent(a,b,c,f.BI.initiator.EDITOR,f.BI.type.GFPP_SETTINGS,true)}var o={label:"gfpp_mainaction_tpa",isApplied:true,onClick:l};var p=function(a,b){if(b){window.open(b);v(a)}};var q=function(a,b){return{label:b,isApplied:true,shouldTranslate:false,onClick:function(){d.getDashboardAppUrlAsync(a,p.bind(null,a))}}};function r(b,c){var d=a.get(c,"appDefinitionId");a.forEach(b,function(a){a.appId=d})}var s=function(a){var b=[o];A(a,b);var c=a.selection.getSelectedComponentData();var d=a.tpa.app.getData(c.applicationId);if(e.hasCustomActions(d.appDefinitionId)){y(a,d.appDefinitionId,c.widgetId,b)}r(b,d);return b};var t=function(a,b){if(w(a)){return[b.UPGRADE,b.HELP]}return[b.HELP]};var u=function(e){var i={help:{isSelected:false,tooltip:"gfpp_tooltip_help",onClick:function(){var c=z(e);var d=e.selection.getSelectedComponentData().widgetId;var f={widget_id:d,app_id:c.appDefinitionId,origin:"gfpp"};var h={openPanelBiEvent:g.events.TPA_HELP_CLICK,openPanelBiParams:a.merge({help_status:"open"},f),closePanelBiParams:a.merge({help_status:"close"},f),closePanelBiEvent:g.events.TPA_HELP_CLICK};d=d||e.tpa.app.getMainSectionWidgetData(c).widgetId;j.getHelpId(e,c.appDefinitionId,d,j.HELP_END_POINTS.WIDGET).then(function(a){var c={origin:b.constants.BI.HELP.ORIGIN.GFPP,component:e.selection.getSelectedComponentType(),learn_more:false};e.panelManager.openHelpCenter(a,h,c)})}},upgrade:{isSelected:false,shouldTranslate:function(){if(k.isOpen("gfppUpgradeTooltip")){return!d.getEditorGfppData(e).upgradeText}return false},tooltip:function(){if(k.isOpen("gfppUpgradeTooltip")){return d.getEditorGfppData(e).upgradeText||"tpa_package_picker_upgrade_title"}return d.getEditorGfppData(e).upgradeText},icon:"upgrade",onClick:function(){var a=z(e);h.bi.reportBIOnAppIntent(e,g.events.APP_INTENT,a.appDefinitionId,f.BI.initiator.EDITOR,f.BI.type.GFPP_UPGRADE,true);c.startUpgradeFlow(e,a.appDefinitionId,false,{origin:"gfpp"});var b={pp_origin:"gfpp",app_site_id:a.instanceId,app_id:a.appDefinitionId};e.bi.event(g.events.CLICK_UPGRADE_APP,b)}}};r(i,z(e));return i};var v=function(a){var b=a.selection.getSelectedComponentData();var c=a.tpa.app.getData(b.applicationId);var d={app_id:c.appDefinitionId,app_site_id:c.instanceId,instance_id:b.id,origin:"gfpp"};a.bi.event(g.events.OPEN_DASHBOARD_APP_CLICK,d)};var w=function(a){var b=a.selection.getSelectedComponentData();var d=a.tpa.app.getData(b.applicationId);if(e.hasExternalUpgrade(d.appDefinitionId,b.widgetId)){return true}var f=a.tpa.app.hasPremiumOffering(b.applicationId);if(f){var g=c.isFullyUpgraded(a,d);return!g}return false};var x=function(a){var b;var c=d.getEditorGfppData(a);if(c.openInDashboard){b=q(a,c.openInDashboardText)}return b};var y=function(b,c,d,f){var g=e.getCustomMainActionsFor(b,c,d);if(!a.isEmpty(g)){a.forEach(g.actions,function(a){if(a.addAtBack){C(a,f)}else{B(a,f)}})}};var z=function(a){var b=a.selection.getSelectedComponentData();return a.tpa.app.getData(b.applicationId)};var A=function(b,c){var d=x(b);if(!a.isEmpty(d)){c.push(d)}};var B=function(b,c){if(!a.isEmpty(b)){c.unshift(b)}};var C=function(b,c){if(!a.isEmpty(b)){c.push(b)}};return{mainActions:s,enabledActions:t,presetActions:u}});define("tpa/services/tpaDeleteService",["lodash","util","tpa/services/tpaAddRemoveDSService"],function(a,b,c){"use strict";var d=function(a,d,e,f){var g=a.components.data.get(d);var h=a.tpa.app.isPremium(g.applicationId);var i=a.tpa.app.getData(g.applicationId);var j=a.tpa.app.hasSections(i);if(h&&!j&&e){a.panelManager.openPanel("tpa.confirmation.premiumTPADelete",{appName:i.appDefinitionName,appDefId:i.appDefinitionId,onConfirm:function(){var e=a.tpa.app.isLastAppComp(g.applicationId);c.deleteWidget(a,d);var h={app_id:i.appDefinitionId,app_site_id:i.instanceId,instance_id:d.id,is_last_tpa:e?1:0,component_type:"tpa"};a.bi.event(b.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,h);if(f){f()}}},true)}else{c.deleteWidget(a,d);if(f){f()}}};var e=function(a,b,d,e){a.pages.beforePageRemoveHook(b,function(){c.deleteSection(a,b,e);if(d){d()}})};var f=function(c,d,f,g,h,i,j){a.assign(j,j);var k=c.tpa.app.isMultiSectionInstalled(g.applicationId);if(h&&!k&&!g.demoMode){c.panelManager.openPanel("tpa.confirmation.sectionDelete",{appName:g.appDefinitionName,pageName:f,appDefId:g.appDefinitionId,onConfirm:function(){e(c,d,i,j);var f=a.clone(j);f=a.map(f,function(b){return a.pick(b,["app_id","app_site_id","component_id","component_type","instance_id","is_last_tpa"])});c.bi.reportBI(b.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,f)}},true)}else if(h){c.panelManager.openPanel("panels.messagePanels.deletePageMessage",{pageTitle:f,onConfirm:function(){e(c,d,i,j)}},true)}else{e(c,d,i,j)}};var g=function(a,b){var c=a.components.data.get(b);var d=a.tpa.app.getData(c.applicationId);a.panelManager.openPanel("tpa.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:d.appDefinitionName,appDefId:d.appDefinitionId},true)};return{deleteWidget:d,deleteSection:f,displaySectionDeleteMessage:g}});define("tpa/superApps/superAppsOnStageActionsService",["lodash","tpa/superApps/superApps","tpa/superApps/superAppsConstants"],function(a,b,c){
"use strict";var d={};var e=function(a,b){if(a&&d[a]){var c=d[a][b||a];if(c){c.call()}}};var f=function(b,c){return a.isObject(d[b])&&!a.isUndefined(d[b][c])};var g=function(){var a=c.WIXMUSIC_APP_DEF_ID;d[a]={};d[a][c.WIXMUSIC.WIDGET]=h.bind(this,a,"","970px","650px","Manage Your Music")};var h=function(a,c,d,e,f){var g={appDefId:a,appWidth:d,appHeight:e};b.openDashboardUrl(g.appDefId,g.appWidth,g.appHeight,{state:c,title:f})};return{init:g,mainAction:e,hasCustomDoubleClickAction:f}});define("tpa/services/tpaCopyPasteService",["lodash","tpa/services/tpaDeleteService","tpa/services/tpaAddRemoveDSService"],function(a,b,c){"use strict";var d=function(a,b){b.originCompId=a.id;return b};var e=function(b,d,e){var f=a.get(e,"data.applicationId");var g=a.get(e,"data.widgetId");var h=a.get(e,"originCompId");var i=b.tpa.app.getData(f);var j=b.components.get.byId(h);var k=b.components.layout.isHorizontallyStretchedToScreen(j);return c.addWidget(b,i.appDefinitionId,{widgetId:g,componentDefinition:e,parentContainerRef:d,invokeAddAppCallbacks:false,dontStretch:!k})};var f=function(a,c){b.deleteWidget(a,c,false)};return{copyComponentPlugin:d,addComponentPlugin:e,cutComponentPlugin:f}});define("tpa",["lodash","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaPostMessageService","tpa/services/tpaPreviewPostMessageService","tpa/appMarket/services/appMarketPostMessageService","tpa/appMarket/services/appMarketTabService","tpa/settings/compPanels/tpaSettings","tpa/compPanels/appMarketPanel","tpa/packagePicker/packagePicker","tpa/compModals/appMarketAppModal","tpa/compModals/appMarketPermissionsModal","tpa/compModals/tpaSettingsModal","tpa/compModals/appMarketModal","tpa/services/navigateAndOpenAppService","tpa/addPanelData/section","tpa/addPanelData/music/musicSection","tpa/addPanelData/video/videoSection","tpa/addPanelData/gallery/proGalleriesSection","tpa/addPanelData/contact/contactSection","tpa/compPanels/sectionAlreadyInstalled","tpa/compPanels/cannotDeleteSection","tpa/compPanels/tpaNewPageAdded","tpa/compPanels/premiumTPADeleteConfirmation","tpa/compPanels/deletePageContainsPremiumTpaConfirmation","tpa/compPanels/deleteContainerContainsPremiumTpaConfirmation","tpa/compPanels/sectionDelete","tpa/compPanels/addEcom","tpa/bi/bi","tpa/superApps/superApps","tpa/services/pendingAppsService","tpa/services/dashboardAppService","tpa/gfpp/tpaGfppData","tpa/addPanelData/addPanelService","tpa/services/tpaDeleteService","tpa/services/tpaCompNameService","tpa/handlers/editorTPAHandlers","tpa/appMarket/utils/appMarketUtils","tpa/appMarket/appMarketHandlers","tpa/settings/settings","tpa/experiments/experiments","tpa/superApps/superAppsOnStageActionsService","tpa/superApps/superAppsConstants","tpa/superApps/gfpp/superAppsGfppDataCacheService","tpa/services/tpaCopyPasteService","tpa/handlers/editorSuperAppsHandlers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){"use strict";var U=false;var V;var W=function(a){V=a;d(a,window.addEventListener).addListenerToTpaMessage();e.init(a);f.init(a);D.init(a);R.init(a.panelManager)};var X=function(c){var d=b.isInDevMode();c.tpa.initEditor(d,O);ea(c);var e=c.pluginService;a.forEach(c.tpa.constants.COMP_TYPES,function(a){c.registerCompNamePlugin(a,J.getCompName.bind(null,c));e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,a,$)});a.forEach(c.tpa.constants.TPA_COMP_TYPES,function(a){c.registerCompNamePlugin(a,J.getCompName.bind(null,c));e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,a,$)});c.registerRemovePlugin(c.tpa.constants.COMP_TYPES.TPA_WIDGET,I.deleteWidget.bind(null,c));c.registerRemovePlugin(c.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,I.deleteWidget.bind(null,c));c.registerRemovePlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,I.deleteWidget.bind(null,c));c.registerRemovePlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,I.deleteWidget.bind(null,c));c.registerRemovePlugin(c.tpa.constants.COMP_TYPES.TPA_SECTION,I.deleteSection.bind(null,c));c.registerRemovePlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,I.deleteSection.bind(null,c));c.registerCopyComponentPlugin(c.tpa.constants.COMP_TYPES.TPA_WIDGET,S.copyComponentPlugin);c.registerCopyComponentPlugin(c.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,S.copyComponentPlugin);c.registerCopyComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,S.copyComponentPlugin);c.registerCopyComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,S.copyComponentPlugin);c.registerAddComponentPlugin(c.tpa.constants.COMP_TYPES.TPA_WIDGET,S.addComponentPlugin);c.registerAddComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,S.addComponentPlugin);c.registerAddComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,S.addComponentPlugin);c.registerAddComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,S.addComponentPlugin);c.registerCutComponentPlugin(c.tpa.constants.COMP_TYPES.TPA_WIDGET,S.cutComponentPlugin.bind(null,c));c.registerCutComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,S.cutComponentPlugin.bind(null,c));c.registerCutComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,S.cutComponentPlugin.bind(null,c));c.registerCutComponentPlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,S.cutComponentPlugin.bind(null,c));c.registerCannotRemovePlugin(c.tpa.constants.COMP_TYPES.TPA_SECTION,I.displaySectionDeleteMessage.bind(null,c));c.registerCannotRemovePlugin(c.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,I.displaySectionDeleteMessage.bind(null,c));c.tooltipTextService.registerTooltipText(c.tpa.constants.COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip");c.tooltipTextService.registerTooltipText(c.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip");c.tooltipTextService.registerTooltipText(c.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip");c.tooltipTextService.registerTooltipText(c.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip");g.openAppMarketTabFromUrlParamIfNeeded(c.panelManager.openPanel);o.handleIfComingFromETPA(c);c.registerInitUserPrefsCallback(function(){E.updateNotification(c)});fa(c);_(c);c.tpa.billing.getPremiumApps(c.site.getMetaSiteId());c.registerSitePublishedCallbacks(ca.bind(null,c));c.registerDeviceTypeChangeCallbacks(da.bind(null,c));aa(c);C.registerEvents(c);Y(c);c.tpa.addSystemApp(Q.WIX_CHAT.APP_DEF_ID,{widgetId:Q.WIX_CHAT.WIDGET})};var Y=function(a){if(a.tpa.app.isInstalled(Q.ECOM.APP_DEF_ID)){if(!Z(a)){a.bi.error(C.errors.ECOM_MISSING_PAGES);if(O.isEcomAddAppExperimentOn()){a.panelManager.openPanel("tpa.confirmation.addEcom",{onConfirm:function(){a.tpa.section.add(Q.ECOM.APP_DEF_ID)}},true)}}}};var Z=function(b){var c=b.tpa.app.getDataByAppDefId(Q.ECOM.APP_DEF_ID);var d=c.applicationId;var e=b.tpa.app.getSections(d);if(!e||a.isEmpty(e)){return false}return true};var $=function(b,c){var d=c.comp&&a.size(c.comp)>0&&c.comp[0];var e=b.components.data.get(d);var f=b.tpa.app.getData(e.applicationId);if(P.hasCustomDoubleClickAction(f.appDefinitionId,e.widgetId)){P.mainAction(f.appDefinitionId,e.widgetId)}else if(b.isDesktopEditor()){N.open(b,d)}};var _=function(a){q.registerSection(a);r.registerSection();t.registerSection(a);s.registerSection()};var aa=function(a){a.tpa.appMarket.getDataForPage(a.pages.getFocusedPageId());a.registerPageNavigationCallback(function(b){a.tpa.appMarket.getDataForPage(b)})};var ba=function(a,b){a.tpa.change.editMode(b?"preview":"editor");U=b;if(!b){a.tpa.closePopupsAndModal()}};var ca=function(a){a.tpa.change.sitePublished()};var da=function(a){a.tpa.change.deviceType(a.getDeviceType())};var ea=function(a){a.registerToViewerChange(function(){var b=a.getPreviewMode();if(b!==U){ba(a,b)}})};var fa=function(a){H.init(a,D.relatedApps.addPanelCategories,function(){p.registerAddPanelSection()})};var ga=function(){return V};return{initEditor:W,onPreviewReady:X,editModeChange:ba,packagePicker:j,message:{sectionAlreadyInstalled:u,newPageAdded:w,cannotDeleteSection:v},confirmation:{sectionDelete:A,premiumTPADelete:x,deletePageContainsPremiumTpa:y,deleteContainerContainsPremiumTpa:z,addEcom:B},compPanels:{tpaSettings:h,appMarketPanel:i},compModals:{tpaSettingsModal:m,appMarketAppModal:k,appMarketPermissionsModal:l,appMarketModal:n},constants:c,superApps:D,dashboardApps:F,gfpp:G,getEditorAPI:ga,editorTPAHandlers:K,editorSuperAppsHandlers:T,appMarketUtils:L,settings:N,appMarketTabService:g,appMarketHandlers:M}});